{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to Mysite","text_tokens":["to"," ","mysite","welcome"],"title":"index","title_tokens":["index"]},{"location":"#welcome-to-mysite","text":"","text_tokens":[],"title":"Welcome to Mysite","title_tokens":["to"," ","mysite","welcome"]},{"location":"Docker/01 ChangeImageSource/","text":"Docker 01ï¼šä¿®æ”¹é•œåƒæº åœ¨ settings -> Daemon -> Advanced åœ¨ registry-mirrors æ‹¬å·å†…æ·»åŠ  \"https://registry.docker-cn.com\" docker info æŸ¥è¯¢ registry-mirrors","text_tokens":["å†…","info",".","æŸ¥è¯¢","ä¿®æ”¹",":","åœ¨","ï¼š","registry","-","æ·»åŠ ","/","cn","01","é•œåƒ","æº","advanced"," ","daemon","mirrors","docker","https",">","\"","æ‹¬å·","com","settings"],"title":"Docker 01ï¼šä¿®æ”¹é•œåƒæº","title_tokens":["01","é•œåƒ","æº"," ","docker","ï¼š","ä¿®æ”¹"]},{"location":"Docker/01 ChangeImageSource/#docker-01","text":"åœ¨ settings -> Daemon -> Advanced åœ¨ registry-mirrors æ‹¬å·å†…æ·»åŠ  \"https://registry.docker-cn.com\" docker info æŸ¥è¯¢ registry-mirrors","text_tokens":["å†…","info",".","æŸ¥è¯¢",":","åœ¨","registry","-","æ·»åŠ ","/","cn","advanced"," ","daemon","docker","mirrors","https",">","\"","æ‹¬å·","com","settings"],"title":"Docker 01ï¼šä¿®æ”¹é•œåƒæº","title_tokens":["01","é•œåƒ","æº"," ","docker","ï¼š","ä¿®æ”¹"]},{"location":"Docker/02 EntryPointAndCMD/","text":"Docker 02ï¼šDockerfileä¸­çš„ENTRYPOINTã€RUNä¸CMD CMDä¸ENRTYPOINT RUN CMD æ¯ä¸ª Dockerfile ä¸­åªèƒ½æœ‰ä¸€ä¸ª CMD , å¦‚æœæœ‰å¤šä¸ªé‚£ä¹ˆåªä¼šæ‰§è¡Œæœ€åä¸€ä¸ª. CMD ç›¸å½“äºå¯åŠ¨ docker æ—¶å€™åé¢æ·»åŠ çš„å‚æ•°: docker run -itd --name aaa docker_image /bin/bash -c. é•œåƒåç§°åé¢è·Ÿäº† /bin/bash -c ç­‰ä»·äºåœ¨dockerfileä¸­çš„ CMD [\"/bin/bash\", \"-c\"] è‹¥æ‰§è¡Œçš„æ—¶å€™æ·»åŠ äº†å‚æ•°,é»˜è®¤çš„ CMD ä¸­çš„å‚æ•°åˆ™æ— æ•ˆ ENTRYPOINT ç±»ä¼¼ CMD , æ¯ä¸ª Dockerfile åªèƒ½æœ‰ä¸€ä¸ª ENTRYPOINT , å¦‚æœå­˜åœ¨å¤šä¸ªåªæ‰§è¡Œæœ€åä¸€ä¸ª. å¿…å®šæ‰§è¡Œ, ä¸ä¼šåŠ¨æ€æ”¹å˜ ä¹¦å†™æ ¼å¼ Shellæ ¼å¼ï¼š , ä¾‹å¦‚: apt-get install python3 Exec [\"executable\", \"param1\", \"param2\", ...], ä¾‹å¦‚: [\"apt-get\", \"install\", \"python3\"] CMDå‘½ä»¤ CMD echo \"hello world\" 1. è¿è¡Œ docker run -it [image] , è¾“å‡ºhello world 2. è¿è¡Œ docker run -it [image]/bin/bash , CMD å‘½ä»¤ä¼šè¢«å¿½ç•¥, å‘½ä»¤ bash ä¼šè¢«æ‰§è¡Œ ENTRYPOINT ENTRYPOINT [\"/bin/echo\", \"Hello\"] 1. è¿è¡Œ docker run -it [image] , è¾“å‡ºHello 2. è¿è¡Œ docker run -it [image] kk , è¾“å‡ºHello kk, åŸæœ¬çš„Helloä»ç„¶ä¼šè¾“å‡º ä¿®æ”¹ Dockerfile ä¸º ENTRYPOINT [ \"/bin/echo\" , \"Hello\" ] CMD [ \"world\" ] 1. è¿è¡Œ docker run -it [name] , è¾“å‡ºHello world 2. è¿è¡Œ docker run -it [name] king , è¾“å‡ºHello king, CMD å‚æ•°è¢«åŠ¨æ€æ›¿æ¢. RUNå‘½ä»¤ RUN apt-get update && apt-get install -y \\ bzr \\ cvs \\ git \\ mercurial \\ subversion 1. apt-get update å’Œ apt-get install æ”¾åœ¨åŒä¸€ä¸ª RUN æŒ‡ä»¤æ‰§è¡Œå¯ä»¥==ä¿è¯æ¯æ¬¡å®‰è£…çš„éƒ½æ˜¯æœ€æ–°çš„åŒ…==; å¦‚æœå°† apt-get install æ”¾åœ¨å•ç‹¬çš„çš„ RUN ä¸­æ‰§è¡Œ, åˆ™ä¼šä½¿ç”¨ apt-get update åˆ›å»ºçš„é•œåƒå±‚, è¿™å±‚é•œåƒå¯èƒ½æ˜¯å¾ˆä¹…ä»¥å‰ç¼“å­˜çš„. æ€»ç»“ CMD è®¾ç½®å®¹å™¨å¯åŠ¨å==é»˜è®¤æ‰§è¡Œçš„å‘½ä»¤ä»¥åŠå‚æ•°==, è®¾ç½®çš„æŒ‡ä»¤å¯ä»¥è¢« docker run å‘½ä»¤åé¢çš„å‘½ä»¤å‡½å‚æ•°==åŠ¨æ€æ›¿æ¢== ENTRYPOINT é…ç½®å®¹å™¨å¯åŠ¨æ—¶çš„æ‰§è¡Œå‘½ä»¤, ä¸ä¼šè¢«å¿½ç•¥, ä¸€å®šä¼šè¢«æ‰§è¡Œ , å³ä½¿è¿è¡Œäº† docker run æ—¶æŒ‡å®šäº†å…¶ä»–å‘½ä»¤ ä½¿ç”¨ RUN æŒ‡ä»¤å®‰è£…åº”ç”¨å’Œè½¯ä»¶åŒ…ï¼Œæ„å»ºé•œåƒã€‚ å¦‚æœ Docker é•œåƒçš„ç”¨é€”æ˜¯è¿è¡Œåº”ç”¨ç¨‹åºæˆ–æœåŠ¡, æ¯”å¦‚è¿è¡Œä¸€ä¸ª MySQL, åº”è¯¥ä¼˜å…ˆä½¿ç”¨ Exec æ ¼å¼çš„ ENTRYPOINT æŒ‡ä»¤. CMD å¯ä¸º ENTRYPOINT æä¾›é¢å¤–çš„é»˜è®¤å‚æ•°, åŒæ—¶å¯åˆ©ç”¨ docker run å‘½ä»¤è¡Œæ›¿æ¢é»˜è®¤å‚æ•°. å¦‚æœæƒ³ä¸ºå®¹å™¨è®¾ç½®é»˜è®¤çš„å¯åŠ¨å‘½ä»¤,å¯ä½¿ç”¨ CMD æŒ‡ä»¤.ç”¨æˆ·å¯åœ¨ docker run å‘½ä»¤è¡Œä¸­æ›¿æ¢æ­¤é»˜è®¤å‘½ä»¤. REF: Dockerfile RUNï¼ŒCMDï¼ŒENTRYPOINTå‘½ä»¤åŒºåˆ« Dockerfileä¸­ENTRYPOINT å’Œ CMDçš„åŒºåˆ«","text_tokens":["æ—¶","é‚£ä¹ˆ","shell","king","æ‰§è¡Œå‘½ä»¤","_",",","æ—¶å€™",":","name","ç”¨é€”","ref","æä¾›","...","å¿…å®š","åœ¨","å","ï¼š","é»˜è®¤","æ”¹å˜","éƒ½","cmd","æ·»åŠ ","åŒä¸€ä¸ª","æƒ³"," ","ä¸ä¼š","åŸæœ¬","åªèƒ½","å…¶ä»–","docker","å¤šä¸ª","image","c","ç¨‹åº","install","ç­‰ä»·","æœ€æ–°","ä¸€å®š","enrtypoint","å®¹å™¨","åé¢","äº","2",".","å¯ä»¥","get","ä¿®æ”¹","param1","è‹¥","çš„","y","02","ä¸","æ¯ä¸ª","itd","è½¯ä»¶","ä¾‹å¦‚","mercurial","å³ä½¿","å®‰è£…","æ˜¯","åŒæ—¶","åº”ç”¨","å¯åŠ¨","executable","åŒºåˆ«","å¿½ç•¥","è½¯ä»¶åŒ…","ã€‚","æœåŠ¡","ç”¨æˆ·","æŒ‡å®š","åç§°","subversion","å¾ˆä¹…","æŒ‡ä»¤","ä¼˜å…ˆ","åŠ¨æ€","ç±»ä¼¼","æœ‰","å‘½ä»¤è¡Œ","hello","å­˜åœ¨","git","å¦‚æœ","å¾ˆä¹…ä»¥å‰","æ— æ•ˆ","æ„å»º","run","mysql","kk","å¯","å’Œ","æ‰§è¡Œ","ã€","ç›¸å½“","python3","&&","å½“äº","é¢å¤–","æ”¾åœ¨","dockerfile","]","å¯èƒ½","åŒ…","-","=","è®¾ç½®","/","å°†","exec","echo","é•œåƒ","è·Ÿ","bzr","åŒä¸€","ï¼Œ","it","ä»ç„¶","æœ€å","update","ä¿è¯","ä½¿ç”¨","åº”è¯¥","å±‚","åˆ©ç”¨","é…ç½®","param2","bash","aaa","å‚æ•°","å‡½","åº”ç”¨ç¨‹åº","åª","cvs","ç›¸å½“äº","æ›¿æ¢","äº†","ä¹¦å†™","1","entrypoint","bin",";","æ¯”å¦‚","åˆ›å»º","æˆ–","world","æ€»ç»“","è¿™å±‚","è¾“å‡º","ä»¥å‰","apt","ä¼š","ä¸€ä¸ª","æ ¼å¼","ä»¥åŠ","å‘½ä»¤","ç¼“å­˜","ä¸º","å•ç‹¬","æ­¤","ä¸­","åªä¼š","è¢«","\"","è¿è¡Œ","åˆ™","\\","æ¯æ¬¡","["],"title":"Docker 02ï¼šDockerfileä¸­çš„ENTRYPOINTã€RUNä¸CMD","title_tokens":["ä¸­","cmd","çš„","ã€","02","ä¸","entrypoint"," ","run","docker","dockerfile","ï¼š"]},{"location":"Docker/02 EntryPointAndCMD/#docker-02dockerfileentrypointruncmd","text":"","text_tokens":[],"title":"Docker 02ï¼šDockerfileä¸­çš„ENTRYPOINTã€RUNä¸CMD","title_tokens":["ä¸­","cmd","çš„","ã€","02","ä¸","entrypoint"," ","run","docker","dockerfile","ï¼š"]},{"location":"Docker/02 EntryPointAndCMD/#cmdenrtypoint","text":"RUN CMD æ¯ä¸ª Dockerfile ä¸­åªèƒ½æœ‰ä¸€ä¸ª CMD , å¦‚æœæœ‰å¤šä¸ªé‚£ä¹ˆåªä¼šæ‰§è¡Œæœ€åä¸€ä¸ª. CMD ç›¸å½“äºå¯åŠ¨ docker æ—¶å€™åé¢æ·»åŠ çš„å‚æ•°: docker run -itd --name aaa docker_image /bin/bash -c. é•œåƒåç§°åé¢è·Ÿäº† /bin/bash -c ç­‰ä»·äºåœ¨dockerfileä¸­çš„ CMD [\"/bin/bash\", \"-c\"] è‹¥æ‰§è¡Œçš„æ—¶å€™æ·»åŠ äº†å‚æ•°,é»˜è®¤çš„ CMD ä¸­çš„å‚æ•°åˆ™æ— æ•ˆ ENTRYPOINT ç±»ä¼¼ CMD , æ¯ä¸ª Dockerfile åªèƒ½æœ‰ä¸€ä¸ª ENTRYPOINT , å¦‚æœå­˜åœ¨å¤šä¸ªåªæ‰§è¡Œæœ€åä¸€ä¸ª. å¿…å®šæ‰§è¡Œ, ä¸ä¼šåŠ¨æ€æ”¹å˜","text_tokens":["å­˜åœ¨","åé¢","äº","å¦‚æœ","åª","é‚£ä¹ˆ","æ— æ•ˆ","ç›¸å½“äº",".","run","äº†","_","entrypoint",",","bin","æ—¶å€™",":","name","æ‰§è¡Œ","è‹¥","çš„","ç›¸å½“","å½“äº","æ¯ä¸ª","itd","å¿…å®š","åœ¨","[","dockerfile","ä¸€ä¸ª","]","é»˜è®¤","æ”¹å˜","-","cmd","æ·»åŠ ","/","å¯åŠ¨","é•œåƒ","è·Ÿ"," ","ä¸ä¼š","åªèƒ½","docker","æœ€å","å¤šä¸ª","image","c","åç§°","ä¸­","åªä¼š","\"","åŠ¨æ€","ç­‰ä»·","ç±»ä¼¼","åˆ™","æœ‰","bash","aaa","å‚æ•°"],"title":"CMDä¸ENRTYPOINT","title_tokens":["enrtypoint","cmd","ä¸"]},{"location":"Docker/02 EntryPointAndCMD/#_1","text":"Shellæ ¼å¼ï¼š , ä¾‹å¦‚: apt-get install python3 Exec [\"executable\", \"param1\", \"param2\", ...], ä¾‹å¦‚: [\"apt-get\", \"install\", \"python3\"]","text_tokens":["shell","get",",","param1",":","python3","...","apt","ä¾‹å¦‚","]","æ ¼å¼","ï¼š","-","exec","executable"," ","install","\"","param2","["],"title":"ä¹¦å†™æ ¼å¼","title_tokens":["æ ¼å¼","ä¹¦å†™"]},{"location":"Docker/02 EntryPointAndCMD/#cmd","text":"CMD echo \"hello world\" 1. è¿è¡Œ docker run -it [image] , è¾“å‡ºhello world 2. è¿è¡Œ docker run -it [image]/bin/bash , CMD å‘½ä»¤ä¼šè¢«å¿½ç•¥, å‘½ä»¤ bash ä¼šè¢«æ‰§è¡Œ","text_tokens":["2",".","run","1",",","bin","æ‰§è¡Œ","world","è¾“å‡º","ä¼š","]","-","cmd","/","å‘½ä»¤","echo","it"," ","å¿½ç•¥","docker","image","è¢«","\"","è¿è¡Œ","bash","hello","["],"title":"CMDå‘½ä»¤","title_tokens":["cmd","å‘½ä»¤"]},{"location":"Docker/02 EntryPointAndCMD/#entrypoint","text":"ENTRYPOINT [\"/bin/echo\", \"Hello\"] 1. è¿è¡Œ docker run -it [image] , è¾“å‡ºHello 2. è¿è¡Œ docker run -it [image] kk , è¾“å‡ºHello kk, åŸæœ¬çš„Helloä»ç„¶ä¼šè¾“å‡º ä¿®æ”¹ Dockerfile ä¸º ENTRYPOINT [ \"/bin/echo\" , \"Hello\" ] CMD [ \"world\" ] 1. è¿è¡Œ docker run -it [name] , è¾“å‡ºHello world 2. è¿è¡Œ docker run -it [name] king , è¾“å‡ºHello king, CMD å‚æ•°è¢«åŠ¨æ€æ›¿æ¢.","text_tokens":["2","king",".","æ›¿æ¢","run","1","kk","entrypoint","ä¿®æ”¹",",","bin","name","world","çš„","è¾“å‡º","ä¼š","]","dockerfile","-","cmd","/","echo","ä¸º","it","å‚æ•°"," ","åŸæœ¬","ä»ç„¶","docker","image","è¢«","\"","åŠ¨æ€","è¿è¡Œ","hello","["],"title":"ENTRYPOINT","title_tokens":["entrypoint"]},{"location":"Docker/02 EntryPointAndCMD/#run","text":"RUN apt-get update && apt-get install -y \\ bzr \\ cvs \\ git \\ mercurial \\ subversion 1. apt-get update å’Œ apt-get install æ”¾åœ¨åŒä¸€ä¸ª RUN æŒ‡ä»¤æ‰§è¡Œå¯ä»¥==ä¿è¯æ¯æ¬¡å®‰è£…çš„éƒ½æ˜¯æœ€æ–°çš„åŒ…==; å¦‚æœå°† apt-get install æ”¾åœ¨å•ç‹¬çš„çš„ RUN ä¸­æ‰§è¡Œ, åˆ™ä¼šä½¿ç”¨ apt-get update åˆ›å»ºçš„é•œåƒå±‚, è¿™å±‚é•œåƒå¯èƒ½æ˜¯å¾ˆä¹…ä»¥å‰ç¼“å­˜çš„.","text_tokens":["git","å¦‚æœ","cvs","å¾ˆä¹…ä»¥å‰",".","run","1","å¯ä»¥","get",",",";","å’Œ","æ‰§è¡Œ","åˆ›å»º","çš„","y","&&","è¿™å±‚","ä»¥å‰","apt","ä¼š","æ”¾åœ¨","mercurial","ä¸€ä¸ª","å¯èƒ½","å®‰è£…","åŒ…","éƒ½","-","æ˜¯","=","å°†","ç¼“å­˜","é•œåƒ","bzr","åŒä¸€","åŒä¸€ä¸ª"," ","update","ä¿è¯","å•ç‹¬","subversion","ä¸­","å¾ˆä¹…","install","ä½¿ç”¨","æŒ‡ä»¤","å±‚","åˆ™","æœ€æ–°","\\","æ¯æ¬¡"],"title":"RUNå‘½ä»¤","title_tokens":["run","å‘½ä»¤"]},{"location":"Docker/02 EntryPointAndCMD/#_2","text":"CMD è®¾ç½®å®¹å™¨å¯åŠ¨å==é»˜è®¤æ‰§è¡Œçš„å‘½ä»¤ä»¥åŠå‚æ•°==, è®¾ç½®çš„æŒ‡ä»¤å¯ä»¥è¢« docker run å‘½ä»¤åé¢çš„å‘½ä»¤å‡½å‚æ•°==åŠ¨æ€æ›¿æ¢== ENTRYPOINT é…ç½®å®¹å™¨å¯åŠ¨æ—¶çš„æ‰§è¡Œå‘½ä»¤, ä¸ä¼šè¢«å¿½ç•¥, ä¸€å®šä¼šè¢«æ‰§è¡Œ , å³ä½¿è¿è¡Œäº† docker run æ—¶æŒ‡å®šäº†å…¶ä»–å‘½ä»¤ ä½¿ç”¨ RUN æŒ‡ä»¤å®‰è£…åº”ç”¨å’Œè½¯ä»¶åŒ…ï¼Œæ„å»ºé•œåƒã€‚ å¦‚æœ Docker é•œåƒçš„ç”¨é€”æ˜¯è¿è¡Œåº”ç”¨ç¨‹åºæˆ–æœåŠ¡, æ¯”å¦‚è¿è¡Œä¸€ä¸ª MySQL, åº”è¯¥ä¼˜å…ˆä½¿ç”¨ Exec æ ¼å¼çš„ ENTRYPOINT æŒ‡ä»¤. CMD å¯ä¸º ENTRYPOINT æä¾›é¢å¤–çš„é»˜è®¤å‚æ•°, åŒæ—¶å¯åˆ©ç”¨ docker run å‘½ä»¤è¡Œæ›¿æ¢é»˜è®¤å‚æ•°. å¦‚æœæƒ³ä¸ºå®¹å™¨è®¾ç½®é»˜è®¤çš„å¯åŠ¨å‘½ä»¤,å¯ä½¿ç”¨ CMD æŒ‡ä»¤.ç”¨æˆ·å¯åœ¨ docker run å‘½ä»¤è¡Œä¸­æ›¿æ¢æ­¤é»˜è®¤å‘½ä»¤.","text_tokens":["åé¢","å‡½","åº”ç”¨ç¨‹åº","æ—¶","å¦‚æœ","æ„å»º",".","æ›¿æ¢","run","æ‰§è¡Œå‘½ä»¤","äº†","mysql","å¯ä»¥","entrypoint","å¯",",","æ¯”å¦‚","å’Œ","æ‰§è¡Œ","ç”¨é€”","çš„","æˆ–","é¢å¤–","æä¾›","åœ¨","ä¼š","å","è½¯ä»¶","å³ä½¿","ä¸€ä¸ª","é»˜è®¤","æ ¼å¼","å®‰è£…","ä»¥åŠ","æ˜¯","è®¾ç½®","cmd","=","å‘½ä»¤","åŒæ—¶","exec","åº”ç”¨","å¯åŠ¨","ï¼Œ","é•œåƒ","ä¸º","æƒ³"," ","ä¸ä¼š","å¿½ç•¥","è½¯ä»¶åŒ…","å…¶ä»–","docker","ã€‚","å®¹å™¨","ç¨‹åº","æœåŠ¡","ç”¨æˆ·","æ­¤","æŒ‡å®š","ä¸­","ä½¿ç”¨","æŒ‡ä»¤","è¢«","åº”è¯¥","åŠ¨æ€","ä¼˜å…ˆ","è¿è¡Œ","åˆ©ç”¨","é…ç½®","ä¸€å®š","å‘½ä»¤è¡Œ","å‚æ•°"],"title":"æ€»ç»“","title_tokens":["æ€»ç»“"]},{"location":"Docker/02 EntryPointAndCMD/#ref","text":"Dockerfile RUNï¼ŒCMDï¼ŒENTRYPOINTå‘½ä»¤åŒºåˆ« Dockerfileä¸­ENTRYPOINT å’Œ CMDçš„åŒºåˆ«","text_tokens":["ä¸­","cmd","å’Œ","å‘½ä»¤","çš„","ï¼Œ","run"," ","åŒºåˆ«","dockerfile","entrypoint"],"title":"REF:","title_tokens":["ref",":"]},{"location":"Docker/03 Docker-Compose/","text":"Docker-Composeå¿«é€Ÿå…¥é—¨ ä»€ä¹ˆæ˜¯Docker Compose? ç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨Dockeråº”ç”¨ç¨‹åºçš„å·¥å…·ï¼Œé€šè¿‡Composeä½¿ç”¨YAMLæ–‡ä»¶é…ç½®åº”ç”¨ç¨‹åºéœ€è¦çš„æ‰€æœ‰æœåŠ¡ã€‚å®ç°ä½¿ç”¨ä¸€ä¸ªå‘½ä»¤å°±èƒ½å¤Ÿä»YAMLæ–‡ä»¶é…ç½®ä¸­åˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡ã€‚ ä½¿ç”¨æ­¥éª¤ ä½¿ç”¨Dockerfileå®šä¹‰åº”ç”¨ç¨‹åºç¯å¢ƒ åœ¨ docker-compose.yml ä¸­æ­å»ºåº”ç”¨ç¨‹åºæ‰€éœ€çš„æœåŠ¡ æ‰§è¡Œ docker-compose up è¿è¡Œæ•´ä¸ªåº”ç”¨ç¨‹åº ç¤ºä¾‹ # composetest/app.py import time import redis from flask import Flask app = Flask ( __name__ ) # é€šè¿‡redisç¼“å­˜ cache = redis . Redis ( host = 'redis' , port = 6379 ) def get_hit_count (): retries = 5 while True : try : return cache . incr ( 'hits' ) except redis . exceptions . ConnectionError as exc : if retries == 0 : raise exc retries -= 1 time . sleep ( 0.5 ) @app.route ( '/' ) def hello (): count = get_hit_count () return 'Hello World! I have been seen {} times. \\n ' . format ( count ) åˆ›å»º composetest/requirements.txt æ–‡ä»¶ flask redis åˆ›å»º composetest/Dockerfile æ–‡ä»¶å®šä¹‰ app.py çš„ç¯å¢ƒ # ä»python3.7 alpineé•œåƒå¼€å§‹æ„å»º FROM python:3.7-alpine # è®¾ç½®å·¥ä½œç›®å½• WORKDIR /code # è®¾ç½®flaskå‘½ä»¤ä½¿ç”¨çš„ç¯å¢ƒå˜é‡ ENV FLASK_APP app.py ENV FLASK_RUN_HOST 0 .0.0.0 # å®‰è£…gcc RUN apk add --no-cache gcc musl-dev linux-headers # å¤åˆ¶requirements.txtå¹¶ä¸”å®‰è£…ä¾èµ– COPY requirements.txt requirements.txt # æ‰§è¡Œpip RUN pip install -r requirements.txt # å°†å½“å‰é¡¹ç›®å¤åˆ¶åˆ°é•œåƒä¸­çš„å·¥ä½œç›®å½• COPY . . # è®¾ç½®å®¹å™¨é»˜è®¤çš„æ‰§è¡Œå‘½ä»¤ CMD [ \"flask\" , \"run\" ] åˆ›å»º composetest/docker-compose.yml æ–‡ä»¶æŒ‡å®šåº”ç”¨ç¨‹åºæ‰€éœ€çš„æœåŠ¡ # yaml é…ç½® # composeç‰ˆæœ¬ version : '3' services : web : # æ„å»ºé•œåƒçš„ä¸Šä¸‹æ–‡è·¯å¾„: ./Dockerfile build : . # å¯¹å¤–æ˜ å°„çš„ç«¯å£ ports : - \"5000:5000\" redis : image : \"redis:alpine\" # å®šä¹‰äº†ä¸¤ä¸ªservice,åˆ†åˆ«æ˜¯webå’Œredis # web æœåŠ¡ä½¿ç”¨ä»Dockerfile å½“å‰ç›®å½•ä¸­æ„å»ºçš„é•œåƒ ä½¿ç”¨Composeå‘½ä»¤è¿è¡Œ docker-compose up -d ymlé…ç½® version : \"3.7\" services : webapp : build : context : ./dir dockerfile : Dockerfile-alternate args : buildno : 1 labels : - \"com.example.description=Accounting webapp\" - \"com.example.department=Finance\" - \"com.example.label-with-empty-value\" target : prod container_name : my-web-container command : [ \"bundle\" , \"exec\" , \"thin\" , \"-p\" , \"3000\" ] contextï¼šæŒ‡å®šDockerfileçš„ä¸Šä¸‹æ–‡è·¯å¾„ dockerfileï¼šæŒ‡å®šæ„å»ºé•œåƒçš„Dockerfileæ–‡ä»¶å labelsï¼šè®¾ç½®æ„å»ºé•œåƒçš„æ ‡ç­¾ container_nameï¼šè®¾ç½®å®¹å™¨åç§° commandï¼šè¦†ç›–å®¹å™¨å¯åŠ¨çš„é»˜è®¤æŒ‡ä»¤ ä¾èµ–å…³ç³» version : \"3.7\" services : web : build : . depends_on : - db - redis redis : image : redis db : image : postgres docker-compose upï¼šæ ¹æ®ä¾èµ–å…³ç³»å¯åŠ¨æœåŠ¡ï¼Œå…ˆå¯åŠ¨dbï¼Œrediså†å¯åŠ¨web docker-compose stopï¼šæ ¹æ®ä¾èµ–å…³ç³»å»·å¼æœåŠ¡ï¼Œå…ˆå…³é—­webï¼Œå†å…³é—­dbå’Œredis docker-compose up SERVICEï¼šè‡ªåŠ¨åŒ…å«SERVICEçš„ä¾èµ–é¡¹ï¼Œé€šè¿‡ docker-compose up è¿˜å°†åˆ›å»ºå¹¶å¯åŠ¨dbï¼Œredis æŒ‚è½½ version : '3' services : app : image : golang:latest volumes : # å°†é¡¹ç›®ä»£ç æ ¹ç›®å½•æ˜ å°„åˆ°å®¹å™¨ä¸­çš„ç›¸å…³ç›®å½• - $PWD : /go/src/example/demo ports : - \"8000:8000\" # æ‰§è¡Œgo run command : go run /go/src/example/demo/main.go ç¯å¢ƒå˜é‡ å¸ƒå°”å€¼éœ€è¦ç”¨å¼•å·ï¼Œç¡®ä¿YMLè§£æå™¨ä¸ä¼šå°†å…¶è½¬æ¢ä¸ºTrue/False environment : RACK_ENV : development SHOW : 'true' Ref: docker-composeå¿«é€Ÿå…¥é—¨","text_tokens":["å¼•å·","workdir","æ ‡ç­¾","æ­å»º","ä¸Šä¸‹","empty","æ‰§è¡Œå‘½ä»¤","have","label","development","_","å¿«é€Ÿ","version","prod",",","ä»","name","redis","ç¯å¢ƒ",":","postgres","service","been","æ˜ å°„","depends","åŒ…å«","pwd","latest","åœ¨","é»˜è®¤","ï¼š","import","cmd","container","ç”¨","ports","department","accounting","env","æ­¥éª¤"," ","ä¸ä¼š","context","docker","image","ç¨‹åº","dir","d","install","except","src","å˜é‡","add","ç«¯å£","compose","sleep","headers","3000","å¹¶","å®šä¹‰","buildno","å®¹å™¨","?","yaml","golang","ä»£ç ","cache","python","å·¥å…·","gcc","å…¶",".","true","ç¯å¢ƒå˜é‡","ä¸Šä¸‹æ–‡","args","thin","alternate","get","with","ref","show","å…¥é—¨","hit","ç‰ˆæœ¬","è½¬æ¢","$","å¸ƒå°”","çš„","alpine","ä¾èµ–","èƒ½å¤Ÿ","times","æ ¹æ®","build","è¦†ç›–","ç›¸å…³","[","flask","requirements","hits","up","å®‰è£…","å¯¹å¤–","finance","æ˜¯","command","å†","false","ä¸‹æ–‡","å¤åˆ¶","åº”ç”¨","web","å¯åŠ¨","example","æ ¹ç›®å½•","åˆ°","åˆ†åˆ«","if","{","volumes","ã€‚","å½“å‰","æœåŠ¡","labels","dev","æŒ‡å®š","webapp","åç§°","stop","value","æŒ‡ä»¤","@","0","my","è·¯å¾„",")","i","app","#","return","å¤š","0.5","try","raise","hello","__","éœ€","è§£æå™¨","ä»€ä¹ˆ","host","å†å¯åŠ¨","æ„å»º","musl","code","run","æ•´ä¸ª","5","target","å’Œ","æ‰§è¡Œ","py","æ‰€","format","å¹¶ä¸”","on","dockerfile","]","description","no","5000","-","db","=","è®¾ç½®","/","apk","æŒ‚è½½","time","å°†","exec","æ–‡ä»¶å","ï¼Œ","é•œåƒ","è§£æ","services","go","å»·å¼","ä¸¤ä¸ª","ä½¿ç”¨","å¸ƒå°”å€¼","æ–‡ä»¶","from","def","incr","connectionerror","å¤åˆ¶åˆ°","è‡ªåŠ¨","é…ç½®","com","é¡¹ç›®","route","r","exc","åº”ç”¨ç¨‹åº","å…³ç³»","é¡¹","environment","demo","ç¤ºä¾‹","1","!","äº†","é€šè¿‡","å½“å‰ç›®å½•","ç”¨äº","å…ˆ","ç›®å½•","6379","exceptions","åˆ›å»º","8000","å°±","æ‰€æœ‰","retries","3","'","n","å·¥ä½œ","è¿˜","rack","ä¸€ä¸ª","count","txt","linux","ç¡®ä¿","yml","(","å‘½ä»¤","å®ç°","ç¼“å­˜","seen","ä¸º","å…³é—­","}","éœ€è¦","p","copy","ä¸­","python3.7","3.7","port","å¼€å§‹","0.0","è¿è¡Œ","while","pip","\"","bundle","composetest","\\","as","ç¯å¢ƒå˜","world","main"],"title":"Docker-Composeå¿«é€Ÿå…¥é—¨","title_tokens":["å…¥é—¨","-","compose","docker","å¿«é€Ÿ"]},{"location":"Docker/03 Docker-Compose/#docker-compose","text":"","text_tokens":[],"title":"Docker-Composeå¿«é€Ÿå…¥é—¨","title_tokens":["å…¥é—¨","-","compose","docker","å¿«é€Ÿ"]},{"location":"Docker/03 Docker-Compose/#docker-compose_1","text":"ç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨Dockeråº”ç”¨ç¨‹åºçš„å·¥å…·ï¼Œé€šè¿‡Composeä½¿ç”¨YAMLæ–‡ä»¶é…ç½®åº”ç”¨ç¨‹åºéœ€è¦çš„æ‰€æœ‰æœåŠ¡ã€‚å®ç°ä½¿ç”¨ä¸€ä¸ªå‘½ä»¤å°±èƒ½å¤Ÿä»YAMLæ–‡ä»¶é…ç½®ä¸­åˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡ã€‚","text_tokens":["åº”ç”¨ç¨‹åº","å·¥å…·","é€šè¿‡","ç”¨äº","ä»","å’Œ","åˆ›å»º","çš„","å°±","æ‰€æœ‰","èƒ½å¤Ÿ","ä¸€ä¸ª","å‘½ä»¤","åº”ç”¨","å®ç°","ï¼Œ","å¯åŠ¨","ã€‚","docker","éœ€è¦","æœåŠ¡","ç¨‹åº","ä¸­","ä½¿ç”¨","æ–‡ä»¶","è¿è¡Œ","compose","é…ç½®","å¤š","å¹¶","å®šä¹‰","å®¹å™¨","yaml"],"title":"ä»€ä¹ˆæ˜¯Docker Compose?","title_tokens":["æ˜¯","compose"," ","docker","?","ä»€ä¹ˆ"]},{"location":"Docker/03 Docker-Compose/#_1","text":"ä½¿ç”¨Dockerfileå®šä¹‰åº”ç”¨ç¨‹åºç¯å¢ƒ åœ¨ docker-compose.yml ä¸­æ­å»ºåº”ç”¨ç¨‹åºæ‰€éœ€çš„æœåŠ¡ æ‰§è¡Œ docker-compose up è¿è¡Œæ•´ä¸ªåº”ç”¨ç¨‹åº","text_tokens":["åº”ç”¨ç¨‹åº","æ­å»º",".","æ•´ä¸ª","æ‰§è¡Œ","ç¯å¢ƒ","çš„","æ‰€","åœ¨","dockerfile","up","-","yml","åº”ç”¨"," ","docker","æœåŠ¡","ç¨‹åº","ä¸­","ä½¿ç”¨","è¿è¡Œ","compose","å®šä¹‰","éœ€"],"title":"ä½¿ç”¨æ­¥éª¤","title_tokens":["æ­¥éª¤","ä½¿ç”¨"]},{"location":"Docker/03 Docker-Compose/#_2","text":"# composetest/app.py import time import redis from flask import Flask app = Flask ( __name__ ) # é€šè¿‡redisç¼“å­˜ cache = redis . Redis ( host = 'redis' , port = 6379 ) def get_hit_count (): retries = 5 while True : try : return cache . incr ( 'hits' ) except redis . exceptions . ConnectionError as exc : if retries == 0 : raise exc retries -= 1 time . sleep ( 0.5 ) @app.route ( '/' ) def hello (): count = get_hit_count () return 'Hello World! I have been seen {} times. \\n ' . format ( count ) åˆ›å»º composetest/requirements.txt æ–‡ä»¶ flask redis åˆ›å»º composetest/Dockerfile æ–‡ä»¶å®šä¹‰ app.py çš„ç¯å¢ƒ # ä»python3.7 alpineé•œåƒå¼€å§‹æ„å»º FROM python:3.7-alpine # è®¾ç½®å·¥ä½œç›®å½• WORKDIR /code # è®¾ç½®flaskå‘½ä»¤ä½¿ç”¨çš„ç¯å¢ƒå˜é‡ ENV FLASK_APP app.py ENV FLASK_RUN_HOST 0 .0.0.0 # å®‰è£…gcc RUN apk add --no-cache gcc musl-dev linux-headers # å¤åˆ¶requirements.txtå¹¶ä¸”å®‰è£…ä¾èµ– COPY requirements.txt requirements.txt # æ‰§è¡Œpip RUN pip install -r requirements.txt # å°†å½“å‰é¡¹ç›®å¤åˆ¶åˆ°é•œåƒä¸­çš„å·¥ä½œç›®å½• COPY . . # è®¾ç½®å®¹å™¨é»˜è®¤çš„æ‰§è¡Œå‘½ä»¤ CMD [ \"flask\" , \"run\" ] åˆ›å»º composetest/docker-compose.yml æ–‡ä»¶æŒ‡å®šåº”ç”¨ç¨‹åºæ‰€éœ€çš„æœåŠ¡ # yaml é…ç½® # composeç‰ˆæœ¬ version : '3' services : web : # æ„å»ºé•œåƒçš„ä¸Šä¸‹æ–‡è·¯å¾„: ./Dockerfile build : . # å¯¹å¤–æ˜ å°„çš„ç«¯å£ ports : - \"5000:5000\" redis : image : \"redis:alpine\" # å®šä¹‰äº†ä¸¤ä¸ªservice,åˆ†åˆ«æ˜¯webå’Œredis # web æœåŠ¡ä½¿ç”¨ä»Dockerfile å½“å‰ç›®å½•ä¸­æ„å»ºçš„é•œåƒ ä½¿ç”¨Composeå‘½ä»¤è¿è¡Œ docker-compose up -d","text_tokens":["workdir","ä¸Šä¸‹","æ‰§è¡Œå‘½ä»¤","have","_","version",",","ä»","name",":","redis","ç¯å¢ƒ","service","been","æ˜ å°„","é»˜è®¤","import","cmd","ports","env"," ","docker","image","ç¨‹åº","d","install","except","å˜é‡","add","ç«¯å£","sleep","headers","compose","å®šä¹‰","å®¹å™¨","yaml","cache","python","gcc",".","true","ç¯å¢ƒå˜é‡","ä¸Šä¸‹æ–‡","get","hit","ç‰ˆæœ¬","çš„","alpine","ä¾èµ–","times","build","[","flask","requirements","hits","å®‰è£…","å¯¹å¤–","up","æ˜¯","ä¸‹æ–‡","å¤åˆ¶","åº”ç”¨","web","åˆ†åˆ«","if","{","å½“å‰","æœåŠ¡","dev","æŒ‡å®š","@","0","è·¯å¾„",")","i","app","#","return","0.5","raise","hello","try","__","éœ€","host","æ„å»º","musl","code","run","5","å’Œ","æ‰§è¡Œ","py","æ‰€","format","å¹¶ä¸”","dockerfile","]","no","5000","-","=","è®¾ç½®","/","apk","time","å°†","é•œåƒ","services","ä¸¤ä¸ª","ä½¿ç”¨","æ–‡ä»¶","from","def","incr","connectionerror","å¤åˆ¶åˆ°","é…ç½®","é¡¹ç›®","route","r","exc","åº”ç”¨ç¨‹åº","1","!","äº†","é€šè¿‡","å½“å‰ç›®å½•","ç›®å½•","6379","exceptions","åˆ›å»º","retries","3","'","n","å·¥ä½œ","txt","count","linux","yml","(","å‘½ä»¤","ç¼“å­˜","seen","}","copy","ä¸­","python3.7","3.7","port","å¼€å§‹","0.0","pip","while","\"","è¿è¡Œ","composetest","\\","as","ç¯å¢ƒå˜","world"],"title":"ç¤ºä¾‹","title_tokens":["ç¤ºä¾‹"]},{"location":"Docker/03 Docker-Compose/#yml","text":"version : \"3.7\" services : webapp : build : context : ./dir dockerfile : Dockerfile-alternate args : buildno : 1 labels : - \"com.example.description=Accounting webapp\" - \"com.example.department=Finance\" - \"com.example.label-with-empty-value\" target : prod container_name : my-web-container command : [ \"bundle\" , \"exec\" , \"thin\" , \"-p\" , \"3000\" ] contextï¼šæŒ‡å®šDockerfileçš„ä¸Šä¸‹æ–‡è·¯å¾„ dockerfileï¼šæŒ‡å®šæ„å»ºé•œåƒçš„Dockerfileæ–‡ä»¶å labelsï¼šè®¾ç½®æ„å»ºé•œåƒçš„æ ‡ç­¾ container_nameï¼šè®¾ç½®å®¹å™¨åç§° commandï¼šè¦†ç›–å®¹å™¨å¯åŠ¨çš„é»˜è®¤æŒ‡ä»¤ ä¾èµ–å…³ç³» version : \"3.7\" services : web : build : . depends_on : - db - redis redis : image : redis db : image : postgres docker-compose upï¼šæ ¹æ®ä¾èµ–å…³ç³»å¯åŠ¨æœåŠ¡ï¼Œå…ˆå¯åŠ¨dbï¼Œrediså†å¯åŠ¨web docker-compose stopï¼šæ ¹æ®ä¾èµ–å…³ç³»å»·å¼æœåŠ¡ï¼Œå…ˆå…³é—­webï¼Œå†å…³é—­dbå’Œredis docker-compose up SERVICEï¼šè‡ªåŠ¨åŒ…å«SERVICEçš„ä¾èµ–é¡¹ï¼Œé€šè¿‡ docker-compose up è¿˜å°†åˆ›å»ºå¹¶å¯åŠ¨dbï¼Œredis æŒ‚è½½ version : '3' services : app : image : golang:latest volumes : # å°†é¡¹ç›®ä»£ç æ ¹ç›®å½•æ˜ å°„åˆ°å®¹å™¨ä¸­çš„ç›¸å…³ç›®å½• - $PWD : /go/src/example/demo ports : - \"8000:8000\" # æ‰§è¡Œgo run command : go run /go/src/example/demo/main.go ç¯å¢ƒå˜é‡ å¸ƒå°”å€¼éœ€è¦ç”¨å¼•å·ï¼Œç¡®ä¿YMLè§£æå™¨ä¸ä¼šå°†å…¶è½¬æ¢ä¸ºTrue/False environment : RACK_ENV : development SHOW : 'true' Ref: docker-composeå¿«é€Ÿå…¥é—¨","text_tokens":["å¼•å·","æ ‡ç­¾","ä¸Šä¸‹","empty","label","development","_","å¿«é€Ÿ","version","prod",",",":","name","redis","åŒ…å«","ç¯å¢ƒ","postgres","service","depends","æ˜ å°„","pwd","latest","ï¼š","é»˜è®¤","container","ç”¨","department","ports","accounting","env"," ","ä¸ä¼š","context","image","docker","dir","src","å˜é‡","3000","compose","å¹¶","buildno","å®¹å™¨","golang","ä»£ç ","å…¶",".","true","ç¯å¢ƒå˜é‡","ä¸Šä¸‹æ–‡","args","thin","alternate","ref","with","show","å…¥é—¨","è½¬æ¢","$","å¸ƒå°”","çš„","ä¾èµ–","æ ¹æ®","build","è¦†ç›–","ç›¸å…³","up","finance","command","å†","false","ä¸‹æ–‡","web","example","å¯åŠ¨","æ ¹ç›®å½•","åˆ°","volumes","labels","æœåŠ¡","æŒ‡å®š","webapp","åç§°","stop","value","æŒ‡ä»¤","my","è·¯å¾„","app","#","è§£æå™¨","å†å¯åŠ¨","æ„å»º","run","target","å’Œ","æ‰§è¡Œ","on","dockerfile","]","description","-","db","=","è®¾ç½®","/","æŒ‚è½½","è§£æ","å°†","exec","æ–‡ä»¶å","é•œåƒ","ï¼Œ","services","go","å»·å¼","å¸ƒå°”å€¼","æ–‡ä»¶","è‡ªåŠ¨","com","é¡¹ç›®","å…³ç³»","é¡¹","environment","demo","1","é€šè¿‡","å…ˆ","ç›®å½•","åˆ›å»º","8000","3","'","è¿˜","rack","ç¡®ä¿","yml","ä¸º","å…³é—­","éœ€è¦","p","ä¸­","3.7","\"","bundle","ç¯å¢ƒå˜","[","main"],"title":"ymlé…ç½®","title_tokens":["yml","é…ç½®"]},{"location":"Docker/04 ä½¿ç”¨Dockeræ­å»ºGoå¼€å‘ç¯å¢ƒ/","text":"ä½¿ç”¨Dockeræ­å»ºGoå¼€å‘ç¯å¢ƒ åŸºæœ¬ä½¿ç”¨ æ‹‰å–Golangé•œåƒ docker pull golang è¿è¡Œå®¹å™¨ docker run --rm -it -name go-demo golang bash è¿›å…¥åˆ°bashä¸­ è®¾ç½®goproxy go env -w GOPROXY=https://goproxy.io,direct è®¾ç½®gomodule export GO111MODULE=on åœ¨å®¹å™¨ä¸­è¿è¡Œgoé¡¹ç›® docker run --rm -it --name go-demo \\ -v $PWD : /go/src/example/go-demo \\ -p 8000 :8000 golang é€šè¿‡ -v å°†æœ¬åœ°ç›®å½•/æ•°æ®æŒ‚è½½åˆ°å®¹å™¨ä¸­ï¼Œ -p æŒ‡å®šä¸»æœºå’Œå®¹å™¨çš„ç«¯å£æ˜ å°„ã€‚ åˆ‡æ¢åˆ°bashä¼šè¯ä¸­è¿è¡Œ go run go/src/example/go-demo ä½¿ç”¨docker-compose åœ¨é¡¹ç›®ä»£ç è·Ÿç›®å½•åˆ›å»º docker-compose.yml version : '3' services : app : image : golang:latest volumes : # å°†é¡¹ç›®ä»£ç æ ¹ç›®å½•æ˜ å°„åˆ°å®¹å™¨ä¸­çš„ç›¸å…³ç›®å½• - $PWD : /go/src/example/demo ports : - \"8000:8000\" # æ‰§è¡Œgo run command : go run /go/src/example/demo/main.go å¯åŠ¨docker-composeå¹¶ä¸”ï¼š docker-compose up -d ä¿®æ”¹ä»£ç ï¼Œé‡æ–°ç¼–è¯‘é¡¹ç›®ï¼š docker-compose restart è¿›å…¥å®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤ï¼š docker-compose exec <container name> bash ï¼Œä¾‹å¦‚ docker-compose exec app go test","text_tokens":["è¿›å…¥","æ•°æ®","æ­å»º","æ‰§è¡Œå‘½ä»¤","version",",","name",":","é‡æ–°","ç¯å¢ƒ","æ˜ å°„","pwd","latest","åœ¨","æœ¬åœ°","test","ï¼š","export","ä¼šè¯","container","ports","env","rm"," ","docker","image","d",">","goproxy","src","gomodule","ç«¯å£","compose","io","å®¹å™¨","golang","go111module","ä»£ç ",".","restart","ä¿®æ”¹","åŸºæœ¬","$","çš„","ç›¸å…³","ä¾‹å¦‚","up","command","åˆ°","example","æ ¹ç›®å½•","å¯åŠ¨","volumes","ã€‚","æŒ‡å®š","app","#","å¼€å‘","ç«¯å£æ˜ å°„","run","å’Œ","æ‰§è¡Œ","å¹¶ä¸”","on","-","è®¾ç½®","=","/","æŒ‚è½½","å°†","exec","é•œåƒ","ï¼Œ","è·Ÿ","services","it","go","ä½¿ç”¨","direct","bash","é¡¹ç›®","pull","<","v","demo","ç¼–è¯‘","é€šè¿‡","ç›®å½•","w","åˆ‡æ¢","åˆ›å»º","8000","3","ä¸»æœº","'","yml","å‘½ä»¤","https","p","ä¸­","æ‹‰å–","\"","è¿è¡Œ","\\","main"],"title":"ä½¿ç”¨Dockeræ­å»ºGoå¼€å‘ç¯å¢ƒ","title_tokens":["ä½¿ç”¨","ç¯å¢ƒ","æ­å»º","go","å¼€å‘","docker"]},{"location":"Docker/04 ä½¿ç”¨Dockeræ­å»ºGoå¼€å‘ç¯å¢ƒ/#dockergo","text":"","text_tokens":[],"title":"ä½¿ç”¨Dockeræ­å»ºGoå¼€å‘ç¯å¢ƒ","title_tokens":["ä½¿ç”¨","ç¯å¢ƒ","æ­å»º","go","å¼€å‘","docker"]},{"location":"Docker/04 ä½¿ç”¨Dockeræ­å»ºGoå¼€å‘ç¯å¢ƒ/#_1","text":"æ‹‰å–Golangé•œåƒ docker pull golang è¿è¡Œå®¹å™¨ docker run --rm -it -name go-demo golang bash è¿›å…¥åˆ°bashä¸­ è®¾ç½®goproxy go env -w GOPROXY=https://goproxy.io,direct è®¾ç½®gomodule export GO111MODULE=on åœ¨å®¹å™¨ä¸­è¿è¡Œgoé¡¹ç›® docker run --rm -it --name go-demo \\ -v $PWD : /go/src/example/go-demo \\ -p 8000 :8000 golang é€šè¿‡ -v å°†æœ¬åœ°ç›®å½•/æ•°æ®æŒ‚è½½åˆ°å®¹å™¨ä¸­ï¼Œ -p æŒ‡å®šä¸»æœºå’Œå®¹å™¨çš„ç«¯å£æ˜ å°„ã€‚ åˆ‡æ¢åˆ°bashä¼šè¯ä¸­è¿è¡Œ go run go/src/example/go-demo","text_tokens":["golang","pull","v","è¿›å…¥","go111module","æ•°æ®","ç«¯å£æ˜ å°„",".","demo","run","é€šè¿‡","ç›®å½•","w",",","åˆ‡æ¢","name",":","$","8000","å’Œ","çš„","æ˜ å°„","pwd","ä¸»æœº","åœ¨","on","æœ¬åœ°","export","-","ä¼šè¯","è®¾ç½®","=","/","æŒ‚è½½","å°†","åˆ°","é•œåƒ","env","example","ï¼Œ","rm","it"," ","go","ã€‚","docker","https","p","æŒ‡å®š","ä¸­","æ‹‰å–","goproxy","src","gomodule","è¿è¡Œ","ç«¯å£","direct","\\","bash","é¡¹ç›®","io","å®¹å™¨"],"title":"åŸºæœ¬ä½¿ç”¨","title_tokens":["åŸºæœ¬","ä½¿ç”¨"]},{"location":"Docker/04 ä½¿ç”¨Dockeræ­å»ºGoå¼€å‘ç¯å¢ƒ/#docker-compose","text":"åœ¨é¡¹ç›®ä»£ç è·Ÿç›®å½•åˆ›å»º docker-compose.yml version : '3' services : app : image : golang:latest volumes : # å°†é¡¹ç›®ä»£ç æ ¹ç›®å½•æ˜ å°„åˆ°å®¹å™¨ä¸­çš„ç›¸å…³ç›®å½• - $PWD : /go/src/example/demo ports : - \"8000:8000\" # æ‰§è¡Œgo run command : go run /go/src/example/demo/main.go å¯åŠ¨docker-composeå¹¶ä¸”ï¼š docker-compose up -d ä¿®æ”¹ä»£ç ï¼Œé‡æ–°ç¼–è¯‘é¡¹ç›®ï¼š docker-compose restart è¿›å…¥å®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤ï¼š docker-compose exec <container name> bash ï¼Œä¾‹å¦‚ docker-compose exec app go test","text_tokens":["golang","<","ä»£ç ","è¿›å…¥",".","demo","run","æ‰§è¡Œå‘½ä»¤","ç¼–è¯‘","restart","version","ç›®å½•","ä¿®æ”¹",":","åˆ›å»º","$","8000","çš„","æ‰§è¡Œ","é‡æ–°","name","æ˜ å°„","pwd","3","latest","'","åœ¨","å¹¶ä¸”","ç›¸å…³","test","ä¾‹å¦‚","ï¼š","up","command","-","yml","container","/","å‘½ä»¤","ports","å°†","exec","æ ¹ç›®å½•","è·Ÿ","åˆ°","example","å¯åŠ¨","services","volumes","ï¼Œ"," ","go","docker","image","ä¸­","d",">","src","\"","app","compose","#","bash","é¡¹ç›®","å®¹å™¨","main"],"title":"ä½¿ç”¨docker-compose","title_tokens":["-","docker","compose","ä½¿ç”¨"]},{"location":"Docker/05/","text":"å®¿ä¸»æœºå®‰è£…dockeråç”Ÿæˆdockerç½‘å¡ dockerç½‘å¡é€šè¿‡natä¸ºå®¹å™¨åˆ†é…ip å®¹å™¨ä»¶é€šè¿‡ipç›´æ¥é€šä¿¡(åŒä¸€ç½‘æ®µï¼Œè®¿é—®ç›¸å…³ç«¯å£ï¼‰ å®¹å™¨å’Œå®¿ä¸»æœºå™¨é€šè¿‡ç½‘å¡è½¬å‘è·¯ç”±è¿›è¡Œé€šä¿¡ ç¤ºä¾‹1ï¼šipè®¿é—® docker run -d -p 80:80 --name mynginx nginx å¯åŠ¨nginxå®¹å™¨ docker exec -it mynginx bash è¿›å…¥å®¹å™¨ cat /etc/hosts æŸ¥çœ‹ip:172.17.0.2 é€šè¿‡alpine Linuxå°è¯•è®¿é—®nginx docker run -dit alpine åå°é˜»å¡è¿è¡Œalpineï¼Œå› ä¸ºalpineå†…éƒ¨æ²¡æœ‰ä»»ä½•æ“ä½œï¼Œæ‰€ä»¥éœ€è¦é˜»å¡è¿è¡Œ docker exec -it apline sh è¿›å…¥å®¹å™¨ apk add curl å®‰è£…curl curl 172.17.0.2 è®¿é—®nginx å®ä¾‹2ï¼šé€šè¿‡--linkæ˜ å°„å®¹å™¨åŸŸå docker run -dit --link mynginx:myng alpine é€šè¿‡ --link å°† mynginx çš„==åŸŸå==æ˜ å°„åˆ°å®¹å™¨ä¸­çš„ myng ï¼Œé€šè¿‡curlè®¿é—® myng cat /ect/hosts æŸ¥çœ‹hostæ–‡ä»¶å¯ä»¥çœ‹åˆ° mynginx æ˜ å°„åˆ°äº† 172.17.0.2 å®ä¾‹3ï¼šdocker-compose å‡å¦‚æœ‰nginxã€golangå’Œmysqlä¸‰ä¸ªæœåŠ¡åˆ™éœ€è¦å¤šä¸ª --link å°†å„ä¸ªå®¹å™¨ç»™è¿æ¥èµ·æ¥ï¼Œå…¶ä¸­åˆ›å»ºé¡ºåºæ˜¯mysqlã€golangã€nginxï¼Œå› ä¸ºåé¢çš„å®¹å™¨éƒ½éœ€è¦ç”¨åˆ°å‰é¢å®¹å™¨ï¼Œéœ€è¦å…ˆå°†å‰é¢å®¹å™¨ç»™è¿æ¥ğŸ”—èµ·æ¥ã€‚ é€šè¿‡é…ç½®æ–‡ä»¶ç»Ÿä¸€é…ç½®ï¼š docker-compose","text_tokens":["è¿æ¥","172.17","è¿›å…¥","ç»Ÿä¸€","è½¬å‘","è¿›è¡Œ",":","name","apline","æ˜ å°„","å","nat","ï¼š","ç»™","ï¼‰","éƒ½","myng","sh"," ","å°è¯•","docker","å®¿ä¸»","cat","ä¸‰ä¸ª","å¤šä¸ª","è¿æ¥èµ·æ¥","d","ç«¯å£","add","compose","å®¹å™¨","dit","golang","åé¢","2",".","å¯ä»¥","çš„","alpine","è®¿é—®","å‡å¦‚","ç›¸å…³","å®‰è£…","ä»»ä½•","æ˜¯","0.2","é˜»å¡","åˆ°","å¯åŠ¨","80","ip","ã€‚","æœåŠ¡","é€šä¿¡","åŸŸå","åˆ†é…","æ“ä½œ","èµ·æ¥","è·¯ç”±","ğŸ”—","æœ‰","host","ç½‘æ®µ","ç½‘å¡","run","hosts","mysql","é…ç½®æ–‡ä»¶","å’Œ","ã€","mynginx","ç”¨åˆ°","å®¿ä¸»æœº","-","nginx","=","/","apk","å®ä¾‹","exec","å°†","ï¼Œ","åŒä¸€","it","æ²¡æœ‰","curl","link","å› ä¸º","æ–‡ä»¶","æ¥èµ·","ect","é…ç½®","bash","æœºå™¨","é¡ºåº","ç¤ºä¾‹","1","äº†","é€šè¿‡","å…ˆ","æŸ¥çœ‹","å…¶ä¸­","å‰é¢","etc","åˆ›å»º","å„ä¸ª","ä»¶","3","ä¸»æœº","å†…éƒ¨","åå°","linux","(","ä¸º","æ‰€ä»¥","éœ€è¦","p","ä¸­","è¿è¡Œ","çœ‹åˆ°","åˆ™","ç›´æ¥","ç”Ÿæˆ"],"title":"05","title_tokens":["05"]},{"location":"Docker/05/#1ip","text":"docker run -d -p 80:80 --name mynginx nginx å¯åŠ¨nginxå®¹å™¨ docker exec -it mynginx bash è¿›å…¥å®¹å™¨ cat /etc/hosts æŸ¥çœ‹ip:172.17.0.2 é€šè¿‡alpine Linuxå°è¯•è®¿é—®nginx docker run -dit alpine åå°é˜»å¡è¿è¡Œalpineï¼Œå› ä¸ºalpineå†…éƒ¨æ²¡æœ‰ä»»ä½•æ“ä½œï¼Œæ‰€ä»¥éœ€è¦é˜»å¡è¿è¡Œ docker exec -it apline sh è¿›å…¥å®¹å™¨ apk add curl å®‰è£…curl curl 172.17.0.2 è®¿é—®nginx","text_tokens":["172.17","è¿›å…¥",".","run","hosts","é€šè¿‡","æŸ¥çœ‹",":","name","etc","mynginx","alpine","è®¿é—®","apline","å†…éƒ¨","åå°","linux","å®‰è£…","ä»»ä½•","-","nginx","0.2","/","é˜»å¡","apk","exec","å¯åŠ¨","ï¼Œ","sh","80","it","ip"," ","å°è¯•","æ²¡æœ‰","æ‰€ä»¥","curl","docker","cat","å› ä¸º","éœ€è¦","p","æ“ä½œ","d","è¿è¡Œ","add","bash","å®¹å™¨","dit"],"title":"ç¤ºä¾‹1ï¼šipè®¿é—®","title_tokens":["è®¿é—®","ip","ç¤ºä¾‹","1","ï¼š"]},{"location":"Docker/05/#2-link","text":"docker run -dit --link mynginx:myng alpine é€šè¿‡ --link å°† mynginx çš„==åŸŸå==æ˜ å°„åˆ°å®¹å™¨ä¸­çš„ myng ï¼Œé€šè¿‡curlè®¿é—® myng cat /ect/hosts æŸ¥çœ‹hostæ–‡ä»¶å¯ä»¥çœ‹åˆ° mynginx æ˜ å°„åˆ°äº† 172.17.0.2","text_tokens":["172.17",".","run","hosts","äº†","é€šè¿‡","å¯ä»¥","æŸ¥çœ‹",":","çš„","mynginx","alpine","æ˜ å°„","è®¿é—®","-","=","0.2","/","å°†","myng","åˆ°","ï¼Œ"," ","curl","link","docker","cat","åŸŸå","ä¸­","æ–‡ä»¶","çœ‹åˆ°","ect","å®¹å™¨","dit","host"],"title":"å®ä¾‹2ï¼šé€šè¿‡--linkæ˜ å°„å®¹å™¨åŸŸå","title_tokens":["-","2","å®ä¾‹","æ˜ å°„","åŸŸå","link","é€šè¿‡","å®¹å™¨","ï¼š"]},{"location":"Docker/05/#3docker-compose","text":"å‡å¦‚æœ‰nginxã€golangå’Œmysqlä¸‰ä¸ªæœåŠ¡åˆ™éœ€è¦å¤šä¸ª --link å°†å„ä¸ªå®¹å™¨ç»™è¿æ¥èµ·æ¥ï¼Œå…¶ä¸­åˆ›å»ºé¡ºåºæ˜¯mysqlã€golangã€nginxï¼Œå› ä¸ºåé¢çš„å®¹å™¨éƒ½éœ€è¦ç”¨åˆ°å‰é¢å®¹å™¨ï¼Œéœ€è¦å…ˆå°†å‰é¢å®¹å™¨ç»™è¿æ¥ğŸ”—èµ·æ¥ã€‚ é€šè¿‡é…ç½®æ–‡ä»¶ç»Ÿä¸€é…ç½®ï¼š docker-compose","text_tokens":["golang","è¿æ¥","åé¢","é¡ºåº","ç»Ÿä¸€","mysql","é…ç½®æ–‡ä»¶","é€šè¿‡","å…ˆ","å…¶ä¸­","å‰é¢","å’Œ","åˆ›å»º","ã€","çš„","ç”¨åˆ°","å„ä¸ª","å‡å¦‚","ï¼š","ç»™","éƒ½","-","æ˜¯","nginx","å°†","ï¼Œ"," ","link","ã€‚","æœåŠ¡","å¤šä¸ª","éœ€è¦","ä¸‰ä¸ª","è¿æ¥èµ·æ¥","å› ä¸º","docker","èµ·æ¥","æ¥èµ·","æ–‡ä»¶","ğŸ”—","åˆ™","æœ‰","compose","é…ç½®","å®¹å™¨"],"title":"å®ä¾‹3ï¼šdocker-compose","title_tokens":["-","å®ä¾‹","3","compose","docker","ï¼š"]},{"location":"Golang/Basic/01 Channel/","text":"channel what is channel channelæ˜¯goroutineå’Œgoroutineä¹‹é—´æ— é”äº¤æµçš„ã€åª’ä»‹ã€‘ï¼Œæ¢å¥è¯è¯´ï¼Œchannelæ˜¯ä¸€ç§å…è®¸ä¸€ä¸ªgoroutineå‘é€æ•°æ®ç»™å¦å¤–ä¸€ä¸ªgoroutineçš„æŠ€æœ¯ï¼Œé»˜è®¤çš„channelæ˜¯åŒå‘çš„ï¼Œæ„å‘³ç€goroutineså¯ä»¥é€šè¿‡åŒä¸€ä¸ªchannelå‘ã€æ”¶æ•°æ®ã€‚ how syntax var Channel_name chan Type channel_name := make(chan Type) åœ¨golangä¸­, æˆ‘ä»¬ç”¨å…³é”®å­— Channel_name chan Type åˆ›å»ºæŸç§ç±»å‹çš„channelï¼Œå…¶ä¸­channelä»…ä»…å¯ä»¥ä¼ é€’åŒç§ç±»å‹çš„æ•°æ®ï¼Œä¸åŒç±»å‹çš„æ•°æ®ä¸å¯ä»¥é€šè¿‡ä¸€ä¸ªç±»å‹çš„channelä¼ é€’ã€‚ Send and Receive Data From a Channel åœ¨golangä¸­ï¼Œchannelä¸»è¦æœ‰ä¸¤ä¸ªæ“ä½œï¼Œä¸€ä¸ªæ˜¯ sending ï¼Œä¸€ä¸ªæ˜¯ receiving ï¼Œè¿™ä¸¤ç§æ“ä½œè¢«ç§°ä¸ºé€šè®¯ã€‚ <- ç®­å¤´çš„æ–¹å‘è¡¨æ˜æ˜¯å‘é€æ•°æ®è¿˜æ˜¯æ¥å—æ•°æ®ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œchannelä¸­çš„å‘é€ã€æ¥å—æ“ä½œå—ã€ç›´åˆ°å¦ä¸€ç«¯æœªå°±ç»ªã€‘ ï¼Œå…è®¸goroutineä¹‹é—´åœ¨æ²¡æœ‰æ˜¾å¼é”æˆ–è€…æ¡ä»¶å˜é‡çš„æ—¶å€™äº’ç›¸åŒæ­¥ å‘é€æ“ä½œï¼šåœ¨channelçš„å¸®åŠ©ä¸‹ç”¨æ¥å°†goroutineçš„æ•°æ®å‘é€ç»™å¦å¤–ä¸€ä¸ªgoroutineï¼Œé€šè¿‡channelå‘é€ float64 ï¼Œ int ï¼Œ bool æ˜¯å®‰å…¨åˆ‡å®¹æ˜“çš„ï¼Œå› ä¸ºè¿™äº›å€¼ä¼šè¢« æ‹·è´ ä¸€ä»½ï¼Œä¸ä¼šæœ‰æ„å¤–å¹¶å‘çš„é£é™©ï¼ŒåŒæ ·çš„ï¼Œ strings ç±»å‹ä¹Ÿæ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºå®ƒæ˜¯ immutableï¼ˆä¸å¯æ›´æ”¹ï¼‰ ã€‚åœ¨å‘é€ pointers æˆ–è€… slice ï¼Œ map ç­‰å¼•ç”¨çš„æ—¶å€™ï¼Œchannelæ˜¯ä¸å®‰å…¨çš„ï¼Œå› ä¸ºæŒ‡é’ˆæˆ–è€…å¼•ç”¨ä¼šè¢«å‘é€è€…æˆ–è€…æ¥æ”¶è€…åœ¨åŒä¸€æ—¶é—´ä¿®æ”¹ï¼Œç»“æœæ˜¯ä¸å¯é¢„çŸ¥çš„ï¼Œå› æ­¤éœ€è¦==ç¡®ä¿åªæœ‰ä¸€ä¸ªgoroutineèƒ½å¤Ÿè®¿é—®== Mychannel <- element è¡¨æ˜äº†æ•°æ®ï¼ˆelementï¼‰å‘é€ç»™äº†Mychannel æ¥å—æ“ä½œï¼š element := <- Mychannel package main import \"fmt\" func main () { fmt . Println ( \"starting Main method\" ) ch := make ( chan int ) go myfunc ( ch ) ch <- 23 fmt . Println ( \"End Main method\" ) } func myfunc ( ch chan int ) { fmt . Println ( 234 + <- ch ) } Closing a Channel close() è¿™æ˜¯ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œè®¾äº†ä¸€ä¸ªè¡¨ç¤ºè¡¨æ˜ä¸ä¼šå†æœ‰å€¼å‘é€ç»™è¯¥channelã€‚ ele, ok = <- Mychannel é€šè¿‡å¾ªç¯ï¼Œæ¥å—è€…ä¼šæ£€æŸ¥è¯¥channelæ˜¯æ‰“å¼€çš„è¿˜æ˜¯å…³é—­çš„ï¼Œå¦‚æœokæ˜¯çœŸï¼Œåˆ™æ„å‘³ç€è¯¥channelæ˜¯æ‰“å¼€çš„ã€‚ package main import \"fmt\" func main () { c := make ( chan string ) // è°ƒç”¨goroutine go myFunc ( c ) for { res , ok := <- c if ok == false { fmt . Println ( \"Channel Close\" , ok ) break } fmt . Println ( \"Channel Open\" , res , ok ) } } func myFunc ( mychnl chan string ) { for v := 0 ; v < 4 ; v ++ { mychnl <- \"GeeksforGeeks\" } close ( mychnl ) } Blocking Send and Receive åœ¨channelä¸­ï¼Œå½“æ•°æ®å‘é€ç»™ä¸€ä¸ªchannelï¼Œç›´åˆ°å¦å¤–çš„goroutineè¯»å–è¿™ä¸ªchannelå‰ï¼Œå‘é€çš„å£°æ˜æ˜¯è¢«é˜»å¡çš„ï¼ˆå‘é€å®Œåå¿…é¡»ç­‰å¾…è¯¥ä¿¡æ¯è¢«è¯»å–æ‰èƒ½å¤Ÿç»§ç»­å‘é€ï¼‰ã€‚åŒæ ·çš„ï¼Œå½“ä¸€ä¸ªchannelæ¥å—æ•°æ®çš„æ—¶å€™åœ¨æ¥æ”¶åˆ°æ•°æ®å‰éƒ½æ˜¯è¢«é˜»å¡çš„ã€‚ channelä¸­çš„é›¶å€¼æ˜¯ nil ã€‚ for å¾ªç¯å¯ä»¥è¿­ä»£channelä¸­æ‰€æœ‰è¿ç»­çš„å€¼ï¼Œç›´åˆ°è¯¥channelã€‚ package main import \"fmt\" func main () { mychnl := make ( chan string ) go func () { mychnl <- \"GFG\" mychnl <- \"ABC\" mychnl <- \"ASDJH\" mychnl <- \"asdjjak\" close ( mychnl ) }() for res := range mychnl { fmt . Println ( res ) } } Length of the Channel len() è¡¨æ˜åœ¨channelç¼“å†²åŒºä¸­==å€¼çš„æ•°é‡== package main import \"fmt\" func main () { mychnl := make ( chan string , 4 ) mychnl <- \"GFG\" mychnl <- \"ABC\" mychnl <- \"ASDJH\" mychnl <- \"asdjjak\" fmt . Println ( \"Length of the channel is:\" , len ( mychnl )) } Capacity of the Channel cap() è¡¨æ˜channelç¼“å†²åŒºçš„å¤§å° package main import \"fmt\" func main () { mychnl := make ( chan string , 8 ) mychnl <- \"GFG\" mychnl <- \"ABC\" mychnl <- \"ASDJH\" fmt . Println ( \"Capacity of the channel is:\" , cap ( mychnl )) }","text_tokens":["æ•°æ®","ä¸‹","ç»“æœ","æ¡ä»¶","è¯»å–","ä¿¡æ¯","closing","æŸç§","_","å‘é€è€…","ä¸","é¢„çŸ¥",",","æ—¶å€™","é›¶å€¼","name",":","package","è¿­ä»£","+","23","4","åœ¨","blocking","å¿…é¡»","é»˜è®¤","ï¼š","ç»™","ï¼‰","éƒ½","å¸®åŠ©","import","make","æ”¶","é”","æ¥å—","åŒä¸€ä¸ª","geeksforgeeks"," ","ä¸ä¼š","send","å†æœ‰","c","åŒç§","è¿™äº›","ç§°ä¸º","æ— é”","å˜é‡","æ—¶é—´","bool","æŠ€æœ¯","channel","main","åŒå‘","ä¸€ç«¯","syntax","golang","cap","ã€‘","++","è¿˜æ˜¯","å®¹æ˜“","8","starting","open","abc","res","å¼•ç”¨",".","what","234","å¯ä»¥","æ•°é‡","ä¿®æ”¹","is","åˆ‡","å—","è¿ç»­","çš„","å¦ä¸€ç«¯","èƒ½å¤Ÿ","è®¿é—®","ch","ok","å‘é€æ•°æ®","var","method","ele","ä¹Ÿ","å‘","æ˜¯","false","å¹¶å‘","é˜»å¡","åŒæ ·","asdjh","println","åˆ°","{","if","ã€‚","è¿™æ˜¯","å€¼","å®‰å…¨","gfg","mychannel","data","æ“ä½œ","æƒ…å†µ","æ›´æ”¹","ä¸€æ—¶é—´","æ£€æŸ¥","break","æˆ‘ä»¬","0","ç”¨æ¥","receiving",")","æ‹·è´","æœ‰","å¾ªç¯","å‰","å‘é€ç»™","å®ƒ","é€šè®¯","å‘é€","slice","è®¾","æŒ‡é’ˆ","æ‰“å¼€","chan","å¦‚æœ","element","æ¢å¥","fmt","æ‰","ä»…ä»…","ä¸»è¦","string","ç¼“å†²åŒº","å—è€…","è¡¨ç¤º","pointers","æ–¹å‘","æ¥æ”¶è€…","mychnl","å’Œ","ã€","for","ç±»å‹","sending","ç®­å¤´","ä¸åŒ","è¿™","-","=","/","å°†","ï¼Œ","å¦å¤–","åŒä¸€","åŒä¸€æ—¶é—´","è°ƒç”¨","æ²¡æœ‰","ä¹‹é—´","å…³é”®","ä¼ é€’","æ¥æ”¶","å› æ­¤","go","of","æ¢å¥è¯è¯´","å› ä¸º","ä¸¤ä¸ª","è¡¨æ˜","ä¸€æ—¶","å‡½æ•°","å½“","capacity","ä¸¤ç§","from","åªæœ‰","ä¸å¯","å…è®¸","åª’ä»‹","å†…ç½®","ï¼ˆ","æ¥å—è€…","ã€","and","ç­‰å¾…","range","<","v","ä¸€ä»½","ç­‰","len","å£°æ˜","æˆ–è€…","äº†","å®Œå","type","é€šè¿‡","æœª","immutable","è¯¥","ç¼“å†²","å…¶ä¸­","goroutine","a",";","é£é™©","åˆ›å»º","æ¢å¥è¯","æ˜¾å¼","receive","strings","äº¤æµ","é€ç»™","æ„å‘³","map","end","ç»§ç»­","æ‰€æœ‰","int","ä¼š","åŒæ­¥","ä¸€ä¸ª","ç¡®ä¿","length","æ„å‘³ç€","(","float64","ä¸€ç§","äº’ç›¸","}","å…³é—­","éœ€è¦","å°±ç»ª","ä¸­","nil","å¤§å°","ç›´åˆ°","how","è¢«","\"","å€¼ä¼š","asdjjak","func","myfunc","åˆ™","åŒä¸€æ—¶","the","goroutines","çœŸ","æ„å¤–","close","è¿™ä¸ª","ç”¨","å…³é”®å­—"],"title":"channel","title_tokens":["channel"]},{"location":"Golang/Basic/01 Channel/#channel","text":"","text_tokens":[],"title":"channel","title_tokens":["channel"]},{"location":"Golang/Basic/01 Channel/#what-is-channel","text":"channelæ˜¯goroutineå’Œgoroutineä¹‹é—´æ— é”äº¤æµçš„ã€åª’ä»‹ã€‘ï¼Œæ¢å¥è¯è¯´ï¼Œchannelæ˜¯ä¸€ç§å…è®¸ä¸€ä¸ªgoroutineå‘é€æ•°æ®ç»™å¦å¤–ä¸€ä¸ªgoroutineçš„æŠ€æœ¯ï¼Œé»˜è®¤çš„channelæ˜¯åŒå‘çš„ï¼Œæ„å‘³ç€goroutineså¯ä»¥é€šè¿‡åŒä¸€ä¸ªchannelå‘ã€æ”¶æ•°æ®ã€‚","text_tokens":["ã€‘","æ•°æ®","æ¢å¥","é€šè¿‡","å¯ä»¥","goroutine","å’Œ","æ¢å¥è¯","çš„","ã€","äº¤æµ","æ„å‘³","å‘é€æ•°æ®","ä¸€ä¸ª","é»˜è®¤","ç»™","å‘","æ„å‘³ç€","æ˜¯","ï¼Œ","å¦å¤–","ä¸€ç§","åŒä¸€","åŒä¸€ä¸ª","æ”¶","ä¹‹é—´","ã€‚","æ¢å¥è¯è¯´","æ— é”","å…è®¸","åª’ä»‹","æŠ€æœ¯","channel","ã€","åŒå‘","goroutines","å‘é€"],"title":"what is channel","title_tokens":["is"," ","what","channel"]},{"location":"Golang/Basic/01 Channel/#how","text":"syntax var Channel_name chan Type channel_name := make(chan Type) åœ¨golangä¸­, æˆ‘ä»¬ç”¨å…³é”®å­— Channel_name chan Type åˆ›å»ºæŸç§ç±»å‹çš„channelï¼Œå…¶ä¸­channelä»…ä»…å¯ä»¥ä¼ é€’åŒç§ç±»å‹çš„æ•°æ®ï¼Œä¸åŒç±»å‹çš„æ•°æ®ä¸å¯ä»¥é€šè¿‡ä¸€ä¸ªç±»å‹çš„channelä¼ é€’ã€‚","text_tokens":["golang","chan","æ•°æ®","ä»…ä»…","type","æŸç§","_","å¯ä»¥","ä¸","é€šè¿‡","å…¶ä¸­",",","name",":","åˆ›å»º","çš„","ç±»å‹","åœ¨","ä¸åŒ","var","ä¸€ä¸ª","=","(","make","ï¼Œ"," ","å…³é”®","ä¼ é€’","ã€‚","åŒç§","ä¸­","æˆ‘ä»¬",")","channel","syntax","ç”¨","å…³é”®å­—"],"title":"how","title_tokens":["how"]},{"location":"Golang/Basic/01 Channel/#send-and-receive-data-from-a-channel","text":"åœ¨golangä¸­ï¼Œchannelä¸»è¦æœ‰ä¸¤ä¸ªæ“ä½œï¼Œä¸€ä¸ªæ˜¯ sending ï¼Œä¸€ä¸ªæ˜¯ receiving ï¼Œè¿™ä¸¤ç§æ“ä½œè¢«ç§°ä¸ºé€šè®¯ã€‚ <- ç®­å¤´çš„æ–¹å‘è¡¨æ˜æ˜¯å‘é€æ•°æ®è¿˜æ˜¯æ¥å—æ•°æ®ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œchannelä¸­çš„å‘é€ã€æ¥å—æ“ä½œå—ã€ç›´åˆ°å¦ä¸€ç«¯æœªå°±ç»ªã€‘ ï¼Œå…è®¸goroutineä¹‹é—´åœ¨æ²¡æœ‰æ˜¾å¼é”æˆ–è€…æ¡ä»¶å˜é‡çš„æ—¶å€™äº’ç›¸åŒæ­¥ å‘é€æ“ä½œï¼šåœ¨channelçš„å¸®åŠ©ä¸‹ç”¨æ¥å°†goroutineçš„æ•°æ®å‘é€ç»™å¦å¤–ä¸€ä¸ªgoroutineï¼Œé€šè¿‡channelå‘é€ float64 ï¼Œ int ï¼Œ bool æ˜¯å®‰å…¨åˆ‡å®¹æ˜“çš„ï¼Œå› ä¸ºè¿™äº›å€¼ä¼šè¢« æ‹·è´ ä¸€ä»½ï¼Œä¸ä¼šæœ‰æ„å¤–å¹¶å‘çš„é£é™©ï¼ŒåŒæ ·çš„ï¼Œ strings ç±»å‹ä¹Ÿæ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºå®ƒæ˜¯ immutableï¼ˆä¸å¯æ›´æ”¹ï¼‰ ã€‚åœ¨å‘é€ pointers æˆ–è€… slice ï¼Œ map ç­‰å¼•ç”¨çš„æ—¶å€™ï¼Œchannelæ˜¯ä¸å®‰å…¨çš„ï¼Œå› ä¸ºæŒ‡é’ˆæˆ–è€…å¼•ç”¨ä¼šè¢«å‘é€è€…æˆ–è€…æ¥æ”¶è€…åœ¨åŒä¸€æ—¶é—´ä¿®æ”¹ï¼Œç»“æœæ˜¯ä¸å¯é¢„çŸ¥çš„ï¼Œå› æ­¤éœ€è¦==ç¡®ä¿åªæœ‰ä¸€ä¸ªgoroutineèƒ½å¤Ÿè®¿é—®== Mychannel <- element è¡¨æ˜äº†æ•°æ®ï¼ˆelementï¼‰å‘é€ç»™äº†Mychannel æ¥å—æ“ä½œï¼š element := <- Mychannel package main import \"fmt\" func main () { fmt . Println ( \"starting Main method\" ) ch := make ( chan int ) go myfunc ( ch ) ch <- 23 fmt . Println ( \"End Main method\" ) } func myfunc ( ch chan int ) { fmt . Println ( 234 + <- ch ) }","text_tokens":["æ•°æ®","ä¸‹","ç»“æœ","æ¡ä»¶","å‘é€è€…","é¢„çŸ¥","ä¸","æ—¶å€™",":","package","+","23","åœ¨","é»˜è®¤","ï¼š","ï¼‰","å¸®åŠ©","import","make","é”","æ¥å—"," ","ä¸ä¼š","è¿™äº›","ç§°ä¸º","å˜é‡","æ—¶é—´","bool","channel","ä¸€ç«¯","golang","ã€‘","è¿˜æ˜¯","å®¹æ˜“","starting","å¼•ç”¨",".","234","ä¿®æ”¹","åˆ‡","å—","çš„","å¦ä¸€ç«¯","èƒ½å¤Ÿ","è®¿é—®","ch","å‘é€æ•°æ®","method","ä¹Ÿ","æ˜¯","å¹¶å‘","åŒæ ·","println","{","ã€‚","å®‰å…¨","mychannel","æƒ…å†µ","æ“ä½œ","æ›´æ”¹","ä¸€æ—¶é—´","ç”¨æ¥","receiving",")","æ‹·è´","æœ‰","å‘é€ç»™","å®ƒ","é€šè®¯","å‘é€","slice","æŒ‡é’ˆ","chan","element","fmt","ä¸»è¦","pointers","æ–¹å‘","æ¥æ”¶è€…","ã€","sending","ç®­å¤´","ç±»å‹","è¿™","-","=","å°†","ï¼Œ","å¦å¤–","åŒä¸€","åŒä¸€æ—¶é—´","æ²¡æœ‰","ä¹‹é—´","å› æ­¤","æ¥æ”¶","go","å› ä¸º","ä¸¤ä¸ª","è¡¨æ˜","ä¸€æ—¶","ä¸¤ç§","åªæœ‰","ä¸å¯","å…è®¸","ï¼ˆ","ã€","<","ä¸€ä»½","ç­‰","æˆ–è€…","äº†","æœª","é€šè¿‡","immutable","goroutine","é£é™©","strings","æ˜¾å¼","map","end","é€ç»™","int","ä¼š","åŒæ­¥","ä¸€ä¸ª","ç¡®ä¿","(","float64","äº’ç›¸","}","éœ€è¦","å°±ç»ª","ä¸­","ç›´åˆ°","è¢«","\"","å€¼ä¼š","func","myfunc","åŒä¸€æ—¶","æ„å¤–","main"],"title":"Send and Receive Data From a Channel","title_tokens":["a","receive","from"," ","channel","and","send","data"]},{"location":"Golang/Basic/01 Channel/#closing-a-channel","text":"close() è¿™æ˜¯ä¸€ä¸ªå†…ç½®å‡½æ•°ï¼Œè®¾äº†ä¸€ä¸ªè¡¨ç¤ºè¡¨æ˜ä¸ä¼šå†æœ‰å€¼å‘é€ç»™è¯¥channelã€‚ ele, ok = <- Mychannel é€šè¿‡å¾ªç¯ï¼Œæ¥å—è€…ä¼šæ£€æŸ¥è¯¥channelæ˜¯æ‰“å¼€çš„è¿˜æ˜¯å…³é—­çš„ï¼Œå¦‚æœokæ˜¯çœŸï¼Œåˆ™æ„å‘³ç€è¯¥channelæ˜¯æ‰“å¼€çš„ã€‚ package main import \"fmt\" func main () { c := make ( chan string ) // è°ƒç”¨goroutine go myFunc ( c ) for { res , ok := <- c if ok == false { fmt . Println ( \"Channel Close\" , ok ) break } fmt . Println ( \"Channel Open\" , res , ok ) } } func myFunc ( mychnl chan string ) { for v := 0 ; v < 4 ; v ++ { mychnl <- \"GeeksforGeeks\" } close ( mychnl ) }","text_tokens":[",",":","package","4","import","make","æ¥å—","geeksforgeeks"," ","ä¸ä¼š","å†æœ‰","c","channel","++","è¿˜æ˜¯","open","res",".","çš„","ok","ele","æ˜¯","false","println","{","if","ã€‚","è¿™æ˜¯","å€¼","mychannel","æ£€æŸ¥","break","0",")","å¾ªç¯","å‘é€ç»™","å‘é€","è®¾","æ‰“å¼€","chan","å¦‚æœ","fmt","string","å—è€…","è¡¨ç¤º","mychnl","for","-","=","/","ï¼Œ","è°ƒç”¨","go","è¡¨æ˜","å‡½æ•°","å†…ç½®","æ¥å—è€…","<","v","äº†","é€šè¿‡","è¯¥","goroutine",";","é€ç»™","æ„å‘³","ä¼š","ä¸€ä¸ª","æ„å‘³ç€","(","å…³é—­","}","\"","func","myfunc","åˆ™","çœŸ","close","main"],"title":"Closing a Channel","title_tokens":["a"," ","channel","closing"]},{"location":"Golang/Basic/01 Channel/#blocking-send-and-receive","text":"åœ¨channelä¸­ï¼Œå½“æ•°æ®å‘é€ç»™ä¸€ä¸ªchannelï¼Œç›´åˆ°å¦å¤–çš„goroutineè¯»å–è¿™ä¸ªchannelå‰ï¼Œå‘é€çš„å£°æ˜æ˜¯è¢«é˜»å¡çš„ï¼ˆå‘é€å®Œåå¿…é¡»ç­‰å¾…è¯¥ä¿¡æ¯è¢«è¯»å–æ‰èƒ½å¤Ÿç»§ç»­å‘é€ï¼‰ã€‚åŒæ ·çš„ï¼Œå½“ä¸€ä¸ªchannelæ¥å—æ•°æ®çš„æ—¶å€™åœ¨æ¥æ”¶åˆ°æ•°æ®å‰éƒ½æ˜¯è¢«é˜»å¡çš„ã€‚ channelä¸­çš„é›¶å€¼æ˜¯ nil ã€‚ for å¾ªç¯å¯ä»¥è¿­ä»£channelä¸­æ‰€æœ‰è¿ç»­çš„å€¼ï¼Œç›´åˆ°è¯¥channelã€‚ package main import \"fmt\" func main () { mychnl := make ( chan string ) go func () { mychnl <- \"GFG\" mychnl <- \"ABC\" mychnl <- \"ASDJH\" mychnl <- \"asdjjak\" close ( mychnl ) }() for res := range mychnl { fmt . Println ( res ) } }","text_tokens":["<","æ•°æ®","chan","abc","å£°æ˜","fmt","è¯»å–","æ‰","ä¿¡æ¯","res",".","å®Œå","string","å¯ä»¥","è¯¥","goroutine","ç»§ç»­","æ—¶å€™","é›¶å€¼","mychnl",":","è¿ç»­","çš„","for","é€ç»™","èƒ½å¤Ÿ","è¿­ä»£","ç­‰å¾…","æ‰€æœ‰","package","åœ¨","å¿…é¡»","ä¸€ä¸ª","ï¼‰","éƒ½","-","æ˜¯","import","(","é˜»å¡","åŒæ ·","=","asdjh","make","println","åˆ°","ï¼Œ","å¦å¤–","æ¥å—","}","{"," ","æ¥æ”¶","go","ã€‚","å€¼","gfg","ä¸­","nil","å½“","ç›´åˆ°","è¢«","\"","asdjjak","func","å¾ªç¯",")","å‰","ï¼ˆ","channel","å‘é€ç»™","å‘é€","close","è¿™ä¸ª","main","range"],"title":"Blocking Send and Receive","title_tokens":["receive"," ","blocking","and","send"]},{"location":"Golang/Basic/01 Channel/#length-of-the-channel","text":"len() è¡¨æ˜åœ¨channelç¼“å†²åŒºä¸­==å€¼çš„æ•°é‡== package main import \"fmt\" func main () { mychnl := make ( chan string , 4 ) mychnl <- \"GFG\" mychnl <- \"ABC\" mychnl <- \"ASDJH\" mychnl <- \"asdjjak\" fmt . Println ( \"Length of the channel is:\" , len ( mychnl )) }","text_tokens":["<","chan","abc","len","fmt",".","ç¼“å†²åŒº","string","æ•°é‡",",","is","mychnl",":","çš„","package","4","åœ¨","length","-","import","=","(","asdjh","println","make","}","{","of"," ","å€¼","gfg","è¡¨æ˜","ä¸­","\"","asdjjak","func",")","the","channel","main","ç¼“å†²"],"title":"Length of the Channel","title_tokens":["of"," ","channel","the","length"]},{"location":"Golang/Basic/01 Channel/#capacity-of-the-channel","text":"cap() è¡¨æ˜channelç¼“å†²åŒºçš„å¤§å° package main import \"fmt\" func main () { mychnl := make ( chan string , 8 ) mychnl <- \"GFG\" mychnl <- \"ABC\" mychnl <- \"ASDJH\" fmt . Println ( \"Capacity of the channel is:\" , cap ( mychnl )) }","text_tokens":["cap","<","chan","8","abc","fmt",".","ç¼“å†²åŒº","string",",","is","mychnl",":","çš„","package","-","import","=","(","asdjh","println","make","}","{","of"," ","gfg","è¡¨æ˜","å¤§å°","capacity","\"","func",")","the","channel","main","ç¼“å†²"],"title":"Capacity of the Channel","title_tokens":["capacity","of"," ","channel","the"]},{"location":"Golang/Basic/02 UseDelveDebug/","text":"ä½¿ç”¨delveè°ƒè¯•Golang å®‰è£… vscodeä¸­, é€šè¿‡ ctrl+shift+p è¿è¡Œ Go: Install/Update Tools ,é€‰æ‹© dlv å®‰è£… go get -u github.com/go-delve/delve/cmd/dlv ä½¿ç”¨ vscode åœ¨vscodeä¸­æŒ‰F5, å¼¹å‡º launch.json æ–‡ä»¶, é…ç½® { // Use IntelliSense to learn about possible attributes. // Hover to view descriptions of existing attributes. // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387 \"version\" : \"0.2.0\" , \"configurations\" : [ { \"name\" : \"Launch\" , \"type\" : \"go\" , \"request\" : \"launch\" , \"mode\" : \"debug\" , // auto \"program\" : \"${fileDirname}\" , \"env\" : { \"GOPATH\" : \"d:/workspace/go space/go\" }, \"args\" : [] } ] } å‘½ä»¤è¡Œdebug package main import ( \"net/http\" \"github.com/gin-gonic/gin\" ) func HelloHandler ( c * gin . Context ) { firstname := c . DefaultQuery ( \"firstname\" , \"Guest\" ) lastname := c . Query ( \"lastname\" ) c . String ( http . StatusOK , \"Hello %s %s\" , firstname , lastname ) } func main () { router := gin . Default () router . GET ( \"/welcome\" , HelloHandler ) router . Run ( \":8000\" ) } 1. è¿›å…¥è¦debugçš„æ–‡ä»¶ç›®å½• cd ../main.go dlv debug main.go // debug b HelloHandler // break point c // continue n // next s // step in p value // print value stepout // step out function st => start : Start : > http : // www . google . com [ blank ] e => end : > http : // www . google . com op1 => operation : My Operation sub1 => subroutine : My Subroutine cond => condition : Yes or No ?: > http : // www . google . com io => inputoutput : catch something ... st -> op1 -> cond cond ( yes ) -> io -> e cond ( no ) -> sub1 ( right ) -> op1 Title : Here is a title A -> B : Normal line B --> C : Dashed line C ->> D : Open arrow D -->> A : Dashed open arrow","text_tokens":["learn","mode","default","è¿›å…¥","title","æŒ‰","å‡º","è°ƒè¯•","http","f5","version",",","descriptions","cd","operation",":","name","830387","dashed","delve","package","+","...","more","åœ¨","inputoutput","cond","import","cmd","out","here","existing","env","space"," ","context","point","c","d","gin","install",">","e","arrow","net","linkid","guest","next","é€‰æ‹©","?","io","catch","golang","gopath","open","ctrl",".","launch","args","something","condition","get","program","is","$","continue","çš„","op1","filedirname","å®‰è£…","microsoft","attributes","debug","fwlink","0.2","welcome","{","to","stepout","b","request","firstname","æ–‡ä»¶ç›®å½•","break","information","value","my","0","yes","github","s",")","å‘½ä»¤è¡Œ","vscode","hello","www","start","router","run","u","string","function","or","for","è¦","defaultquery","use","dlv","]","google","no","-","=","/","st","visit","blank","of","workspace","go","right","sub1","update","hellohandler","ä½¿ç”¨","configurations","in","æ–‡ä»¶","com","é…ç½®","*","tools","about","step","json","1","type","é€šè¿‡","ç›®å½•","subroutine","a","end","8000","line","lastname","print","n","..","shift","å¼¹","(","å‘½ä»¤","hover","%","}","normal","https","auto","p","gonic","ä¸­","view","\"","possible","è¿è¡Œ","func","query","intellisense","[","main","statusok"],"title":"ä½¿ç”¨delveè°ƒè¯•Golang","title_tokens":["delve","è°ƒè¯•","ä½¿ç”¨","golang"]},{"location":"Golang/Basic/02 UseDelveDebug/#delvegolang","text":"","text_tokens":[],"title":"ä½¿ç”¨delveè°ƒè¯•Golang","title_tokens":["delve","è°ƒè¯•","ä½¿ç”¨","golang"]},{"location":"Golang/Basic/02 UseDelveDebug/#_1","text":"vscodeä¸­, é€šè¿‡ ctrl+shift+p è¿è¡Œ Go: Install/Update Tools ,é€‰æ‹© dlv å®‰è£… go get -u github.com/go-delve/delve/cmd/dlv","text_tokens":["ctrl","tools",".","u","é€šè¿‡","get",",",":","delve","+","dlv","shift","å®‰è£…","-","cmd","/"," ","go","update","p","ä¸­","install","github","è¿è¡Œ","com","vscode","é€‰æ‹©"],"title":"å®‰è£…","title_tokens":["å®‰è£…"]},{"location":"Golang/Basic/02 UseDelveDebug/#_2","text":"","text_tokens":[],"title":"ä½¿ç”¨","title_tokens":["ä½¿ç”¨"]},{"location":"Golang/Basic/02 UseDelveDebug/#vscode","text":"åœ¨vscodeä¸­æŒ‰F5, å¼¹å‡º launch.json æ–‡ä»¶, é…ç½® { // Use IntelliSense to learn about possible attributes. // Hover to view descriptions of existing attributes. // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387 \"version\" : \"0.2.0\" , \"configurations\" : [ { \"name\" : \"Launch\" , \"type\" : \"go\" , \"request\" : \"launch\" , \"mode\" : \"debug\" , // auto \"program\" : \"${fileDirname}\" , \"env\" : { \"GOPATH\" : \"d:/workspace/go space/go\" }, \"args\" : [] } ] }","text_tokens":["learn","mode","gopath","space","æŒ‰","å‡º",".","launch","about","json","type","args","program","f5","version",",","descriptions",":","name","830387","$","for","more","åœ¨","use","[","filedirname","]","microsoft","attributes","å¼¹","debug","fwlink","=","/","0.2","existing","visit","hover","env","}","{","to"," ","of","go","workspace","request","https","auto","ä¸­","d","information","configurations","view","æ–‡ä»¶","0","\"","possible","é…ç½®","intellisense","com","vscode","linkid","?"],"title":"vscode","title_tokens":["vscode"]},{"location":"Golang/Basic/02 UseDelveDebug/#debug","text":"package main import ( \"net/http\" \"github.com/gin-gonic/gin\" ) func HelloHandler ( c * gin . Context ) { firstname := c . DefaultQuery ( \"firstname\" , \"Guest\" ) lastname := c . Query ( \"lastname\" ) c . String ( http . StatusOK , \"Hello %s %s\" , firstname , lastname ) } func main () { router := gin . Default () router . GET ( \"/welcome\" , HelloHandler ) router . Run ( \":8000\" ) } 1. è¿›å…¥è¦debugçš„æ–‡ä»¶ç›®å½• cd ../main.go dlv debug main.go // debug b HelloHandler // break point c // continue n // next s // step in p value // print value stepout // step out function st => start : Start : > http : // www . google . com [ blank ] e => end : > http : // www . google . com op1 => operation : My Operation sub1 => subroutine : My Subroutine cond => condition : Yes or No ?: > http : // www . google . com io => inputoutput : catch something ... st -> op1 -> cond cond ( yes ) -> io -> e cond ( no ) -> sub1 ( right ) -> op1 Title : Here is a title A -> B : Normal line B --> C : Dashed line C ->> D : Open arrow D -->> A : Dashed open arrow","text_tokens":["default","è¿›å…¥","title","http","operation",",","cd","dashed",":","package","...","inputoutput","cond","import","out","here"," ","context","point","c","gin",">","e","d","arrow","net","guest","next","io","?","catch","open",".","something","condition","get","is","continue","çš„","op1","debug","welcome","{","stepout","b","firstname","æ–‡ä»¶ç›®å½•","break","value","my","yes","github","s",")","www","hello","start","router","run","string","function","or","è¦","defaultquery","dlv","]","google","no","-","=","/","st","blank","go","right","sub1","hellohandler","in","æ–‡ä»¶","com","*","step","1","ç›®å½•","subroutine","a","end","8000","line","lastname","print","n","..","(","%","}","normal","gonic","p","\"","func","query","[","main","statusok"],"title":"å‘½ä»¤è¡Œdebug","title_tokens":["å‘½ä»¤è¡Œ","debug","å‘½ä»¤"]},{"location":"Golang/ErrorCollect/20191127ï¼šCannot fint main module[gomod]/","text":"20191127ï¼šCannot fint the main module[gomod] ç¯å¢ƒ åœ¨å°è¯•vscodeçš„debugä¸­è¾“å‡ºäº† go: cannot find main module; see 'go help modules' åŸå›  & è§£å†³ æ ¹ç›®å½•ä¸‹æ²¡æœ‰ go.mod æ–‡ä»¶, éœ€è¦ go mod init åˆå§‹åŒ–å»ºç«‹ç›¸å…³ .mod æ–‡ä»¶;æˆ–è€…å°†ç¯å¢ƒå˜é‡ä¸­çš„ GO111MODULE=AUTO/OFF","text_tokens":["go111module","ä¸‹",".","fint","æˆ–è€…","ç¯å¢ƒå˜é‡","äº†","åŸå› ","off","ç›®å½•",",",";","init",":","ç¯å¢ƒ","çš„","modules","è¾“å‡º","'","åœ¨","ç¯å¢ƒå˜","ç›¸å…³","]","ï¼š","è§£å†³","debug","=","/","gomod","å°†","æ ¹ç›®å½•","æ²¡æœ‰"," ","å°è¯•","go","åˆå§‹","éœ€è¦","åˆå§‹åŒ–","auto","ä¸­","mod","20191127","module","find","æ–‡ä»¶","å˜é‡","cannot","the","help","vscode","å»ºç«‹","&","[","see","main"],"title":"20191127ï¼šCannot fint the main module[gomod]","title_tokens":["20191127","module","gomod","fint"," ","cannot","the","]","[","ï¼š","main"]},{"location":"Golang/ErrorCollect/20191127ï¼šCannot fint main module[gomod]/#20191127cannot-fint-the-main-modulegomod","text":"","text_tokens":[],"title":"20191127ï¼šCannot fint the main module[gomod]","title_tokens":["20191127","module","gomod","fint"," ","cannot","the","]","[","ï¼š","main"]},{"location":"Golang/ErrorCollect/20191127ï¼šCannot fint main module[gomod]/#_1","text":"åœ¨å°è¯•vscodeçš„debugä¸­è¾“å‡ºäº† go: cannot find main module; see 'go help modules'","text_tokens":["äº†",";",":","çš„","modules","è¾“å‡º","'","åœ¨","debug"," ","å°è¯•","go","ä¸­","module","find","cannot","help","vscode","see","main"],"title":"ç¯å¢ƒ","title_tokens":["ç¯å¢ƒ"]},{"location":"Golang/ErrorCollect/20191127ï¼šCannot fint main module[gomod]/#_2","text":"æ ¹ç›®å½•ä¸‹æ²¡æœ‰ go.mod æ–‡ä»¶, éœ€è¦ go mod init åˆå§‹åŒ–å»ºç«‹ç›¸å…³ .mod æ–‡ä»¶;æˆ–è€…å°†ç¯å¢ƒå˜é‡ä¸­çš„ GO111MODULE=AUTO/OFF","text_tokens":["go111module","ä¸‹",".","off","æˆ–è€…","ç¯å¢ƒå˜é‡","ç›®å½•",",",";","init","ç¯å¢ƒ","çš„","ç›¸å…³","=","/","å°†","æ ¹ç›®å½•","æ²¡æœ‰"," ","go","åˆå§‹","åˆå§‹åŒ–","éœ€è¦","auto","ä¸­","mod","æ–‡ä»¶","å˜é‡","å»ºç«‹","ç¯å¢ƒå˜"],"title":"åŸå›  &amp; è§£å†³","title_tokens":[";","amp"," ","åŸå› ","&","è§£å†³"]},{"location":"Golang/Go-Web/01 HTTPServe/","text":"01ï¼šå»ºç«‹HTTPæœåŠ¡å™¨çš„å¤šç§æ–¹æ³• å»ºç«‹æœåŠ¡å™¨ package mian import ( \"log\" \"net/http\" ) func main () { http . HadnleFunc ( \"/\" , func ( w http . ResponseWriter , r * http . Request ) { w . Write ([] byte ( \"hello world\" ) } log . Println ( \"starting HTTP server..\" ) log . Fatal ( http . ListenAndServe ( \":8000\" , nil )) } http.HandleFunc(pattern string, handler func(ResponseWriter, *Request) æ ¹æ®ä¸€ä¸ª==è·¯ç”±è§„åˆ™==ç»‘å®šä¸€ä¸ªæ‰§è¡Œå‡½æ•°, å½“ç”¨æˆ·è®¿é—®åˆ°æŒ‡å®šè·¯ç”±æ—¶æ‰§è¡Œ. http.HandleFunc çš„ç¬¬äºŒä¸ªå‚æ•°å¿…é¡»ç¬¦åˆå‡½æ•°ç­¾å func(http.ResponseWriter, *http.Request) , ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¯·æ±‚æ‰€å¯¹åº”çš„å“åº”å¯¹è±¡ http.ResponseWriter ,åŒ…å«å“åº”ç ã€å“åº”å¤´å’Œå“åº”ä½“, åœ¨è¿™é‡Œé€šè¿‡è°ƒç”¨ å“åº”å¯¹è±¡ çš„ Write æ–¹æ³•åƒå“åº”ä½“å†™å…¥å­—ç¬¦ä¸². ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¯·æ±‚æ‰€å¯¹åº”çš„è¯·æ±‚å¯¹è±¡ *http.Request ,åŒ…å«è¯·æ±‚å¤´ã€è¯·æ±‚ä½“ç­‰. http.ListenAndServe å¯åŠ¨HTTPæœåŠ¡å™¨,ç›‘å¬ æŒ‡å®šåœ°å€ å’Œ ç«¯å£å· çš„HTTPè¯·æ±‚ http.HandleFunc å°†ä¼ å…¥çš„ ç»‘å®šå‡½æ•° è½¬æ¢ä¸ºç±»å‹ http.HandleFunc (ä¸€ä¸ªHTTPè¯·æ±‚å¤„ç†å™¨å¯¹è±¡),è¯¥å¯¹è±¡ç±»å‹å®ç° http.Handler æ¥å£,æ¥å£æ–¹æ³•è°ƒç”¨è‡ªå·± // net / http / server . go // The HandlerFunc type is an adapter to allow the use of // ordinary functions as HTTP handlers . If f is a function // with the appropriate signature , HandlerFunc ( f ) is a // Handler that calls f . type HandlerFunc func ( ResponseWriter , * Request ) // ServeHTTP calls f ( w , r ) . func ( f HandlerFunc ) ServeHTTP ( w ResponseWriter , r * Request ) { f ( w , r ) } è‡ªå®šä¹‰Handler package main import ( \"log\" \"net/http\" ) type customHandler {} // å°†ServeHTTPæ–¹æ³•ç»‘å®šåˆ°customHandlerä¸Š func ( _ * customHandler ) ServeHTTP ( w http . ResponseWriter , r * http . Request ){ w . Write ([] byte ( \"hello custom Handler\" ) } func main () { http . Handle ( \"/\" , & cutsomerHandler {}) log . Println ( \"starting HTTP server...\" ) log . Fatl ( http . ListenAndServe ( \":8000\" , nil )) } è‡ªå®šä¹‰ç±»å‹ type customHandler{} ç±»å‹ç»‘å®š ServerHTTP(w http.ResponseWriter, r *http.Request) æ–¹æ³• http.Handle è°ƒç”¨, é€šè¿‡ &customHandler{} ä¼ å…¥è¯¥è‡ªå®šä¹‰ç±»å‹çš„åœ°å€ å°‘äº†å°†ç»‘å®šå‡½æ•°è½¬æ¢ä¸º type HandleFunc çš„æ­¥éª¤ æœåŠ¡å¤ç”¨å™¨(ServeMux) // ListenAndServe listens on the TCP network address addr and then calls // Serve with handler to handle requests on incoming connections. // Accepted connections are configured to enable TCP keep-alives. // // The handler is typically nil, in which case the DefaultServeMux is used. // // ListenAndServe always returns a non-nil error. func ListenAndServe ( addr string , handler Handler ) error { server := & Server { Addr : addr , Handler : handler } return server . ListenAndServe () } //*****************************// type Handler interface { ServeHTTP ( ResponseWriter , * Request ) } 1. å®ä¾‹ä¸­ http.ListenAndServe çš„nilæ›¿ä»£äº†å®ç°äº† http.Handler æ¥å£çš„å¯¹è±¡ 2. http.Handler å®ç° ServeHTTP æ¥å£ 3. ç¼ºé™· è¯¥æ–¹æ³•ä¸èƒ½åƒä¹‹å‰è°ƒç”¨çš„ http.HandleFunc å’Œ http.Handle ä¸ºä¸åŒè·¯ç”±è§„åˆ™ç»‘å®šä¸åŒçš„å‡½æ•°å¤„ç† package main import ( \"log\" \"net/http\" ) type customHandler struct {} func ( _ * customHandler ) ServeHTTP ( w http . ResponseWriter , r * http . Request ) { w . Write ([] byte ( \"hello custom server mux's ServeHTTP\" )) } func main () { log . Println ( \"starting HTTP server... \" ) log . Fatal ( http . ListenAndServe ( \":8000\" , & customHandler {})) } è‡ªå®šä¹‰Serve Mux // HandleFunc registers the handler function for the given pattern // in the DefaultServeMux. // The documentation for ServeMux explains how patterns are matched. func HandleFunc ( pattern string , handler func ( ResponseWriter , * Request )) { DefaultServeMux . HandleFunc ( pattern , handler ) } //*****************************// // DefaultServeMux is the default ServeMux used by Serve. var DefaultServeMux = & defaultServeMux var defaultServeMux ServeMux //*****************************// type ServeMux struct { mu sync . RWMutex m map [ string ] muxEntry es [] muxEntry // slice of entries sorted from longest to shortest. hosts bool // whether any patterns contain hostnames } handle.Handle è°ƒç”¨ DefaultServeMux ,è¯¥ DefaultMux æ˜¯ http.ServeMux çš„å°è£… http.ServeMux å¸¦æœ‰åŸºæœ¬è·¯ç”±åŠŸèƒ½çš„æœåŠ¡å¤ç”¨å™¨(Serve Multiplexer) é€šè¿‡ http.NewServeMux æ“ä½œ http.ServeMux å¯¹è±¡, è°ƒç”¨ http.NewServeMux çš„ .Handle æ–¹æ³• package main import ( \"log\" \"net/http\" ) type customHandler struct {} func ( _ * customHandler ) ServeHTTP ( w http . ResponseWriter , r * http . Request ) { w . Write ([] byte ( \"hello new custom server mux\" )) } func main () { mux := http . NewServeMux () mux . Handle ( \"/\" , & customHandler {}) log . Println ( \"starting HTTP serve...\" ) log . Fatal ( http . ListenAndServe ( \":8000\" , mux )) } æœåŠ¡å™¨å¯¹è±¡(Server) func ListenAndServe ( addr string , handler Handler ) error { server := & Server { Addr : addr , Handler : handler } return server . ListenAndServe () } //***************************// type Server struct { Addr string Handler Handler ... } è‡ªå®šä¹‰server1 è°ƒç”¨ http.ListenAndServe çš„æ—¶å€™åˆ›å»ºäº†å¦ä¸€ä¸ª http.Serve å¯¹è±¡ package main import ( \"log\" \"net/http\" ) type customHandler struct {} func ( _ * customHandler ) ServeHTTP ( w http . ResponseWriter , r * http . Request ) { w . Write ([] byte ( \"hello custom server mux\" )) } func main () { mux := http . NewServeMux () mux . Handle ( \"/\" , & customHandler {}) serve := & http . Server { Addr : \":8000\" , Handler : mux , } log . Println ( \"starting HTTP serve...\" ) log . Fatal ( serve . ListenAndServe ()) } è‡ªå®šä¹‰server2 // custome server 2 package main import ( \"log\" \"net/http\" \"time\" ) type customHandler struct {} func ( _ * customHandler ) ServeHTTP ( w http . ResponseWriter , r * http . Request ) { w . Write ([] byte ( \"hello custom server mux2\" )) } func main () { mux := http . NewServeMux () mux . Handle ( \"/\" , & customHandler {}) mux . HandleFunc ( \"/timeout\" , func ( w http . ResponseWriter , r * http . Request ) { // è¶…æ—¶ time . Sleep ( 2 * time . Second ) w . Write ([] byte ( \"Timeout\" )) }) server := & http . Server { Addr : \":8000\" , Handler : mux , WriteTimeout : 2 * time . Second , } log . Println ( \"starting HTTP server...\" ) log . Fatal ( server . ListenAndServe ()) } 1. æ— æ³•è®¿é—®åˆ° localhost:8000/timeout 2. æ‰§è¡Œå‡½æ•°ä¼‘çœ 2ç§’, è¢« http.Serve å¯¹è±¡è®¤ä¸ºå·²ç»è¶…æ—¶,æå‰å…³é—­ä¸å®¢æˆ·ç«¯ä¹‹é—´çš„è¿æ¥, åé¢æ— æ³•åƒå“åº”ä½“å†™å…¥ä»»ä½•ä¿¡æ¯ ä¼˜é›…åœ°åœæ­¢æœåŠ¡ é€šè¿‡æ•æ‰ç³»ç»Ÿä¿¡å·(Signal)ã€goroutineå’Œé€šé“(Channel)å®ç° æ•æ‰ os.Interrupt ä¿¡å·(ctrl+c)ç„¶åè°ƒç”¨ server.Shutdown æ–¹æ³•gå‘ŠçŸ¥æœåŠ¡å™¨åœæ­¢æ¥å—æ–°è¯·æ±‚ http.ErrServerClosed æ ¹æ®è¯¥é”™è¯¯ç±»å‹åˆ¤æ–­æœåŠ¡å™¨æ˜¯å¦æ­£å¸¸å…³é—­ package main import ( \"context\" \"log\" \"net/http\" \"os\" \"os/signal\" ) type customHandler struct {} func ( _ * customHandler ) ServeHTTP ( w http . ResponseWriter , r * http . Request ) { w . Write ([] byte ( \"hello custom server mux2\" )) } func main () { mux := http . NewServeMux () mux . Handle ( \"/\" , & customHandler {}) server := & http . Server { Addr : \":8000\" , Handler : mux , } // åˆ›å»ºç³»ç»Ÿä¿¡å·æ¥æ”¶å™¨ quit := make ( chan os . Signal ) signal . Notify ( quit , os . Interrupt ) go func () { <- quit if err := server . Shutdown ( context . Background ()); err != nil { log . Fatal ( \"Shutdown server:\" , err ) } }() log . Println ( \"start HTTP server...\" ) err := server . ListenAndServe () if err != nil { if err == http . ErrServerClosed { log . Print ( \"Server Closed under request\" ) } else { log . Fatal ( \"Server closed unexpected\" ) } } }","text_tokens":["default","serve","_","ä¹‹å‰","errserverclosed","handlerfunc","...","è®¤ä¸º","å¿…é¡»","åœ°","import","æ¥å—"," ","listenandserve","fatl","server2","å®šä¹‰","longest","signature","åƒ","ctrl",".","functions","incoming","is","è½¬æ¢","ä¸","æ˜¯","server","that","println","é€šé“","quit","å†™å…¥","ç ","ç”¨æˆ·","æ“ä½œ","which","å¯¹è±¡","f",")","given","handler","hello","sorted","unexpected","handlers","ç¬¬ä¸€ä¸ª","interrupt","are","ä¼˜é›…","=","servemux","by","of","ä¹‹é—´","ç­¾å","m","servehttp","enable","responsewriter","struct","r","case","ä½“","!","always","é€šè¿‡","defaultservemux","è¯¥",";","ordinary","å¦","whether","multiplexer","server1","print","under","å“åº”","ä¸èƒ½","å®ç°","addr","[","returns","æ—¶","explains","newservemux","è‡ªå®šä¹‰",",","åŒ…å«","åŠ¡å™¨","package","æ•æ‰","c","sync","å¯¹åº”","é”™è¯¯","è¶…æ—¶","sleep","channel","æ˜¯å¦","shortest","main","å­—ç¬¦ä¸²","appropriate","å¤„ç†å™¨","å¤ç”¨","2","any","åŠŸèƒ½","æ­£å¸¸","else","æ ¹æ®","åˆ¤æ–­","fatal","timeout","å­—ç¬¦","to","calls","request","æœåŠ¡","ç¼ºé™·","åœæ­¢","mu","ç³»ç»Ÿ","è§„åˆ™","hosts","string","shutdown","æ¥æ”¶å™¨","serverhttp","notify","è¯·æ±‚","allow","use","on","/","å®ä¾‹","time","go","es","å½“","æ–°","&","*","handle","ç¬¬äºŒä¸ª","type","ä¸Š","8000","3","byte","listens","'","ä¸º","å…³é—­","}","typically","ç§’","func","å¤ç”¨å™¨","entries","è¿æ¥","closed","å¤´","customhandler","ä¿¡æ¯","registers","æ—¶å€™","+","åœ¨","new","localhost","make","ç«¯å£å·","æ–¹æ³•","è¿™é‡Œ","non","an","ç«¯å£","bool","configured","second","with","hadnlefunc","è®¿é—®","ä»»ä½•","01","write","{","æŒ‡å®š","è·¯ç”±","adapter","muxentry","return","å»ºç«‹","æ¥å£","slice","start","ä¼ å…¥","å·²ç»","custome","ã€","for","ç±»å‹","err","åœ°å€","-","custom","å°†","requests","æ¥æ”¶","in","äºŒä¸ª","å°è£…","writetimeout","network","and","å‚æ•°","<","äº†","1","then","a","å¤„ç†","åˆ›å»º","map","..","æ›¿ä»£","os","æ— æ³•è®¿é—®","å®¢æˆ·ç«¯","ç¬¦åˆ","g","ç†å™¨","ä¸­","æœåŠ¡å™¨","è¢«","defaultmux","cutsomerhandler","used","as","å¤šç§","mux2","handlefunc","è‡ªå®š","http",":","æå‰","ï¼š","keep","ç”¨å™¨","ä½“ç­‰","æ­¥éª¤","context","ç»‘å®š","net","interface","tcp","åé¢","mux","starting","å°‘","åŸºæœ¬","çš„","ç¬¬äºŒ","ä¼‘çœ ","var","connections","åˆ°","å¯åŠ¨","if","å®¢æˆ·","patterns","ç›‘å¬","documentation","signal","s","ç¬¬ä¸€","mian","chan","function","error","å’Œ","æ‰§è¡Œ","æ‰€","ä¸åŒ","]","è°ƒç”¨","rwmutex","å‡½æ•°","ç„¶å","from","contain","hostnames","å£å·","å¸¦æœ‰","alives","æ— æ³•","w","goroutine","å‘ŠçŸ¥","ä¸€ä¸ª","(","pattern","accepted","background","address","nil","è‡ªå·±","\"","how","the","ä¿¡å·","log","world","matched"],"title":"01ï¼šå»ºç«‹HTTPæœåŠ¡å™¨çš„å¤šç§æ–¹æ³•","title_tokens":["æœåŠ¡å™¨","åŠ¡å™¨","çš„","01","å¤šç§","http","æ–¹æ³•","æœåŠ¡","å»ºç«‹","ï¼š"]},{"location":"Golang/Go-Web/01 HTTPServe/#01http","text":"","text_tokens":[],"title":"01ï¼šå»ºç«‹HTTPæœåŠ¡å™¨çš„å¤šç§æ–¹æ³•","title_tokens":["æœåŠ¡å™¨","åŠ¡å™¨","çš„","01","å¤šç§","http","æ–¹æ³•","æœåŠ¡","å»ºç«‹","ï¼š"]},{"location":"Golang/Go-Web/01 HTTPServe/#_1","text":"package mian import ( \"log\" \"net/http\" ) func main () { http . HadnleFunc ( \"/\" , func ( w http . ResponseWriter , r * http . Request ) { w . Write ([] byte ( \"hello world\" ) } log . Println ( \"starting HTTP server..\" ) log . Fatal ( http . ListenAndServe ( \":8000\" , nil )) } http.HandleFunc(pattern string, handler func(ResponseWriter, *Request) æ ¹æ®ä¸€ä¸ª==è·¯ç”±è§„åˆ™==ç»‘å®šä¸€ä¸ªæ‰§è¡Œå‡½æ•°, å½“ç”¨æˆ·è®¿é—®åˆ°æŒ‡å®šè·¯ç”±æ—¶æ‰§è¡Œ. http.HandleFunc çš„ç¬¬äºŒä¸ªå‚æ•°å¿…é¡»ç¬¦åˆå‡½æ•°ç­¾å func(http.ResponseWriter, *http.Request) , ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¯·æ±‚æ‰€å¯¹åº”çš„å“åº”å¯¹è±¡ http.ResponseWriter ,åŒ…å«å“åº”ç ã€å“åº”å¤´å’Œå“åº”ä½“, åœ¨è¿™é‡Œé€šè¿‡è°ƒç”¨ å“åº”å¯¹è±¡ çš„ Write æ–¹æ³•åƒå“åº”ä½“å†™å…¥å­—ç¬¦ä¸². ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¯·æ±‚æ‰€å¯¹åº”çš„è¯·æ±‚å¯¹è±¡ *http.Request ,åŒ…å«è¯·æ±‚å¤´ã€è¯·æ±‚ä½“ç­‰. http.ListenAndServe å¯åŠ¨HTTPæœåŠ¡å™¨,ç›‘å¬ æŒ‡å®šåœ°å€ å’Œ ç«¯å£å· çš„HTTPè¯·æ±‚ http.HandleFunc å°†ä¼ å…¥çš„ ç»‘å®šå‡½æ•° è½¬æ¢ä¸ºç±»å‹ http.HandleFunc (ä¸€ä¸ªHTTPè¯·æ±‚å¤„ç†å™¨å¯¹è±¡),è¯¥å¯¹è±¡ç±»å‹å®ç° http.Handler æ¥å£,æ¥å£æ–¹æ³•è°ƒç”¨è‡ªå·± // net / http / server . go // The HandlerFunc type is an adapter to allow the use of // ordinary functions as HTTP handlers . If f is a function // with the appropriate signature , HandlerFunc ( f ) is a // Handler that calls f . type HandlerFunc func ( ResponseWriter , * Request ) // ServeHTTP calls f ( w , r ) . func ( f HandlerFunc ) ServeHTTP ( w ResponseWriter , r * Request ) { f ( w , r ) }","text_tokens":["æ—¶","å¤´","as","handlefunc","http",",",":","åŒ…å«","åŠ¡å™¨","package","handlerfunc","åœ¨","å¿…é¡»","import","ä½“ç­‰","ç«¯å£å·","æ–¹æ³•","è¿™é‡Œ"," ","listenandserve","å¯¹åº”","an","ç»‘å®š","net","ç«¯å£","å­—ç¬¦ä¸²","signature","appropriate","å¤„ç†å™¨","starting","åƒ",".","with","functions","is","è½¬æ¢","hadnlefunc","çš„","æ ¹æ®","è®¿é—®","ç¬¬äºŒ","[","fatal","æ˜¯","server","å­—ç¬¦","println","that","åˆ°","å¯åŠ¨","write","{","to","if","å†™å…¥","calls","request","æœåŠ¡","ç ","ç”¨æˆ·","æŒ‡å®š","ç›‘å¬","è·¯ç”±","å¯¹è±¡","adapter","f",")","handler","hello","æ¥å£","ç¬¬ä¸€","mian","è§„åˆ™","ä¼ å…¥","string","handlers","function","ç¬¬ä¸€ä¸ª","å’Œ","æ‰§è¡Œ","ã€","æ‰€","ç±»å‹","è¯·æ±‚","allow","use","]","åœ°å€","=","/","å°†","è°ƒç”¨","of","ç­¾å","go","å‡½æ•°","servehttp","å½“","äºŒä¸ª","responsewriter","å‚æ•°","r","*","ä½“","ç¬¬äºŒä¸ª","å£å·","type","é€šè¿‡","è¯¥","w","a","ordinary","å¤„ç†","8000","byte","..","ä¸€ä¸ª","å“åº”","(","å®ç°","ä¸º","}","pattern","ç¬¦åˆ","ç†å™¨","nil","æœåŠ¡å™¨","è‡ªå·±","\"","func","the","log","world","main"],"title":"å»ºç«‹æœåŠ¡å™¨","title_tokens":["å»ºç«‹","æœåŠ¡å™¨","æœåŠ¡","åŠ¡å™¨"]},{"location":"Golang/Go-Web/01 HTTPServe/#handler","text":"package main import ( \"log\" \"net/http\" ) type customHandler {} // å°†ServeHTTPæ–¹æ³•ç»‘å®šåˆ°customHandlerä¸Š func ( _ * customHandler ) ServeHTTP ( w http . ResponseWriter , r * http . Request ){ w . Write ([] byte ( \"hello custom Handler\" ) } func main () { http . Handle ( \"/\" , & cutsomerHandler {}) log . Println ( \"starting HTTP server...\" ) log . Fatl ( http . ListenAndServe ( \":8000\" , nil )) } è‡ªå®šä¹‰ç±»å‹ type customHandler{} ç±»å‹ç»‘å®š ServerHTTP(w http.ResponseWriter, r *http.Request) æ–¹æ³• http.Handle è°ƒç”¨, é€šè¿‡ &customHandler{} ä¼ å…¥è¯¥è‡ªå®šä¹‰ç±»å‹çš„åœ°å€ å°‘äº†å°†ç»‘å®šå‡½æ•°è½¬æ¢ä¸º type HandleFunc çš„æ­¥éª¤","text_tokens":["r","customhandler","*","handle","starting","å°‘",".","è‡ªå®š","ä¼ å…¥","handlefunc","äº†","type","é€šè¿‡","http","_","è¯¥","è‡ªå®šä¹‰","w",",","è½¬æ¢",":","hello","ä¸Š","8000","çš„","package","ç±»å‹","serverhttp","byte","...","]","åœ°å€","import","custom","(","/","server","å°†","println","åˆ°","ä¸º","write","æ–¹æ³•","è°ƒç”¨","}","{","æ­¥éª¤"," ","request","listenandserve","fatl","å‡½æ•°","å®šä¹‰","servehttp","nil","\"","ç»‘å®š","net","func",")","cutsomerhandler","responsewriter","handler","log","&","[","main"],"title":"è‡ªå®šä¹‰Handler","title_tokens":["handler","è‡ªå®š","è‡ªå®šä¹‰","å®šä¹‰"]},{"location":"Golang/Go-Web/01 HTTPServe/#servemux","text":"// ListenAndServe listens on the TCP network address addr and then calls // Serve with handler to handle requests on incoming connections. // Accepted connections are configured to enable TCP keep-alives. // // The handler is typically nil, in which case the DefaultServeMux is used. // // ListenAndServe always returns a non-nil error. func ListenAndServe ( addr string , handler Handler ) error { server := & Server { Addr : addr , Handler : handler } return server . ListenAndServe () } //*****************************// type Handler interface { ServeHTTP ( ResponseWriter , * Request ) } 1. å®ä¾‹ä¸­ http.ListenAndServe çš„nilæ›¿ä»£äº†å®ç°äº† http.Handler æ¥å£çš„å¯¹è±¡ 2. http.Handler å®ç° ServeHTTP æ¥å£ 3. ç¼ºé™· è¯¥æ–¹æ³•ä¸èƒ½åƒä¹‹å‰è°ƒç”¨çš„ http.HandleFunc å’Œ http.Handle ä¸ºä¸åŒè·¯ç”±è§„åˆ™ç»‘å®šä¸åŒçš„å‡½æ•°å¤„ç† package main import ( \"log\" \"net/http\" ) type customHandler struct {} func ( _ * customHandler ) ServeHTTP ( w http . ResponseWriter , r * http . Request ) { w . Write ([] byte ( \"hello custom server mux's ServeHTTP\" )) } func main () { log . Println ( \"starting HTTP server... \" ) log . Fatal ( http . ListenAndServe ( \":8000\" , & customHandler {})) }","text_tokens":["returns","customhandler","handlefunc","serve","http","_","ä¹‹å‰",",",":","package","...","keep","import","æ–¹æ³•"," ","non","listenandserve","ç»‘å®š","net","interface","configured","tcp","mux","2","starting","åƒ",".","with","incoming","is","çš„","fatal","connections","server","println","write","to","{","calls","request","ç¼ºé™·","which","è·¯ç”±","å¯¹è±¡","s",")","return","handler","hello","æ¥å£","è§„åˆ™","string","error","å’Œ","on","ä¸åŒ","]","are","-","=","custom","/","å®ä¾‹","è°ƒç”¨","requests","å‡½æ•°","enable","servehttp","in","responsewriter","network","and","&","struct","r","case","*","handle","1","always","type","defaultservemux","äº†","è¯¥","alives","then","w","a","å¤„ç†","8000","3","listens","byte","'","æ›¿ä»£","(","ä¸èƒ½","å®ç°","ä¸º","}","typically","accepted","address","nil","ä¸­","addr","\"","func","used","the","log","[","main"],"title":"æœåŠ¡å¤ç”¨å™¨(ServeMux)","title_tokens":["ç”¨å™¨","servemux","(","å¤ç”¨",")","å¤ç”¨å™¨","æœåŠ¡"]},{"location":"Golang/Go-Web/01 HTTPServe/#serve-mux","text":"// HandleFunc registers the handler function for the given pattern // in the DefaultServeMux. // The documentation for ServeMux explains how patterns are matched. func HandleFunc ( pattern string , handler func ( ResponseWriter , * Request )) { DefaultServeMux . HandleFunc ( pattern , handler ) } //*****************************// // DefaultServeMux is the default ServeMux used by Serve. var DefaultServeMux = & defaultServeMux var defaultServeMux ServeMux //*****************************// type ServeMux struct { mu sync . RWMutex m map [ string ] muxEntry es [] muxEntry // slice of entries sorted from longest to shortest. hosts bool // whether any patterns contain hostnames } handle.Handle è°ƒç”¨ DefaultServeMux ,è¯¥ DefaultMux æ˜¯ http.ServeMux çš„å°è£… http.ServeMux å¸¦æœ‰åŸºæœ¬è·¯ç”±åŠŸèƒ½çš„æœåŠ¡å¤ç”¨å™¨(Serve Multiplexer) é€šè¿‡ http.NewServeMux æ“ä½œ http.ServeMux å¯¹è±¡, è°ƒç”¨ http.NewServeMux çš„ .Handle æ–¹æ³• package main import ( \"log\" \"net/http\" ) type customHandler struct {} func ( _ * customHandler ) ServeHTTP ( w http . ResponseWriter , r * http . Request ) { w . Write ([] byte ( \"hello new custom server mux\" )) } func main () { mux := http . NewServeMux () mux . Handle ( \"/\" , & customHandler {}) log . Println ( \"starting HTTP serve...\" ) log . Fatal ( http . ListenAndServe ( \":8000\" , mux )) }","text_tokens":["default","customhandler","explains","handlefunc","newservemux","registers","serve","http","_",",",":","package","...","new","ç”¨å™¨","import","æ–¹æ³•"," ","listenandserve","sync","net","bool","main","shortest","longest","mux","å¤ç”¨","starting",".","any","åŠŸèƒ½","is","åŸºæœ¬","çš„","fatal","var","æ˜¯","server","println","write","{","to","patterns","request","æœåŠ¡","æ“ä½œ","documentation","è·¯ç”±","å¯¹è±¡","muxentry",")","given","handler","mu","hello","slice","sorted","hosts","string","function","for","]","are","servemux","=","/","custom","by","è°ƒç”¨","of","m","rwmutex","es","servehttp","in","from","responsewriter","å°è£…","contain","&","struct","r","hostnames","*","handle","type","defaultservemux","é€šè¿‡","è¯¥","å¸¦æœ‰","w","map","whether","8000","multiplexer","byte","(","}","pattern","how","\"","defaultmux","func","used","the","å¤ç”¨å™¨","entries","log","[","matched"],"title":"è‡ªå®šä¹‰Serve Mux","title_tokens":["mux","è‡ªå®š"," ","serve","å®šä¹‰","è‡ªå®šä¹‰"]},{"location":"Golang/Go-Web/01 HTTPServe/#server","text":"func ListenAndServe ( addr string , handler Handler ) error { server := & Server { Addr : addr , Handler : handler } return server . ListenAndServe () } //***************************// type Server struct { Addr string Handler Handler ... }","text_tokens":["*",".","string","type","error",",",":","...","=","(","/","server","}","{"," ","listenandserve","addr","func",")","return","handler","&","struct"],"title":"æœåŠ¡å™¨å¯¹è±¡(Server)","title_tokens":["æœåŠ¡å™¨","(","å¯¹è±¡","åŠ¡å™¨","server",")","æœåŠ¡"]},{"location":"Golang/Go-Web/01 HTTPServe/#server1","text":"è°ƒç”¨ http.ListenAndServe çš„æ—¶å€™åˆ›å»ºäº†å¦ä¸€ä¸ª http.Serve å¯¹è±¡ package main import ( \"log\" \"net/http\" ) type customHandler struct {} func ( _ * customHandler ) ServeHTTP ( w http . ResponseWriter , r * http . Request ) { w . Write ([] byte ( \"hello custom server mux\" )) } func main () { mux := http . NewServeMux () mux . Handle ( \"/\" , & customHandler {}) serve := & http . Server { Addr : \":8000\" , Handler : mux , } log . Println ( \"starting HTTP serve...\" ) log . Fatal ( serve . ListenAndServe ()) }","text_tokens":["r","mux","customhandler","*","handle","starting",".","newservemux","äº†","serve","type","http","_","w",",","æ—¶å€™",":","åˆ›å»º","å¦","hello","çš„","package","8000","byte","...","]","ä¸€ä¸ª","fatal","import","custom","(","/","server","=","println","write","è°ƒç”¨","}","{"," ","request","listenandserve","servehttp","å¯¹è±¡","addr","\"","net","func",")","responsewriter","handler","log","&","[","main","struct"],"title":"è‡ªå®šä¹‰server1","title_tokens":["server1","è‡ªå®š","è‡ªå®šä¹‰","å®šä¹‰"]},{"location":"Golang/Go-Web/01 HTTPServe/#server2","text":"// custome server 2 package main import ( \"log\" \"net/http\" \"time\" ) type customHandler struct {} func ( _ * customHandler ) ServeHTTP ( w http . ResponseWriter , r * http . Request ) { w . Write ([] byte ( \"hello custom server mux2\" )) } func main () { mux := http . NewServeMux () mux . Handle ( \"/\" , & customHandler {}) mux . HandleFunc ( \"/timeout\" , func ( w http . ResponseWriter , r * http . Request ) { // è¶…æ—¶ time . Sleep ( 2 * time . Second ) w . Write ([] byte ( \"Timeout\" )) }) server := & http . Server { Addr : \":8000\" , Handler : mux , WriteTimeout : 2 * time . Second , } log . Println ( \"starting HTTP server...\" ) log . Fatal ( server . ListenAndServe ()) } 1. æ— æ³•è®¿é—®åˆ° localhost:8000/timeout 2. æ‰§è¡Œå‡½æ•°ä¼‘çœ 2ç§’, è¢« http.Serve å¯¹è±¡è®¤ä¸ºå·²ç»è¶…æ—¶,æå‰å…³é—­ä¸å®¢æˆ·ç«¯ä¹‹é—´çš„è¿æ¥, åé¢æ— æ³•åƒå“åº”ä½“å†™å…¥ä»»ä½•ä¿¡æ¯","text_tokens":["è¿æ¥","mux2","customhandler","handlefunc","newservemux","ä¿¡æ¯","serve","http","_",",",":","package","...","è®¤ä¸º","localhost","æå‰","import"," ","listenandserve","è¶…æ—¶","net","sleep","åé¢","mux","2","starting","åƒ","second",".","çš„","è®¿é—®","ä¸","ä¼‘çœ ","fatal","timeout","ä»»ä½•","server","println","åˆ°","write","{","å®¢æˆ·","å†™å…¥","request","å¯¹è±¡",")","handler","hello","å·²ç»","æ‰§è¡Œ","custome","]","custom","=","/","time","ä¹‹é—´","å‡½æ•°","servehttp","responsewriter","writetimeout","&","struct","r","*","handle","ä½“","1","type","æ— æ³•","w","8000","byte","å“åº”","(","æ— æ³•è®¿é—®","å®¢æˆ·ç«¯","å…³é—­","}","ç§’","addr","è¢«","\"","func","log","[","main"],"title":"è‡ªå®šä¹‰server2","title_tokens":["è‡ªå®š","server2","è‡ªå®šä¹‰","å®šä¹‰"]},{"location":"Golang/Go-Web/01 HTTPServe/#_2","text":"é€šè¿‡æ•æ‰ç³»ç»Ÿä¿¡å·(Signal)ã€goroutineå’Œé€šé“(Channel)å®ç° æ•æ‰ os.Interrupt ä¿¡å·(ctrl+c)ç„¶åè°ƒç”¨ server.Shutdown æ–¹æ³•gå‘ŠçŸ¥æœåŠ¡å™¨åœæ­¢æ¥å—æ–°è¯·æ±‚ http.ErrServerClosed æ ¹æ®è¯¥é”™è¯¯ç±»å‹åˆ¤æ–­æœåŠ¡å™¨æ˜¯å¦æ­£å¸¸å…³é—­ package main import ( \"context\" \"log\" \"net/http\" \"os\" \"os/signal\" ) type customHandler struct {} func ( _ * customHandler ) ServeHTTP ( w http . ResponseWriter , r * http . Request ) { w . Write ([] byte ( \"hello custom server mux2\" )) } func main () { mux := http . NewServeMux () mux . Handle ( \"/\" , & customHandler {}) server := & http . Server { Addr : \":8000\" , Handler : mux , } // åˆ›å»ºç³»ç»Ÿä¿¡å·æ¥æ”¶å™¨ quit := make ( chan os . Signal ) signal . Notify ( quit , os . Interrupt ) go func () { <- quit if err := server . Shutdown ( context . Background ()); err != nil { log . Fatal ( \"Shutdown server:\" , err ) } }() log . Println ( \"start HTTP server...\" ) err := server . ListenAndServe () if err != nil { if err == http . ErrServerClosed { log . Print ( \"Server Closed under request\" ) } else { log . Fatal ( \"Server closed unexpected\" ) } } }","text_tokens":["mux2","closed","customhandler","newservemux","http","_",",","errserverclosed",":","åŠ¡å™¨","package","+","...","import","æ•æ‰","make","æ–¹æ³•","æ¥å—"," ","context","c","listenandserve","é”™è¯¯","net","channel","æ˜¯å¦","mux","ctrl",".","æ­£å¸¸","else","æ ¹æ®","åˆ¤æ–­","fatal","server","println","write","é€šé“","{","if","quit","request","æœåŠ¡","signal",")","åœæ­¢","handler","hello","start","chan","ç³»ç»Ÿ","unexpected","shutdown","å’Œ","ã€","æ¥æ”¶å™¨","interrupt","ç±»å‹","notify","è¯·æ±‚","err","]","-","custom","=","/","è°ƒç”¨","æ¥æ”¶","go","servehttp","ç„¶å","responsewriter","æ–°","&","struct","r","<","*","handle","!","type","é€šè¿‡","è¯¥","w","goroutine",";","åˆ›å»º","8000","byte","print","å‘ŠçŸ¥","os","under","(","å®ç°","å…³é—­","}","g","background","nil","æœåŠ¡å™¨","addr","\"","func","ä¿¡å·","log","[","main"],"title":"ä¼˜é›…åœ°åœæ­¢æœåŠ¡","title_tokens":["æœåŠ¡","åœæ­¢","åœ°","ä¼˜é›…"]},{"location":"Golang/Go-Web/02 BasicTemplateUsage/","text":"02ï¼šåŸºç¡€æ¨¡æ¿ ä¸ºä»€ä¹ˆè¦ç”¨æ¨¡æ¿ HTTPæœåŠ¡å™¨å“åº”å›ºå®šçš„å­—ç¬¦ä¸²ä¸ç¬¦åˆå®é™…ç¯å¢ƒ, é€šè¿‡ text/template åŒ…å‘å®¢æˆ·ç«¯ å“åº”åŠ¨æ€å†…å®¹ . ç‰¹æ€§ å°†æ¨¡æ¿åº”ç”¨äºç»™å®šçš„æ•°æ®ç»“æ„æ¥æ‰§è¡Œæ¨¡æ¿ï¼Œæ¨¡æ¿çš„ç¼–ç ä¸ Go è¯­è¨€æºä»£ç æ–‡ä»¶ç›¸åŒï¼Œéœ€ä¸º UTF-8 ç¼–ç  æ¨¡æ¿ä¸­çš„æ³¨è§£ï¼ˆAnnotationï¼‰ä¼šæ ¹æ®æ•°æ®ç»“æ„ä¸­çš„å…ƒç´ æ¥æ‰§è¡Œå¹¶æ´¾ç”Ÿå…·ä½“çš„æ˜¾ç¤ºç»“æ„ï¼Œè¿™äº›å…ƒç´ ä¸€èˆ¬æŒ‡ç»“æ„ä½“ä¸­çš„å­—æ®µæˆ– map ä¸­çš„é”®å æ¨¡æ¿çš„æ‰§è¡Œé€»è¾‘ä¼šä¾æ®ç‚¹ï¼ˆDotï¼Œ\".\"ï¼‰æ“ä½œç¬¦æ¥è®¾å®šå½“å‰çš„æ‰§è¡Œä½ç½®ï¼Œå¹¶æŒ‰åºå®Œæˆæ‰€æœ‰é€»è¾‘çš„æ‰§è¡Œã€‚ æ¨¡æ¿ä¸­çš„è¡Œä¸ºï¼ˆActionï¼‰åŒ…æ‹¬æ•°æ®è¯„ä¼°ï¼ˆData Evaluationï¼‰å’Œæ§åˆ¶é€»è¾‘ï¼Œä¸”éœ€è¦ä½¿ç”¨åŒå±‚å¤§æ‹¬å·ï¼ˆ{{ å’Œ }}ï¼‰åŒ…è£¹ã€‚é™¤è¡Œä¸ºä»¥å¤–çš„ä»»ä½•å†…å®¹éƒ½ä¼šåŸæ ·è¾“å‡ºä¸åšä¿®æ”¹ã€‚ æ¨¡æ¿è§£æå®Œæˆåï¼Œä»è®¾è®¡ä¸Šå¯ä»¥å¹¶å‘åœ°è¿›è¡Œæ¸²æŸ“ï¼Œä½†è¦æ³¨æ„è¢«æ¸²æŸ“å¯¹è±¡çš„å¹¶å‘å®‰å…¨æ€§ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ¨¡æ¿å¯ä»¥åŒæ—¶ä¸ºå¤šä¸ªå®¢æˆ·ç«¯çš„å“åº”è¿›è¡Œæ¸²æŸ“ï¼Œå› ä¸ºè¾“å‡ºå¯¹è±¡ï¼ˆWriterï¼‰æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œä½†æ˜¯è¢«æ¸²æŸ“çš„å¯¹è±¡å¯èƒ½æœ‰å„è‡ªçš„çŠ¶æ€å’Œæ—¶æ•ˆæ€§ã€‚ å¦‚ä½•ä½¿ç”¨æ¨¡æ¿ å®ä¾‹ package main import ( \"fmt\" \"text/template\" \"log\" \"net/http\" ) func main () { http . HandleFunc ( \"/\" , func ( w http . ResponseWriter , r * http . Request ) { // åˆ›å»ºæ¨¡æ¿å¯¹è±¡å¹¶è§£ææ¨¡æ¿å†…å®¹ tmpl , err := template . New ( \"test\" ). Parse ( \"Hello world!\" ) if err != nil { fmt . Fprintf ( w , \"Parse: %v\" , err ) return } // è°ƒç”¨æ¨¡æ¿å¯¹è±¡çš„æ¸²æŸ“æ–¹æ³• err = tmpl . Execute ( w , nil ) if err != nil { fmt . Fprintf ( w , \"Excute: %v\" , err ) return } }) log . Println ( \"starting HTTP server...\" ) log . Fatal ( http . ListenAndServe ( \":8000\" , nil )) } 1. å¼•å…¥ text/template åŒ…. 2. è°ƒç”¨ template.New æ–¹æ³•æ ¹æ®ç»™å®šçš„åç§°æ–°å»ºæ¨¡æ¿, è¿”å›ä¸€ä¸ª *template.Template å¯¹è±¡. 3. *template.Template å¯¹è±¡çš„ Parse æ–¹æ³•æ¥å—å­—ç¬¦ä¸²å‚æ•°(æ–‡æœ¬æ¨¡æ¿å†…å®¹), è§£æå¹¶è¿”å›è§£æä¸­é‡åˆ°çš„é”™è¯¯. 4. è°ƒç”¨ template.Execute æ¸²æŸ“æ¨¡æ¿, å‚æ•°åˆ†åˆ«ä¸º è¾“å‡ºå¯¹è±¡ å’Œ æŒ‡å®šæ•°æ®å¯¹è±¡ , å®ç°äº† io.Writer æ¥å£çš„å®ä¾‹éƒ½å¯ä»¥ä½œä¸ºè¾“å‡ºå¯¹è±¡. æ¸²æŸ“å˜é‡ package main import ( \"net/http\" \"log\" ) func main () { http . HandleFunc ( \"/\" , func ( w http . ResponseWriter , r * http . Reqeust ){ w . Write ([] byte ( r . URL . QUERY (). GET ( \"val\" ))) }) log . Println ( \"starting HTTP serve...\" ) log . Fatal ( http . ListenAndServe ( \":8000\" , nil )) } HTTPåè®®é€šè¿‡ GET è¯·æ±‚è·å–URLå‚æ•°(URLä¸­?åçš„å€¼). è°ƒç”¨ *http.Request å¯¹è±¡çš„ URL.QUERY().GET() æ–¹æ³•. package main import ( \"fmt\" \"text/template\" \"log\" \"net/http\" ) func main () { http . HandleFunc ( \"/\" , func ( w http . ResponseWriter , r * http . Request ) { // åˆ›å»ºæ¨¡æ¿å¹¶è§£æå†…å®¹ tmpl , err := template . New ( \"test\" ). Parse ( \"The value is: {{.}}\" ) if err != nil { fmt . Fprintf ( w , \"Parse: %v\" , err ) return } // è·å–URLå‚æ•°çš„å€¼ val := r . URL . Query (). Get ( \"val\" ) // è°ƒç”¨æ¨¡æ¿å¯¹è±¡æ¸²æŸ“æ–¹æ³• err = tmpl . Execute ( w , val ) if err != nil { fmt . Fprintf ( w , \"Execute: %v\" , err ) return } }) log . Println ( \"starting HTTP server...\" ) log . Fatal ( http . ListenAndServe ( \":8000\" , nil )) } æ¨¡æ¿å†…å®¹ä¿®æ”¹æˆ The value is : {{.}} , ç”¨äº† åˆ†éš”ç¬¦ å°† . æ“ä½œç¬¦åŒ…è£¹èµ·æ¥, . æ“ä½œç¬¦é»˜è®¤æŒ‡å‘ æ ¹å¯¹è±¡ , å³ template.Execute ä¸­çš„ç¬¬äºŒä¸ªå‚æ•°. åœ¨ template.Execute æ–¹æ³•ä¸­ä¼ å…¥ val , . æ“ä½œç¬¦æ¸²æŸ“è¯¥å˜é‡ val å®ç°åŠ¨æ€è¾“å‡º. æ¸²æŸ“å¤æ‚å¯¹è±¡ package main import ( \"fmt\" \"text/template\" \"log\" \"net/http\" \"strconv\" ) // Inventory åº“å­˜ type Inventory struct { SKU string Name string UnitPrice float64 Quantity int64 , } func main () { http . HandleFunc ( \"/\" , func ( w http . ResponseWriter , r * http . Request ) { tmpl , err := template . New ( \"test\" ). Parse ( `Inventory SKU: {{.SKU}} Name: {{.Name}} UnitPrice: {{.UnitPrice}} Quantity: {{.Quantity}} ` ) if err != nil { fmt . Fprintf ( w , \"Parse:%v\" , err ) return } // æ ¹æ®URLæŸ¥è¯¢å‚æ•°çš„å€¼åˆ›å»ºInventoryå®ä¾‹ inventory := & Inventory { SKU : r . URL . Query (). Get ( \"sku\" ), Name : r . URL . Query (). Get ( \"name\" ), } // æ•°æ®å¤„ç† inventory . UnitPrice , _ = strconv . ParseFloat ( r . URL . Query (). Get ( \"unitPrice\" ), 64 ) inventory . Quantity , _ = strconv . ParseInt ( r . URL . Query (). Get ( \"quantity\" ), 10 , 64 ) // æ¸²æŸ“ err = tmpl . Execute ( w , inventory ) if err != nil { fmt . Fprintf ( w , \"Execute: %v\" , err ) return } }) log . Println ( \"start HTTP serve...\" ) log . Fatal ( http . ListenAndServe ( \":8000\" , nil )) } template.Execute çš„ç¬¬äºŒä¸ªå‚æ•°ç±»å‹ä¸º interface{} , å¯ä»¥ä¼ å…¥ä»»ä½•ç±»å‹çš„å‚æ•°. func ( t * Template ) Execute ( wr io . Writer , data interface {}) error { if err := t . escape (); err != nil { return err } return t . text . Execute ( wr , data ) } http/template ä¼šæ ¹æ®ä¼ å…¥çš„ æ ¹å¯¹è±¡ è¿›è¡Œåº•å±‚ç±»å‹åˆ†æ, è‡ªåŠ¨è¯†åˆ«å˜é‡, æ­¤æ—¶çš„ . æ“ä½œç¬¦ä»£è¡¨ inventory ç»“æ„ä½“, å› æ­¤å¯ä»¥è°ƒç”¨ inventory çš„å„ä¸ªå±æ€§. åœ¨ Parse çš„æ—¶å€™ç”¨åå¼•å·``å°†ç»“æ„ä½“åŒ…èµ·æ¥. æ¸²æŸ“ä¸­è°ƒç”¨ç»“æ„ä½“çš„æ–¹æ³• func ( i * Inventory ) Subtotal () float64 { return i . UnitPrice * float64 ( i . Quantity ) } //******************************// http . HandleFunc ( \"/\" , func ( w http . ResponseWriter , r * http . Request ) { tmpl , err := template . New ( \"test\" ). Parse ( `Inventory SKU: {{.SKU}} Name: {{.Name}} UnitPrice: {{.UnitPrice}} Quantity: {{.Quantity}} Subtotal: {{.Subtotal}} ` ) mapç±»å‹ä½œä¸ºæ¨¡æ¿è·Ÿå¯¹è±¡ package main import ( \"fmt\" \"log\" \"net/http\" \"strconv\" \"text/template\" ) func main () { http . HandleFunc ( \"/\" , func ( w http . ResponseWriter , r * http . Request ) { // åˆ›å»ºæ¨¡æ¿å¯¹è±¡å¹¶è§£ææ¨¡æ¿å†…å®¹ tmpl , err := template . New ( \"test\" ). Parse ( `Inventory SKU: {{.SKU}} Name: {{.Name}} UnitPrice: {{.UnitPrice}} Quantity: {{.Quantity}} ` ) if err != nil { fmt . Fprintf ( w , \"Parse: %v\" , err ) return } // ç›´æ¥å°†URL æŸ¥è¯¢å‚æ•°çš„å€¼èµ‹å€¼ç»™å˜é‡ sku := r . URL . Query (). Get ( \"sku\" ) name := r . URL . Query (). Get ( \"name\" ) unitPrice , _ := strconv . ParseFloat ( r . URL . Query (). Get ( \"unitPrice\" ), 64 ) quantity , _ := strconv . ParseInt ( r . URL . Query (). Get ( \"quantity\" ), 10 , 64 ) err = tmpl . Execute ( w , map [ string ] interface {}{ \"SKU\" : sku , \"Name\" : name , \"UnitPrice\" : unitPrice , \"Quantity\" : quantity , }) if err != nil { fmt . Fprintf ( w , \"Execute: %v\" , err ) return } }) log . Println ( \"Starting HTTP server...\" ) log . Fatal ( http . ListenAndServe ( \"localhost:8000\" , nil )) } 1. ä¼ é€’ç»™ Execute ä¸€ä¸ª map[string]interface{} ä½œä¸ºæ¨¡æ¿å¯¹è±¡,å¯ä»¥ä¼ å…¥ä»»æ„ç±»å‹çš„å€¼, å°†ç»“æ„ä½“çš„æ‰€æœ‰å€¼éƒ½ä¼ å…¥. 2. ä¸å†éœ€è¦å•ç‹¬åˆ›å»ºå®ä¾‹, åªéœ€è¦é€šè¿‡ r.URL.Query().Get(valName) è·å–URLæŸ¥è¯¢å‚æ•°çš„å€¼. 3. å…¶ä¸­æ•°å€¼éœ€è¦ç”¨åˆ° strconv.ParseInt/ParseFloat è¿›è¡Œè½¬åŒ– æ³¨é‡Š tmpl , err := template . New ( \"test\" ). Parse ( `Inventory{{/* æ‰“å°å‚æ•°çš„å€¼ */}} SKU: {{.SKU}} Name: {{.Name}} UnitPrice: {{.UnitPrice}} Quantity: {{.Quantity}} ` ) 1. é€šè¿‡ {{}} åŒå±‚å¤§æ‹¬å·å’Œ /**/ æ‹¬èµ·æ¥çš„å€¼æ˜¯æ³¨é‡Š æ¨¡æ¿æµç¨‹ template.New æ–°å»ºæ¨¡æ¿, è¿”å› *template.Template å¯¹è±¡ è°ƒç”¨ *template.Template å¯¹è±¡çš„ Parse æ–¹æ³•è§£ææ¨¡æ¿ ä¼ å…¥æ¨¡æ¿å®ä¾‹ æ•°æ®å¤„ç† strconv è°ƒç”¨ *template.Template å¯¹è±¡çš„ Execute æ–¹æ³•æ¸²æŸ“æ¨¡æ¿","text_tokens":["ä¸ºä»€ä¹ˆ","å±æ€§","ä½†","serve","_","è¿›è¡Œ","ä½ç½®","...","4","è¡Œä¸º","å","åœ°","`","ç»™","éƒ½","import","åˆ†éš”ç¬¦","å…·ä½“","æ¥å—","reqeust"," ","listenandserve","åŸºç¡€","tmpl","parsefloat","å¹¶","èµ‹å€¼",".","æ–°å»º","is","ä¸","execute","64","æ˜¯","server","println","åŒå±‚","url","template","æ“ä½œ","æˆ","value","å¯¹è±¡","åŠ¨æ€",")","i","hello","åŸæ ·","ä»€ä¹ˆ","å¼•å…¥","sku","ä»»æ„","é™¤","è‡ªåŠ¨è¯†åˆ«","æ‰“å°","=","fprintf","æŒ‰åº","ï¼Œ","ä¼ é€’","å­—","responsewriter","æ³¨é‡Š","struct","r","ç¬¦åˆå®é™…","ä½“","!","é€šè¿‡","è¯¥",";","æ­¤æ—¶","å³","å“åº”","å®ç°","æ‹¬","ç‰¹æ€§","ç›´æ¥","[","ç”¨","å¼•å·","åŒ…æ‹¬","ä½†æ˜¯",",","åŠ¡å™¨","å›ºå®š","package","ç»™å®š","ä¸”","ç›¸äº’","è¯†åˆ«","å¤šä¸ª","è¿™äº›","é”™è¯¯","å˜é‡","å­—ç¬¦ä¸²","io","2","æ³¨è§£","é€»è¾‘","02","æ ¹æ®","ä½“ä¸­","fatal","inventory","å¹¶å‘","å­—ç¬¦","æ—¶æ•ˆ","åˆ†åˆ«","å½“å‰","request","æœåŠ¡","val","ä½“åŒ…","fmt","string","è¦","valname","è¯·æ±‚","åŒ…","/","å®ä¾‹","go","åˆ†æ","å¦‚ä½•","åè®®","&","v","*","å…ƒç´ ","ç¬¬äºŒä¸ª","type","éœ€ä¸º","ä¸Š","8000","å„ä¸ª","3","byte","æ•°æ®ç»“æ„","æ³¨æ„","å„è‡ª","ä¸º","float64","ä»¥å¤–","}","subtotal","éœ€è¦","escape","func","æ•°æ®","ä¸å†","ä¸","wr","æ—¶å€™","ä»","æ¥","åœ¨","new","test","localhost","ï¼‰","æ–¹æ³•","åŒ…å‘","ç»“æ„","å¤æ‚","int64","æ—¶æ•ˆæ€§","?","äº","10","8","ç›¸åŒ","å¯ä»¥","get","ä»»ä½•","æ®µ","åº”ç”¨","write","{","t","ã€‚","data","æŒ‡å®š","åç§°","èµ·æ¥","æœ‰","return","æ¥å£","annotation","start","text","æµç¨‹","ä¼ å…¥","æŒ‡å‘","ç”¨åˆ°","ç±»å‹","err","å¯èƒ½","-","çŠ¶æ€","å°†","utf","parse","å› ä¸º","ç‚¹","ä½¿ç”¨","æ–‡ä»¶","äºŒä¸ª","å®é™…","quantity","è‡ªåŠ¨","å‚æ•°","åª","action","1","äº†","å…¶ä¸­","åˆ›å»º","å¤„ç†","map","æ‰€æœ‰","ä¼š","ä¾æ®","å®¢æˆ·ç«¯","%","ä¸€èˆ¬","ç¬¦åˆ","å•ç‹¬","writer","parseint","ä¸­","æœåŠ¡å™¨","ç‹¬ç«‹","è¢«","handlefunc","åŒ…è£¹","å¤§æ‹¬å·","http",":","æ´¾ç”Ÿ","åˆ†éš”","ç¯å¢ƒ","name","dot","è·å–","strconv","ï¼š","é»˜è®¤","ç¼–ç ","æ¨¡æ¿","è½¬åŒ–","è®¾è®¡","net","æ‹¬å·","interface","è¿”å›","å®Œæˆ","ä»£ç ","starting","æŸ¥è¯¢","ä¿®æ”¹","æ ¹","åš","çš„","ç¬¬äºŒ","ä¾‹å¦‚","åŒæ—¶","æ§åˆ¶","å®‰å…¨æ€§","å®¢æˆ·","if","å€¼","å®‰å…¨","é‡åˆ°","æŒ‡","error","åº“å­˜","é”®å","å’Œ","æ‰§è¡Œ","æ–‡æœ¬","æ•°æ®å¤„ç†","]","æ¸²æŸ“","è§£æ","è·Ÿ","è°ƒç”¨","å› æ­¤","ï¼ˆ","excute","è¯­è¨€","åº•å±‚","æ˜¾ç¤º","æ•°å€¼","æ“ä½œç¬¦","ä»£è¡¨","w","æˆ–","è¾“å‡º","ä¸€ä¸ª","å†…å®¹","(","å","è®¾å®š","ä½œä¸º","unitprice","evaluation","nil","\"","æºä»£ç ","query","the","log","world","è¯„ä¼°","main"],"title":"02ï¼šåŸºç¡€æ¨¡æ¿","title_tokens":["åŸºç¡€","02","ï¼š","æ¨¡æ¿"]},{"location":"Golang/Go-Web/02 BasicTemplateUsage/#02","text":"","text_tokens":[],"title":"02ï¼šåŸºç¡€æ¨¡æ¿","title_tokens":["åŸºç¡€","02","ï¼š","æ¨¡æ¿"]},{"location":"Golang/Go-Web/02 BasicTemplateUsage/#_1","text":"HTTPæœåŠ¡å™¨å“åº”å›ºå®šçš„å­—ç¬¦ä¸²ä¸ç¬¦åˆå®é™…ç¯å¢ƒ, é€šè¿‡ text/template åŒ…å‘å®¢æˆ·ç«¯ å“åº”åŠ¨æ€å†…å®¹ .","text_tokens":["text","ç¬¦åˆå®é™…",".","é€šè¿‡","http","ä¸",",","åŠ¡å™¨","çš„","å›ºå®š","ç¯å¢ƒ","å†…å®¹","å“åº”","/","å­—ç¬¦","å®¢æˆ·ç«¯","åŒ…å‘","å®¢æˆ·"," ","template","æœåŠ¡","ç¬¦åˆ","æœåŠ¡å™¨","åŠ¨æ€","å®é™…","å­—ç¬¦ä¸²"],"title":"ä¸ºä»€ä¹ˆè¦ç”¨æ¨¡æ¿","title_tokens":["ä¸ºä»€ä¹ˆ","ç”¨","è¦","æ¨¡æ¿","ä»€ä¹ˆ"]},{"location":"Golang/Go-Web/02 BasicTemplateUsage/#_2","text":"å°†æ¨¡æ¿åº”ç”¨äºç»™å®šçš„æ•°æ®ç»“æ„æ¥æ‰§è¡Œæ¨¡æ¿ï¼Œæ¨¡æ¿çš„ç¼–ç ä¸ Go è¯­è¨€æºä»£ç æ–‡ä»¶ç›¸åŒï¼Œéœ€ä¸º UTF-8 ç¼–ç  æ¨¡æ¿ä¸­çš„æ³¨è§£ï¼ˆAnnotationï¼‰ä¼šæ ¹æ®æ•°æ®ç»“æ„ä¸­çš„å…ƒç´ æ¥æ‰§è¡Œå¹¶æ´¾ç”Ÿå…·ä½“çš„æ˜¾ç¤ºç»“æ„ï¼Œè¿™äº›å…ƒç´ ä¸€èˆ¬æŒ‡ç»“æ„ä½“ä¸­çš„å­—æ®µæˆ– map ä¸­çš„é”®å æ¨¡æ¿çš„æ‰§è¡Œé€»è¾‘ä¼šä¾æ®ç‚¹ï¼ˆDotï¼Œ\".\"ï¼‰æ“ä½œç¬¦æ¥è®¾å®šå½“å‰çš„æ‰§è¡Œä½ç½®ï¼Œå¹¶æŒ‰åºå®Œæˆæ‰€æœ‰é€»è¾‘çš„æ‰§è¡Œã€‚ æ¨¡æ¿ä¸­çš„è¡Œä¸ºï¼ˆActionï¼‰åŒ…æ‹¬æ•°æ®è¯„ä¼°ï¼ˆData Evaluationï¼‰å’Œæ§åˆ¶é€»è¾‘ï¼Œä¸”éœ€è¦ä½¿ç”¨åŒå±‚å¤§æ‹¬å·ï¼ˆ{{ å’Œ }}ï¼‰åŒ…è£¹ã€‚é™¤è¡Œä¸ºä»¥å¤–çš„ä»»ä½•å†…å®¹éƒ½ä¼šåŸæ ·è¾“å‡ºä¸åšä¿®æ”¹ã€‚ æ¨¡æ¿è§£æå®Œæˆåï¼Œä»è®¾è®¡ä¸Šå¯ä»¥å¹¶å‘åœ°è¿›è¡Œæ¸²æŸ“ï¼Œä½†è¦æ³¨æ„è¢«æ¸²æŸ“å¯¹è±¡çš„å¹¶å‘å®‰å…¨æ€§ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ¨¡æ¿å¯ä»¥åŒæ—¶ä¸ºå¤šä¸ªå®¢æˆ·ç«¯çš„å“åº”è¿›è¡Œæ¸²æŸ“ï¼Œå› ä¸ºè¾“å‡ºå¯¹è±¡ï¼ˆWriterï¼‰æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œä½†æ˜¯è¢«æ¸²æŸ“çš„å¯¹è±¡å¯èƒ½æœ‰å„è‡ªçš„çŠ¶æ€å’Œæ—¶æ•ˆæ€§ã€‚","text_tokens":["åŒ…æ‹¬","æ•°æ®","ä½†æ˜¯","ä½†","åŒ…è£¹","å¤§æ‹¬å·","ä¸","è¿›è¡Œ","ä»","æ´¾ç”Ÿ","ç»™å®š","ä½ç½®","æ¥","ä¸”","dot","è¡Œä¸º","å","åœ°","ç›¸äº’","ï¼‰","éƒ½","å…·ä½“","ç¼–ç ","æ¨¡æ¿"," ","å¤šä¸ª","ç»“æ„","è¿™äº›","è®¾è®¡","æ‹¬å·","å¹¶","æ—¶æ•ˆæ€§","äº","ä»£ç ","å®Œæˆ","8","æ³¨è§£","ç›¸åŒ",".","å¯ä»¥","ä¿®æ”¹","åš","çš„","é€»è¾‘","æ ¹æ®","ä¸","ä½“ä¸­","ä¾‹å¦‚","ä»»ä½•","æ®µ","åŒæ—¶","å¹¶å‘","æ˜¯","æ—¶æ•ˆ","åº”ç”¨","æ§åˆ¶","åŒå±‚","{","å®‰å…¨æ€§","å®¢æˆ·","å½“å‰","ã€‚","å®‰å…¨","data","æ“ä½œ","å¯¹è±¡","æœ‰","åŸæ ·","annotation","æŒ‡","é”®å","å’Œ","æ‰§è¡Œ","é™¤","è¦","å¯èƒ½","-","æ¸²æŸ“","çŠ¶æ€","è§£æ","å°†","æŒ‰åº","ï¼Œ","utf","go","å› ä¸º","ç‚¹","å­—","ä½¿ç”¨","æ–‡ä»¶","ï¼ˆ","è¯­è¨€","æ˜¾ç¤º","action","å…ƒç´ ","æ“ä½œç¬¦","éœ€ä¸º","æˆ–","map","ä¸Š","æ‰€æœ‰","è¾“å‡º","æ•°æ®ç»“æ„","ä¼š","æ³¨æ„","ä¸€ä¸ª","å†…å®¹","å“åº”","ä¾æ®","è®¾å®š","å„è‡ª","å®¢æˆ·ç«¯","ä¸º","ä»¥å¤–","}","ä¸€èˆ¬","evaluation","éœ€è¦","writer","ä¸­","ç‹¬ç«‹","è¢«","\"","æºä»£ç ","è¯„ä¼°"],"title":"ç‰¹æ€§","title_tokens":["ç‰¹æ€§"]},{"location":"Golang/Go-Web/02 BasicTemplateUsage/#_3","text":"","text_tokens":[],"title":"å¦‚ä½•ä½¿ç”¨æ¨¡æ¿","title_tokens":["å¦‚ä½•","æ¨¡æ¿","ä½¿ç”¨"]},{"location":"Golang/Go-Web/02 BasicTemplateUsage/#_4","text":"package main import ( \"fmt\" \"text/template\" \"log\" \"net/http\" ) func main () { http . HandleFunc ( \"/\" , func ( w http . ResponseWriter , r * http . Request ) { // åˆ›å»ºæ¨¡æ¿å¯¹è±¡å¹¶è§£ææ¨¡æ¿å†…å®¹ tmpl , err := template . New ( \"test\" ). Parse ( \"Hello world!\" ) if err != nil { fmt . Fprintf ( w , \"Parse: %v\" , err ) return } // è°ƒç”¨æ¨¡æ¿å¯¹è±¡çš„æ¸²æŸ“æ–¹æ³• err = tmpl . Execute ( w , nil ) if err != nil { fmt . Fprintf ( w , \"Excute: %v\" , err ) return } }) log . Println ( \"starting HTTP server...\" ) log . Fatal ( http . ListenAndServe ( \":8000\" , nil )) } 1. å¼•å…¥ text/template åŒ…. 2. è°ƒç”¨ template.New æ–¹æ³•æ ¹æ®ç»™å®šçš„åç§°æ–°å»ºæ¨¡æ¿, è¿”å›ä¸€ä¸ª *template.Template å¯¹è±¡. 3. *template.Template å¯¹è±¡çš„ Parse æ–¹æ³•æ¥å—å­—ç¬¦ä¸²å‚æ•°(æ–‡æœ¬æ¨¡æ¿å†…å®¹), è§£æå¹¶è¿”å›è§£æä¸­é‡åˆ°çš„é”™è¯¯. 4. è°ƒç”¨ template.Execute æ¸²æŸ“æ¨¡æ¿, å‚æ•°åˆ†åˆ«ä¸º è¾“å‡ºå¯¹è±¡ å’Œ æŒ‡å®šæ•°æ®å¯¹è±¡ , å®ç°äº† io.Writer æ¥å£çš„å®ä¾‹éƒ½å¯ä»¥ä½œä¸ºè¾“å‡ºå¯¹è±¡.","text_tokens":["æ•°æ®","handlefunc","http",",",":","package","ç»™å®š","...","4","new","test","éƒ½","import","æ–¹æ³•","æ¥å—","æ¨¡æ¿"," ","listenandserve","é”™è¯¯","tmpl","net","å¹¶","å­—ç¬¦ä¸²","è¿”å›","io","2","starting",".","æ–°å»º","å¯ä»¥","çš„","æ ¹æ®","fatal","execute","server","å­—ç¬¦","println","åˆ†åˆ«","{","if","template","request","æŒ‡å®š","åç§°","å¯¹è±¡",")","return","hello","æ¥å£","é‡åˆ°","text","fmt","å¼•å…¥","å’Œ","æ–‡æœ¬","err","åŒ…","æ¸²æŸ“","=","/","è§£æ","fprintf","å®ä¾‹","è°ƒç”¨","parse","responsewriter","excute","å‚æ•°","r","v","*","!","1","äº†","w","åˆ›å»º","8000","3","è¾“å‡º","ä¸€ä¸ª","å†…å®¹","(","å®ç°","ä¸º","%","ä½œä¸º","}","writer","nil","ä¸­","\"","func","log","world","main"],"title":"å®ä¾‹","title_tokens":["å®ä¾‹"]},{"location":"Golang/Go-Web/02 BasicTemplateUsage/#_5","text":"package main import ( \"net/http\" \"log\" ) func main () { http . HandleFunc ( \"/\" , func ( w http . ResponseWriter , r * http . Reqeust ){ w . Write ([] byte ( r . URL . QUERY (). GET ( \"val\" ))) }) log . Println ( \"starting HTTP serve...\" ) log . Fatal ( http . ListenAndServe ( \":8000\" , nil )) } HTTPåè®®é€šè¿‡ GET è¯·æ±‚è·å–URLå‚æ•°(URLä¸­?åçš„å€¼). è°ƒç”¨ *http.Request å¯¹è±¡çš„ URL.QUERY().GET() æ–¹æ³•. package main import ( \"fmt\" \"text/template\" \"log\" \"net/http\" ) func main () { http . HandleFunc ( \"/\" , func ( w http . ResponseWriter , r * http . Request ) { // åˆ›å»ºæ¨¡æ¿å¹¶è§£æå†…å®¹ tmpl , err := template . New ( \"test\" ). Parse ( \"The value is: {{.}}\" ) if err != nil { fmt . Fprintf ( w , \"Parse: %v\" , err ) return } // è·å–URLå‚æ•°çš„å€¼ val := r . URL . Query (). Get ( \"val\" ) // è°ƒç”¨æ¨¡æ¿å¯¹è±¡æ¸²æŸ“æ–¹æ³• err = tmpl . Execute ( w , val ) if err != nil { fmt . Fprintf ( w , \"Execute: %v\" , err ) return } }) log . Println ( \"starting HTTP server...\" ) log . Fatal ( http . ListenAndServe ( \":8000\" , nil )) } æ¨¡æ¿å†…å®¹ä¿®æ”¹æˆ The value is : {{.}} , ç”¨äº† åˆ†éš”ç¬¦ å°† . æ“ä½œç¬¦åŒ…è£¹èµ·æ¥, . æ“ä½œç¬¦é»˜è®¤æŒ‡å‘ æ ¹å¯¹è±¡ , å³ template.Execute ä¸­çš„ç¬¬äºŒä¸ªå‚æ•°. åœ¨ template.Execute æ–¹æ³•ä¸­ä¼ å…¥ val , . æ“ä½œç¬¦æ¸²æŸ“è¯¥å˜é‡ val å®ç°åŠ¨æ€è¾“å‡º.","text_tokens":["handlefunc","åŒ…è£¹","serve","http",",",":","åˆ†éš”","package","...","åœ¨","å","new","test","è·å–","é»˜è®¤","import","åˆ†éš”ç¬¦","ç”¨","æ–¹æ³•","reqeust","æ¨¡æ¿"," ","listenandserve","tmpl","net","å˜é‡","å¹¶","?","starting",".","get","ä¿®æ”¹","is","æ ¹","çš„","ç¬¬äºŒ","fatal","execute","server","println","write","url","if","{","template","val","request","å€¼","æ“ä½œ","èµ·æ¥","æˆ","value","å¯¹è±¡","åŠ¨æ€",")","return","text","fmt","ä¼ å…¥","æŒ‡å‘","è¯·æ±‚","err","]","æ¸²æŸ“","=","/","è§£æ","fprintf","å°†","è°ƒç”¨","parse","äºŒä¸ª","responsewriter","åè®®","å‚æ•°","r","v","*","ç¬¬äºŒä¸ª","æ“ä½œç¬¦","!","äº†","é€šè¿‡","è¯¥","w","åˆ›å»º","8000","byte","è¾“å‡º","å³","å†…å®¹","(","å®ç°","%","}","nil","ä¸­","\"","func","query","the","log","[","main"],"title":"æ¸²æŸ“å˜é‡","title_tokens":["æ¸²æŸ“","å˜é‡"]},{"location":"Golang/Go-Web/02 BasicTemplateUsage/#_6","text":"package main import ( \"fmt\" \"text/template\" \"log\" \"net/http\" \"strconv\" ) // Inventory åº“å­˜ type Inventory struct { SKU string Name string UnitPrice float64 Quantity int64 , } func main () { http . HandleFunc ( \"/\" , func ( w http . ResponseWriter , r * http . Request ) { tmpl , err := template . New ( \"test\" ). Parse ( `Inventory SKU: {{.SKU}} Name: {{.Name}} UnitPrice: {{.UnitPrice}} Quantity: {{.Quantity}} ` ) if err != nil { fmt . Fprintf ( w , \"Parse:%v\" , err ) return } // æ ¹æ®URLæŸ¥è¯¢å‚æ•°çš„å€¼åˆ›å»ºInventoryå®ä¾‹ inventory := & Inventory { SKU : r . URL . Query (). Get ( \"sku\" ), Name : r . URL . Query (). Get ( \"name\" ), } // æ•°æ®å¤„ç† inventory . UnitPrice , _ = strconv . ParseFloat ( r . URL . Query (). Get ( \"unitPrice\" ), 64 ) inventory . Quantity , _ = strconv . ParseInt ( r . URL . Query (). Get ( \"quantity\" ), 10 , 64 ) // æ¸²æŸ“ err = tmpl . Execute ( w , inventory ) if err != nil { fmt . Fprintf ( w , \"Execute: %v\" , err ) return } }) log . Println ( \"start HTTP serve...\" ) log . Fatal ( http . ListenAndServe ( \":8000\" , nil )) } template.Execute çš„ç¬¬äºŒä¸ªå‚æ•°ç±»å‹ä¸º interface{} , å¯ä»¥ä¼ å…¥ä»»ä½•ç±»å‹çš„å‚æ•°. func ( t * Template ) Execute ( wr io . Writer , data interface {}) error { if err := t . escape (); err != nil { return err } return t . text . Execute ( wr , data ) } http/template ä¼šæ ¹æ®ä¼ å…¥çš„ æ ¹å¯¹è±¡ è¿›è¡Œåº•å±‚ç±»å‹åˆ†æ, è‡ªåŠ¨è¯†åˆ«å˜é‡, æ­¤æ—¶çš„ . æ“ä½œç¬¦ä»£è¡¨ inventory ç»“æ„ä½“, å› æ­¤å¯ä»¥è°ƒç”¨ inventory çš„å„ä¸ªå±æ€§. åœ¨ Parse çš„æ—¶å€™ç”¨åå¼•å·``å°†ç»“æ„ä½“åŒ…èµ·æ¥.","text_tokens":["å¼•å·","æ•°æ®","å±æ€§","handlefunc","serve","http","_","è¿›è¡Œ",",","wr","æ—¶å€™","name",":","package","...","åœ¨","new","test","strconv","`","è¯†åˆ«","import","ç”¨"," ","listenandserve","ç»“æ„","int64","tmpl","parsefloat","net","å˜é‡","interface","io","10",".","æŸ¥è¯¢","å¯ä»¥","get","æ ¹","çš„","æ ¹æ®","ç¬¬äºŒ","fatal","execute","inventory","64","ä»»ä½•","println","url","{","if","template","t","request","å€¼","ä½“åŒ…","data","æ“ä½œ","èµ·æ¥","å¯¹è±¡",")","return","start","text","fmt","ä¼ å…¥","string","error","åº“å­˜","sku","æ•°æ®å¤„ç†","ç±»å‹","err","è‡ªåŠ¨è¯†åˆ«","æ¸²æŸ“","=","/","fprintf","å®ä¾‹","å°†","è°ƒç”¨","å› æ­¤","parse","åˆ†æ","äºŒä¸ª","responsewriter","è‡ªåŠ¨","quantity","&","å‚æ•°","struct","r","v","åº•å±‚","*","ä½“","ç¬¬äºŒä¸ª","æ“ä½œç¬¦","!","type","ä»£è¡¨","w",";","åˆ›å»º","å¤„ç†","8000","å„ä¸ª","æ­¤æ—¶","ä¼š","(","å","ä¸º","float64","%","}","unitprice","writer","parseint","nil","escape","\"","func","query","log","main"],"title":"æ¸²æŸ“å¤æ‚å¯¹è±¡","title_tokens":["å¤æ‚","æ¸²æŸ“","å¯¹è±¡"]},{"location":"Golang/Go-Web/02 BasicTemplateUsage/#_7","text":"func ( i * Inventory ) Subtotal () float64 { return i . UnitPrice * float64 ( i . Quantity ) } //******************************// http . HandleFunc ( \"/\" , func ( w http . ResponseWriter , r * http . Request ) { tmpl , err := template . New ( \"test\" ). Parse ( `Inventory SKU: {{.SKU}} Name: {{.Name}} UnitPrice: {{.UnitPrice}} Quantity: {{.Quantity}} Subtotal: {{.Subtotal}} ` )","text_tokens":["r","*",".","handlefunc","http",",","w",":","name","sku","err","new","test","`","inventory","=","(","/","float64","}","{"," ","subtotal","template","request","unitprice","parse","\"","tmpl","func",")","i","responsewriter","quantity","return"],"title":"æ¸²æŸ“ä¸­è°ƒç”¨ç»“æ„ä½“çš„æ–¹æ³•","title_tokens":["æ¸²æŸ“","ä¸­","çš„","ä½“","æ–¹æ³•","è°ƒç”¨","ç»“æ„"]},{"location":"Golang/Go-Web/02 BasicTemplateUsage/#map","text":"package main import ( \"fmt\" \"log\" \"net/http\" \"strconv\" \"text/template\" ) func main () { http . HandleFunc ( \"/\" , func ( w http . ResponseWriter , r * http . Request ) { // åˆ›å»ºæ¨¡æ¿å¯¹è±¡å¹¶è§£ææ¨¡æ¿å†…å®¹ tmpl , err := template . New ( \"test\" ). Parse ( `Inventory SKU: {{.SKU}} Name: {{.Name}} UnitPrice: {{.UnitPrice}} Quantity: {{.Quantity}} ` ) if err != nil { fmt . Fprintf ( w , \"Parse: %v\" , err ) return } // ç›´æ¥å°†URL æŸ¥è¯¢å‚æ•°çš„å€¼èµ‹å€¼ç»™å˜é‡ sku := r . URL . Query (). Get ( \"sku\" ) name := r . URL . Query (). Get ( \"name\" ) unitPrice , _ := strconv . ParseFloat ( r . URL . Query (). Get ( \"unitPrice\" ), 64 ) quantity , _ := strconv . ParseInt ( r . URL . Query (). Get ( \"quantity\" ), 10 , 64 ) err = tmpl . Execute ( w , map [ string ] interface {}{ \"SKU\" : sku , \"Name\" : name , \"UnitPrice\" : unitPrice , \"Quantity\" : quantity , }) if err != nil { fmt . Fprintf ( w , \"Execute: %v\" , err ) return } }) log . Println ( \"Starting HTTP server...\" ) log . Fatal ( http . ListenAndServe ( \"localhost:8000\" , nil )) } 1. ä¼ é€’ç»™ Execute ä¸€ä¸ª map[string]interface{} ä½œä¸ºæ¨¡æ¿å¯¹è±¡,å¯ä»¥ä¼ å…¥ä»»æ„ç±»å‹çš„å€¼, å°†ç»“æ„ä½“çš„æ‰€æœ‰å€¼éƒ½ä¼ å…¥. 2. ä¸å†éœ€è¦å•ç‹¬åˆ›å»ºå®ä¾‹, åªéœ€è¦é€šè¿‡ r.URL.Query().Get(valName) è·å–URLæŸ¥è¯¢å‚æ•°çš„å€¼. 3. å…¶ä¸­æ•°å€¼éœ€è¦ç”¨åˆ° strconv.ParseInt/ParseFloat è¿›è¡Œè½¬åŒ–","text_tokens":["ä¸å†","handlefunc","http","_","è¿›è¡Œ",",",":","name","package","...","new","test","localhost","è·å–","strconv","`","ç»™","éƒ½","import","æ¨¡æ¿"," ","è½¬åŒ–","listenandserve","ç»“æ„","tmpl","parsefloat","net","å˜é‡","interface","å¹¶","èµ‹å€¼","10","2","starting",".","æŸ¥è¯¢","å¯ä»¥","get","çš„","fatal","execute","inventory","64","server","println","url","{","if","template","request","å€¼","å¯¹è±¡",")","return","text","fmt","ä¼ å…¥","string","sku","ç”¨åˆ°","ä»»æ„","ç±»å‹","valname","err","]","=","/","è§£æ","fprintf","å°†","å®ä¾‹","ä¼ é€’","parse","responsewriter","quantity","å‚æ•°","r","v","åª","*","ä½“","æ•°å€¼","!","1","é€šè¿‡","å…¶ä¸­","w","åˆ›å»º","map","8000","æ‰€æœ‰","3","ä¸€ä¸ª","å†…å®¹","(","ä½œä¸º","%","}","unitprice","éœ€è¦","å•ç‹¬","parseint","nil","\"","func","ç›´æ¥","query","log","[","main"],"title":"mapç±»å‹ä½œä¸ºæ¨¡æ¿è·Ÿå¯¹è±¡","title_tokens":["map","å¯¹è±¡","è·Ÿ","ä½œä¸º","ç±»å‹","æ¨¡æ¿"]},{"location":"Golang/Go-Web/02 BasicTemplateUsage/#_8","text":"tmpl , err := template . New ( \"test\" ). Parse ( `Inventory{{/* æ‰“å°å‚æ•°çš„å€¼ */}} SKU: {{.SKU}} Name: {{.Name}} UnitPrice: {{.UnitPrice}} Quantity: {{.Quantity}} ` ) 1. é€šè¿‡ {{}} åŒå±‚å¤§æ‹¬å·å’Œ /**/ æ‹¬èµ·æ¥çš„å€¼æ˜¯æ³¨é‡Š","text_tokens":["*",".","1","å¤§æ‹¬å·","é€šè¿‡",",",":","name","å’Œ","çš„","sku","err","new","test","`","æ‰“å°","inventory","æ˜¯","=","(","/","åŒå±‚","æ‹¬","}","{"," ","template","å€¼","parse","unitprice","èµ·æ¥","\"","tmpl",")","æ‹¬å·","quantity","æ³¨é‡Š","å‚æ•°"],"title":"æ³¨é‡Š","title_tokens":["æ³¨é‡Š"]},{"location":"Golang/Go-Web/02 BasicTemplateUsage/#_9","text":"template.New æ–°å»ºæ¨¡æ¿, è¿”å› *template.Template å¯¹è±¡ è°ƒç”¨ *template.Template å¯¹è±¡çš„ Parse æ–¹æ³•è§£ææ¨¡æ¿ ä¼ å…¥æ¨¡æ¿å®ä¾‹ æ•°æ®å¤„ç† strconv è°ƒç”¨ *template.Template å¯¹è±¡çš„ Execute æ–¹æ³•æ¸²æŸ“æ¨¡æ¿","text_tokens":["æ•°æ®","*",".","æ–°å»º","ä¼ å…¥",",","å¤„ç†","çš„","æ•°æ®å¤„ç†","new","strconv","execute","æ¸²æŸ“","è§£æ","å®ä¾‹","æ–¹æ³•","è°ƒç”¨","æ¨¡æ¿","template"," ","parse","å¯¹è±¡","è¿”å›"],"title":"æ¨¡æ¿æµç¨‹","title_tokens":["æµç¨‹","æ¨¡æ¿"]},{"location":"Golang/Go-Web/03 AdvanceTemplateUsage/","text":"03ï¼šè¿›é˜¶æ¨¡æ¿ç”¨æ³• åœ¨æ¨¡æ¿ä¸­å®šä¹‰å˜é‡ package main import ( \"fmt\" \"log\" \"net/http\" \"text/template\" ) func main () { http . HandleFunc ( \"/\" , func ( w http . ResponseWriter , r * http . Request ) { tmpl , err := template . New ( \"test\" ). Parse ( ` {{$name := \"Alice\"}} {{$age := 18}} {{$round2 := true}} Name: {{$name}} Age: {{$age}} Round2: {{$round2}} ` ) if err != nil { fmt . Fprintf ( w , \"Parse: %v\" , err ) return } err = tmpl . Execute ( w , nil ) if err != nil { fmt . Fprintf ( w , \"Execute: %v\" , err ) return } }) log . Println ( \"starting HTTP serve...\" ) log . Fatal ( http . ListenAndServe ( \":8000\" , nil )) } ç”¨ç¾å…ƒç¬¦å· $ ä½œä¸ºå‰ç¼€è¡¨ç¤ºå˜ $name , $age å˜é‡çš„å®šä¹‰/èµ‹å€¼å¿…é¡»ä½¿ç”¨ := è¯­æ³• ç›´æ¥é€šè¿‡ {{$VarName}} è°ƒç”¨ æ‰€æœ‰å˜é‡çš„æ“ä½œéƒ½å±äºæ¨¡æ¿è¯­æ³•çš„ä¸€éƒ¨åˆ†,éœ€è¦ç”¨ {{}} æ‹¬èµ·æ¥ ä¿®æ”¹å˜é‡çš„å€¼ ... tmpl , err := template . New ( \"test\" ). Parse ( ` {{$name := \"Alice\"}} {{$age := 18}} {{$round2 := true}} Name: {{$name}} Age: {{$age}} Round2: {{$round2}} {{$name = \"K\"}} Name: {{$name}} ` ) ... ç±»ä¼¼èµ‹å€¼, ç”¨ = å·ç›´æ¥ä¿®æ”¹å˜é‡å€¼ åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨æ¡ä»¶åˆ¤æ–­(if) package main import ( \"fmt\" \"log\" \"net/http\" \"strconv\" \"text/template\" ) func main () { http . HandleFunc ( \"/\" , func ( w http . ResponseWriter , r * http . Request ) { tmpl , err := template . New ( \"test\" ). Parse ( ` {{if .yIsZero}} é™¤æ•°ä¸èƒ½ä¸º0 {{else}} {{.result}} {{end}} ` ) if err != nil { fmt . Fprintf ( w , \"Parse: %v\" , err ) return } x , _ := strconv . ParseInt ( r . URL . Query (). Get ( \"x\" ), 10 , 64 ) y , _ := strconv . ParseInt ( r . URL . Query (). Get ( \"y\" ), 10 , 64 ) yIsZero := y == 0 result := 0.0 if ! yIsZero { result = float64 ( x ) / float64 ( y ) } err = tmpl . Execute ( w , map [ string ] interface {}{ \"yIsZero\" : yIsZero , \"result\" : result , }) if err != nil { fmt . Fprintf ( w , \"Execute: %v\" , err ) } }) log . Println ( \"starting HTTP serve...\" ) log . Fatal ( http . ListenAndServe ( \":8000\" , nil )) } ç”¨ {{}} å°† if é€»è¾‘è¯­å¥æ‹¬èµ·æ¥, if åé¢å¿…é¡»è¿”å›ä¸€ä¸ª bool å€¼ if è¯­å¥åŒ…æ‹¬ {{if}} , {{else}} , {{end}} ç­‰å¼å’Œä¸ç­‰å¼ eq ï¼šå½“ç­‰å¼ arg1 == arg2 æˆç«‹æ—¶ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false ne ï¼šå½“ä¸ç­‰å¼ arg1 != arg2 æˆç«‹æ—¶ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false lt ï¼šå½“ä¸ç­‰å¼ arg1 < arg2 æˆç«‹æ—¶ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false le ï¼šå½“ä¸ç­‰å¼ arg1 <= arg2 æˆç«‹æ—¶ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false gt ï¼šå½“ä¸ç­‰å¼ arg1 > arg2 æˆç«‹æ—¶ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false ge ï¼šå½“ä¸ç­‰å¼ arg1 >= arg2 æˆç«‹æ—¶ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false package main import ( \"fmt\" \"log\" \"net/http\" \"text/template\" ) func main () { http . HandleFunc ( \"/\" , func ( w http . ResponseWriter , r * http . Request ) { tmpl , err := template . New ( \"test\" ). Parse ( ` {{$name1 := \"alice\"}} {{$name2 := \"bob\"}} {{$age1 := 18}} {{$age2 := 23}} {{if eq $age1 $age2}} å¹´é¾„ç›¸åŒ {{else}} å¹´é¾„ä¸åŒ {{end}} {{if ne $name1 $name2}} åå­—ä¸ç›¸åŒ {{end}} ` ) if err != nil { fmt . Fprintf ( w , \"Parse: %v\" , err ) return } err = tmpl . Execute ( w , nil ) if err != nil { fmt . Fprintf ( w , \"Execute: %v\" , err ) return } }) log . Println ( \"Starting HTTP server...\" ) log . Fatal ( http . ListenAndServe ( \"localhost:8000\" , nil )) } è¿­ä»£æ“ä½œ(range) Go è¯­è¨€ä¸­ä¸€èˆ¬æ¥è¯´æœ‰ä¸‰ç§ç±»å‹å¯ä»¥è¿›è¡Œè¿­ä»£æ“ä½œï¼Œæ•°ç»„ï¼ˆArrayï¼‰ã€åˆ‡ç‰‡ï¼ˆSliceï¼‰å’Œ map ç±»å‹ package main import ( \"fmt\" \"log\" \"net/http\" \"text/template\" ) func main () { http . HandleFunc ( \"/\" , func ( w http . ResponseWriter , r * http . Request ) { tmpl , err := template . New ( \"test\" ). Parse ( ` {{range $name := .Names}} {{$name}} {{end}} ` ) if err != nil { fmt . Fprintf ( w , \"Parse: %v\" , err ) return } err = tmpl . Execute ( w , map [ string ] interface {}{ \"Names\" : [] string { \"Alice\" , \"Bob\" , \"Carol\" , \"David\" , }, }) if err != nil { fmt . Fprintf ( w , \"Execute: %v\" , err ) return } }) log . Println ( \"Starting HTTP server...\" ) log . Fatal ( http . ListenAndServe ( \"localhost:8000\" , nil )) } è·å¾—è¿­ä»£å…ƒç´ çš„ç´¢å¼• ... func main () { http . HandleFunc ( \"/\" , func ( w http . ResponseWriter , r * http . Request ) { // åˆ›å»ºæ¨¡æ¿å¯¹è±¡å¹¶è§£ææ¨¡æ¿å†…å®¹ tmpl , err := template . New ( \"test\" ). Parse ( ` {{range $i, $name := .Names}} {{$i}}. {{$name}} {{end}} ` ) ... mapç±»å‹ ... func main () { http . HandleFunc ( \"/\" , func ( w http . ResponseWriter , r * http . Request ) { // åˆ›å»ºæ¨¡æ¿å¯¹è±¡å¹¶è§£ææ¨¡æ¿å†…å®¹ tmpl , err := template . New ( \"test\" ). Parse ( ` {{range $name, $val := .}} {{$name}}: {{$val}} {{end}} ` ) ... // è°ƒç”¨æ¨¡æ¿å¯¹è±¡çš„æ¸²æŸ“æ–¹æ³• err = tmpl . Execute ( w , map [ string ] interface {}{ \"Names\" : [] string { \"Alice\" , \"Bob\" , \"Carol\" , \"David\" , }, \"Numbers\" : [] int { 1 , 3 , 5 , 7 }, }) ... } with tmpl , err := template . New ( \"test\" ). Parse ( `Inventory {{with .Inventory}} SKU: {{.SKU}} Name: {{.Name}} UnitPrice: {{.UnitPrice}} Quantity: {{.Quantity}} {{end}} ` ) //****************************// err = tmpl . Execute ( w , map [ string ] interface {}{ \"Inventory\" : Inventory { // ç±»å‹ SKU : \"11000\" , Name : \"Phone\" , UnitPrice : 699.99 , Quantity : 666 , }, }) 1. ç”¨ {{with}} æ¥æ›¿ä»£ç›¸å…³å®ä¾‹\" Inventory \". ç©ºç™½ç¬¦å·å¤„ç† {{- è¡¨ç¤ºå‰”é™¤æ¨¡æ¿å†…å®¹ å·¦ä¾§ çš„æ‰€æœ‰ç©ºç™½ç¬¦å·, -}} è¡¨ç¤ºå‰”é™¤æ¨¡æ¿å†…å®¹ å³ä¾§ çš„æ‰€æœ‰ç©ºç™½ç¬¦å·. ... func main () { http . HandleFunc ( \"/\" , func ( w http . ResponseWriter , r * http . Request ) { // åˆ›å»ºæ¨¡æ¿å¯¹è±¡å¹¶è§£ææ¨¡æ¿å†…å®¹ tmpl , err := template . New ( \"test\" ). Parse ( `Inventory {{- with .Inventory}} SKU: {{.SKU}} Name: {{.Name}} UnitPrice: {{.UnitPrice}} Quantity: {{.Quantity}} {{- end}} ` ) ...","text_tokens":["åŒ…æ‹¬","æ—¶","ç´¢å¼•","æ¡ä»¶","handlefunc","serve","ç¬¦å·","http","_","ä¸","è¿›è¡Œ",",",":","name","package","è¿­ä»£","23","...","æ¥","åœ¨","new","test","localhost","å¿…é¡»","strconv","`","ï¼š","result","phone","éƒ½","ä¸€èˆ¬æ¥è¯´","ï¼‰","import","æ–¹æ³•","å³ä¾§","æ¨¡æ¿"," ","listenandserve","å‰”é™¤",">","ç¾å…ƒ","tmpl","11000","å˜é‡","net","interface","bool","main","name1","å¹¶","å®šä¹‰","è¿”å›","åé¢","èµ‹å€¼","10","å¦åˆ™","starting","age","ç›¸åŒ",".","true","else","carol","å¯ä»¥","get","round2","with","ä¿®æ”¹","le","$","ä¸ç­‰å¼","arg1","çš„","y","é€»è¾‘","age2","ç©ºç™½","lt","03","é‡å€¼","åˆ¤æ–­","å¹´é¾„","ç›¸å…³","fatal","execute","64","inventory","false","server","k","println","ä¸‰ç§","ge","url","{","if","template","val","request","å€¼","æ“ä½œ","èµ·æ¥","gt","ä¸€éƒ¨","ne","å¯¹è±¡","0","ç±»ä¼¼",")","åå­—","æœ‰","i","return","è¯­å¥","slice","ä¸ç­‰","age1","text","fmt","array","æˆç«‹","éƒ¨åˆ†","string","è·å¾—","è¡¨ç¤º","names","5","699.99","å’Œ","ã€","sku","666","ç±»å‹","err","ä¸åŒ","æ•°ç»„","]","å·","æ¸²æŸ“","-","=","/","fprintf","å°†","è§£æ","å®ä¾‹","è¯­æ³•","ï¼Œ","è°ƒç”¨","go","å˜","numbers","parse","ä¸€éƒ¨åˆ†","ä½¿ç”¨","å½“","responsewriter","ï¼ˆ","quantity","å˜é‡å€¼","david","range","r","<","v","bob","è¯­è¨€","*","å…ƒç´ ","è¿›é˜¶","!","1","7","é€šè¿‡","å‰ç¼€","å·¦ä¾§","name2","w","18","åˆ›å»º","end","8000","map","åˆ‡ç‰‡","å¤„ç†","æ‰€æœ‰","3","ç”¨æ³•","eq","int","ç­‰å¼","æ›¿ä»£","ä¸€ä¸ª","x","å†…å®¹","(","yiszero","é™¤æ•°","ä¸èƒ½","ä½œä¸º","%","ä¸º","æ‹¬","}","float64","ä¸€èˆ¬","arg2","unitprice","éœ€è¦","parseint","ä¸­","nil","alice","\"","0.0","func","æ¥è¯´","ç›´æ¥","query","log","[","varname","ç”¨","å±äº"],"title":"03ï¼šè¿›é˜¶æ¨¡æ¿ç”¨æ³•","title_tokens":["03","ç”¨æ³•","æ¨¡æ¿","è¿›é˜¶","ï¼š"]},{"location":"Golang/Go-Web/03 AdvanceTemplateUsage/#03","text":"","text_tokens":[],"title":"03ï¼šè¿›é˜¶æ¨¡æ¿ç”¨æ³•","title_tokens":["03","ç”¨æ³•","æ¨¡æ¿","è¿›é˜¶","ï¼š"]},{"location":"Golang/Go-Web/03 AdvanceTemplateUsage/#_1","text":"package main import ( \"fmt\" \"log\" \"net/http\" \"text/template\" ) func main () { http . HandleFunc ( \"/\" , func ( w http . ResponseWriter , r * http . Request ) { tmpl , err := template . New ( \"test\" ). Parse ( ` {{$name := \"Alice\"}} {{$age := 18}} {{$round2 := true}} Name: {{$name}} Age: {{$age}} Round2: {{$round2}} ` ) if err != nil { fmt . Fprintf ( w , \"Parse: %v\" , err ) return } err = tmpl . Execute ( w , nil ) if err != nil { fmt . Fprintf ( w , \"Execute: %v\" , err ) return } }) log . Println ( \"starting HTTP serve...\" ) log . Fatal ( http . ListenAndServe ( \":8000\" , nil )) } ç”¨ç¾å…ƒç¬¦å· $ ä½œä¸ºå‰ç¼€è¡¨ç¤ºå˜ $name , $age å˜é‡çš„å®šä¹‰/èµ‹å€¼å¿…é¡»ä½¿ç”¨ := è¯­æ³• ç›´æ¥é€šè¿‡ {{$VarName}} è°ƒç”¨ æ‰€æœ‰å˜é‡çš„æ“ä½œéƒ½å±äºæ¨¡æ¿è¯­æ³•çš„ä¸€éƒ¨åˆ†,éœ€è¦ç”¨ {{}} æ‹¬èµ·æ¥","text_tokens":["handlefunc","serve","ç¬¦å·","http",",",":","name","package","...","new","test","å¿…é¡»","`","éƒ½","import","æ¨¡æ¿"," ","listenandserve","ç¾å…ƒ","tmpl","net","å˜é‡","main","å®šä¹‰","èµ‹å€¼","starting","age",".","true","round2","$","çš„","fatal","execute","println","{","if","template","request","æ“ä½œ","èµ·æ¥","ä¸€éƒ¨",")","return","text","fmt","éƒ¨åˆ†","è¡¨ç¤º","err","=","/","fprintf","è¯­æ³•","è°ƒç”¨","å˜","parse","ä¸€éƒ¨åˆ†","ä½¿ç”¨","responsewriter","r","v","*","!","é€šè¿‡","å‰ç¼€","w","18","8000","æ‰€æœ‰","(","ä½œä¸º","%","æ‹¬","}","éœ€è¦","nil","alice","\"","func","ç›´æ¥","log","varname","ç”¨","å±äº"],"title":"åœ¨æ¨¡æ¿ä¸­å®šä¹‰å˜é‡","title_tokens":["ä¸­","å˜é‡","æ¨¡æ¿","åœ¨","å®šä¹‰"]},{"location":"Golang/Go-Web/03 AdvanceTemplateUsage/#_2","text":"... tmpl , err := template . New ( \"test\" ). Parse ( ` {{$name := \"Alice\"}} {{$age := 18}} {{$round2 := true}} Name: {{$name}} Age: {{$age}} Round2: {{$round2}} {{$name = \"K\"}} Name: {{$name}} ` ) ... ç±»ä¼¼èµ‹å€¼, ç”¨ = å·ç›´æ¥ä¿®æ”¹å˜é‡å€¼","text_tokens":["èµ‹å€¼","age",".","true","round2","ä¿®æ”¹",",","18",":","$","name","...","é‡å€¼","err","new","test","`","å·","=","(","k","}","{"," ","template","parse","alice","\"","tmpl","å˜é‡","ç±»ä¼¼",")","ç›´æ¥","å˜é‡å€¼","ç”¨"],"title":"ä¿®æ”¹å˜é‡çš„å€¼","title_tokens":["çš„","å€¼","å˜é‡","ä¿®æ”¹"]},{"location":"Golang/Go-Web/03 AdvanceTemplateUsage/#if","text":"package main import ( \"fmt\" \"log\" \"net/http\" \"strconv\" \"text/template\" ) func main () { http . HandleFunc ( \"/\" , func ( w http . ResponseWriter , r * http . Request ) { tmpl , err := template . New ( \"test\" ). Parse ( ` {{if .yIsZero}} é™¤æ•°ä¸èƒ½ä¸º0 {{else}} {{.result}} {{end}} ` ) if err != nil { fmt . Fprintf ( w , \"Parse: %v\" , err ) return } x , _ := strconv . ParseInt ( r . URL . Query (). Get ( \"x\" ), 10 , 64 ) y , _ := strconv . ParseInt ( r . URL . Query (). Get ( \"y\" ), 10 , 64 ) yIsZero := y == 0 result := 0.0 if ! yIsZero { result = float64 ( x ) / float64 ( y ) } err = tmpl . Execute ( w , map [ string ] interface {}{ \"yIsZero\" : yIsZero , \"result\" : result , }) if err != nil { fmt . Fprintf ( w , \"Execute: %v\" , err ) } }) log . Println ( \"starting HTTP serve...\" ) log . Fatal ( http . ListenAndServe ( \":8000\" , nil )) } ç”¨ {{}} å°† if é€»è¾‘è¯­å¥æ‹¬èµ·æ¥, if åé¢å¿…é¡»è¿”å›ä¸€ä¸ª bool å€¼ if è¯­å¥åŒ…æ‹¬ {{if}} , {{else}} , {{end}}","text_tokens":["åŒ…æ‹¬","handlefunc","serve","http","_",",",":","package","...","new","test","å¿…é¡»","strconv","`","result","import"," ","listenandserve","tmpl","net","interface","bool","main","è¿”å›","åé¢","10","starting",".","else","get","y","é€»è¾‘","fatal","execute","64","println","url","{","if","template","request","å€¼","èµ·æ¥","0",")","return","è¯­å¥","text","fmt","string","err","]","=","/","fprintf","å°†","parse","responsewriter","r","v","*","!","w","end","map","8000","ä¸€ä¸ª","x","(","yiszero","é™¤æ•°","ä¸èƒ½","ä¸º","%","float64","æ‹¬","}","parseint","nil","\"","0.0","func","query","log","[","ç”¨"],"title":"åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨æ¡ä»¶åˆ¤æ–­(if)","title_tokens":["ä¸­","ä½¿ç”¨","(","æ¡ä»¶","åˆ¤æ–­",")","æ¨¡æ¿","åœ¨","if"]},{"location":"Golang/Go-Web/03 AdvanceTemplateUsage/#_3","text":"eq ï¼šå½“ç­‰å¼ arg1 == arg2 æˆç«‹æ—¶ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false ne ï¼šå½“ä¸ç­‰å¼ arg1 != arg2 æˆç«‹æ—¶ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false lt ï¼šå½“ä¸ç­‰å¼ arg1 < arg2 æˆç«‹æ—¶ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false le ï¼šå½“ä¸ç­‰å¼ arg1 <= arg2 æˆç«‹æ—¶ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false gt ï¼šå½“ä¸ç­‰å¼ arg1 > arg2 æˆç«‹æ—¶ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false ge ï¼šå½“ä¸ç­‰å¼ arg1 >= arg2 æˆç«‹æ—¶ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false package main import ( \"fmt\" \"log\" \"net/http\" \"text/template\" ) func main () { http . HandleFunc ( \"/\" , func ( w http . ResponseWriter , r * http . Request ) { tmpl , err := template . New ( \"test\" ). Parse ( ` {{$name1 := \"alice\"}} {{$name2 := \"bob\"}} {{$age1 := 18}} {{$age2 := 23}} {{if eq $age1 $age2}} å¹´é¾„ç›¸åŒ {{else}} å¹´é¾„ä¸åŒ {{end}} {{if ne $name1 $name2}} åå­—ä¸ç›¸åŒ {{end}} ` ) if err != nil { fmt . Fprintf ( w , \"Parse: %v\" , err ) return } err = tmpl . Execute ( w , nil ) if err != nil { fmt . Fprintf ( w , \"Execute: %v\" , err ) return } }) log . Println ( \"Starting HTTP server...\" ) log . Fatal ( http . ListenAndServe ( \"localhost:8000\" , nil )) }","text_tokens":["æ—¶","handlefunc","http","ä¸",",",":","package","23","...","new","test","localhost","`","ï¼š","import"," ","listenandserve",">","tmpl","net","name1","è¿”å›","å¦åˆ™","starting","ç›¸åŒ","true",".","else","le","$","ä¸ç­‰å¼","arg1","age2","lt","å¹´é¾„","fatal","execute","false","server","println","ge","{","if","template","request","gt","ne",")","åå­—","return","ä¸ç­‰","age1","text","fmt","æˆç«‹","err","ä¸åŒ","=","/","fprintf","ï¼Œ","parse","å½“","responsewriter","r","<","v","bob","*","!","name2","w","18","end","8000","eq","ç­‰å¼","(","%","}","arg2","nil","alice","\"","func","log","main"],"title":"ç­‰å¼å’Œä¸ç­‰å¼","title_tokens":["ä¸ç­‰","å’Œ","ä¸ç­‰å¼","ç­‰å¼"]},{"location":"Golang/Go-Web/03 AdvanceTemplateUsage/#range","text":"Go è¯­è¨€ä¸­ä¸€èˆ¬æ¥è¯´æœ‰ä¸‰ç§ç±»å‹å¯ä»¥è¿›è¡Œè¿­ä»£æ“ä½œï¼Œæ•°ç»„ï¼ˆArrayï¼‰ã€åˆ‡ç‰‡ï¼ˆSliceï¼‰å’Œ map ç±»å‹ package main import ( \"fmt\" \"log\" \"net/http\" \"text/template\" ) func main () { http . HandleFunc ( \"/\" , func ( w http . ResponseWriter , r * http . Request ) { tmpl , err := template . New ( \"test\" ). Parse ( ` {{range $name := .Names}} {{$name}} {{end}} ` ) if err != nil { fmt . Fprintf ( w , \"Parse: %v\" , err ) return } err = tmpl . Execute ( w , map [ string ] interface {}{ \"Names\" : [] string { \"Alice\" , \"Bob\" , \"Carol\" , \"David\" , }, }) if err != nil { fmt . Fprintf ( w , \"Execute: %v\" , err ) return } }) log . Println ( \"Starting HTTP server...\" ) log . Fatal ( http . ListenAndServe ( \"localhost:8000\" , nil )) }","text_tokens":["handlefunc","http","è¿›è¡Œ",",",":","name","package","è¿­ä»£","...","new","test","localhost","`","ï¼‰","ä¸€èˆ¬æ¥è¯´","import"," ","listenandserve","tmpl","net","interface","starting",".","carol","å¯ä»¥","$","fatal","execute","server","println","ä¸‰ç§","{","if","template","request","æ“ä½œ",")","æœ‰","return","slice","text","fmt","array","string","names","å’Œ","ã€","ç±»å‹","err","æ•°ç»„","]","=","/","fprintf","ï¼Œ","go","parse","responsewriter","ï¼ˆ","david","range","r","è¯­è¨€","v","bob","*","!","w","åˆ‡ç‰‡","map","end","8000","(","%","}","ä¸€èˆ¬","ä¸­","nil","alice","\"","func","æ¥è¯´","log","[","main"],"title":"è¿­ä»£æ“ä½œ(range)","title_tokens":["æ“ä½œ","(","è¿­ä»£",")","range"]},{"location":"Golang/Go-Web/03 AdvanceTemplateUsage/#_4","text":"... func main () { http . HandleFunc ( \"/\" , func ( w http . ResponseWriter , r * http . Request ) { // åˆ›å»ºæ¨¡æ¿å¯¹è±¡å¹¶è§£ææ¨¡æ¿å†…å®¹ tmpl , err := template . New ( \"test\" ). Parse ( ` {{range $i, $name := .Names}} {{$i}}. {{$name}} {{end}} ` ) ...","text_tokens":["r","*",".","handlefunc","http","names",",","w",":","åˆ›å»º","$","name","end","...","err","new","test","`","å†…å®¹","=","(","/","è§£æ","}","{","æ¨¡æ¿"," ","template","request","parse","å¯¹è±¡","\"","tmpl","func",")","i","responsewriter","å¹¶","main","range"],"title":"è·å¾—è¿­ä»£å…ƒç´ çš„ç´¢å¼•","title_tokens":["çš„","è¿­ä»£","å…ƒç´ ","ç´¢å¼•","è·å¾—"]},{"location":"Golang/Go-Web/03 AdvanceTemplateUsage/#map","text":"... func main () { http . HandleFunc ( \"/\" , func ( w http . ResponseWriter , r * http . Request ) { // åˆ›å»ºæ¨¡æ¿å¯¹è±¡å¹¶è§£ææ¨¡æ¿å†…å®¹ tmpl , err := template . New ( \"test\" ). Parse ( ` {{range $name, $val := .}} {{$name}}: {{$val}} {{end}} ` ) ... // è°ƒç”¨æ¨¡æ¿å¯¹è±¡çš„æ¸²æŸ“æ–¹æ³• err = tmpl . Execute ( w , map [ string ] interface {}{ \"Names\" : [] string { \"Alice\" , \"Bob\" , \"Carol\" , \"David\" , }, \"Numbers\" : [] int { 1 , 3 , 5 , 7 }, }) ... }","text_tokens":["r","bob","*",".","handlefunc","1","string","carol","7","http","names","5",",","w",":","åˆ›å»º","$","name","end","çš„","map","3","...","int","david","err","new","test","]","`","execute","æ¸²æŸ“","å†…å®¹","=","(","/","è§£æ","æ–¹æ³•","è°ƒç”¨","}","{","æ¨¡æ¿"," ","template","numbers","val","request","parse","alice","å¯¹è±¡","\"","tmpl","func",")","interface","responsewriter","å¹¶","[","main","range"],"title":"mapç±»å‹","title_tokens":["ç±»å‹","map"]},{"location":"Golang/Go-Web/03 AdvanceTemplateUsage/#with","text":"tmpl , err := template . New ( \"test\" ). Parse ( `Inventory {{with .Inventory}} SKU: {{.SKU}} Name: {{.Name}} UnitPrice: {{.UnitPrice}} Quantity: {{.Quantity}} {{end}} ` ) //****************************// err = tmpl . Execute ( w , map [ string ] interface {}{ \"Inventory\" : Inventory { // ç±»å‹ SKU : \"11000\" , Name : \"Phone\" , UnitPrice : 699.99 , Quantity : 666 , }, }) 1. ç”¨ {{with}} æ¥æ›¿ä»£ç›¸å…³å®ä¾‹\" Inventory \".","text_tokens":["*",".","1","string","with",",","w","699.99",":","name","end","map","sku","666","ç±»å‹","æ¥","err","new","test","ç›¸å…³","phone","]","`","execute","æ›¿ä»£","inventory","=","(","/","å®ä¾‹","}","{"," ","template","unitprice","parse","\"","tmpl","11000",")","interface","quantity","[","ç”¨"],"title":"with","title_tokens":["with"]},{"location":"Golang/Go-Web/03 AdvanceTemplateUsage/#_5","text":"{{- è¡¨ç¤ºå‰”é™¤æ¨¡æ¿å†…å®¹ å·¦ä¾§ çš„æ‰€æœ‰ç©ºç™½ç¬¦å·, -}} è¡¨ç¤ºå‰”é™¤æ¨¡æ¿å†…å®¹ å³ä¾§ çš„æ‰€æœ‰ç©ºç™½ç¬¦å·. ... func main () { http . HandleFunc ( \"/\" , func ( w http . ResponseWriter , r * http . Request ) { // åˆ›å»ºæ¨¡æ¿å¯¹è±¡å¹¶è§£ææ¨¡æ¿å†…å®¹ tmpl , err := template . New ( \"test\" ). Parse ( `Inventory {{- with .Inventory}} SKU: {{.SKU}} Name: {{.Name}} UnitPrice: {{.UnitPrice}} Quantity: {{.Quantity}} {{- end}} ` ) ...","text_tokens":["r","*",".","handlefunc","ç¬¦å·","http","è¡¨ç¤º","with","å·¦ä¾§",",","w",":","ç©ºç™½","åˆ›å»º","name","çš„","sku","end","æ‰€æœ‰","...","err","new","test","`","inventory","-","å†…å®¹","=","(","/","è§£æ","å³ä¾§","}","{","æ¨¡æ¿"," ","template","request","unitprice","parse","å‰”é™¤","å¯¹è±¡","\"","tmpl","func",")","responsewriter","quantity","å¹¶","main"],"title":"ç©ºç™½ç¬¦å·å¤„ç†","title_tokens":["ç¬¦å·","ç©ºç™½","å¤„ç†"]},{"location":"Golang/Project/gee/05 HTMLTemplate/","text":"å®ç°é™æ€èµ„æºæœåŠ¡ï¼ˆStatic Resourceï¼‰ æ”¯æŒHTMLæ¨¡æ¿æ¸²æŸ“ åç«¯ä¸“æ³¨æ•°æ®ç”Ÿæˆï¼ŒRESTfulæ¥å£è¿”å›ç»“æ„åŒ–æ•°å€¼ï¼›å‰ç«¯ä¸“æ³¨ç•Œé¢è®¾è®¡å®ç°ï¼Œåªéœ€è¦è€ƒè™‘æ‹¿åˆ°æ•°æ®åå¦‚ä½•æ¸²æŸ“çš„é—®é¢˜ï¼Œå‰åç«¯è§£è€¦ã€‚ todo: é€šè¿‡ filepath çš„ç›¸å¯¹åœ°å€æ˜ å°„åˆ° /usr/web ç›®å½•ä¸‹çš„çœŸå®åœ°å€ï¼Œå°†çœŸå®åœ°å€äº¤ç»™ net/http çš„ http.FileServer å¤„ç†","text_tokens":["æ•°æ®","ç•Œé¢","åª","ç»“æ„åŒ–","todo","è€ƒè™‘","ä¸‹","fileserver","é—®é¢˜","æ•°å€¼","ç›¸å¯¹",".","filepath","é€šè¿‡","http","static","ç•Œé¢è®¾è®¡","ç›®å½•","å‰ç«¯",":","å¤„ç†","restful","çš„","æ˜ å°„","å","åœ°å€æ˜ å°„","çœŸå®","ä¸“æ³¨","åœ°å€","ï¼‰","æ¸²æŸ“","æ‹¿åˆ°","/","å°†","è€¦","å®ç°","å‰å","ï¼Œ","åˆ°","web","è¿”å›","æ¨¡æ¿","ç«¯è§£"," ","usr","ã€‚","æœåŠ¡","éœ€è¦","ç»“æ„","å¦‚ä½•","æ”¯æŒ","html","è®¾è®¡","net","ç«¯","ï¼ˆ","resource","ç”Ÿæˆ","ï¼›","èµ„æº","æ¥å£","äº¤ç»™","é™æ€"],"title":"05 HTMLTemplate","title_tokens":["htmltemplate","05"," "]},{"location":"Golang/Project/go-gin-example/01 Config/","text":"go-gin-example 01ï¼šé…ç½® Golang ç¯å¢ƒå®‰è£…é…ç½® ä¸‹è½½ é…ç½®ç¯å¢ƒå˜é‡ æ–‡ä»¶é…ç½® $ mkdir go-gin-example && cd go-gin-example $ go env -w GO111MODULE = on $ go env -w GOPROXY = https://goproxy.cn,direct $ go mod init [ MODULE_PATH ] $ ls > go.mod mkdir go-gin-example && cd go-gin-example ï¼šåˆ›å»ºå¹¶åˆ‡æ¢åˆ°é¡¹ç›®ç›®å½•ã€‚ go env -w GO111MUDOLE=on ï¼šæ‰“å¼€Go module å¼€å…³ã€‚ go env -w GOPROXY=... ï¼šè®¾ç½®GOPROXYä»£ç†ï¼Œç¬¬ä¸€ä¸ªä¸ºä¸ƒç‰›Goä»£ç†ï¼Œ direct ä¸ºGoåœ¨æ‹‰å–æ¨¡å—é‡åˆ°é”™è¯¯ä¼šå›æºåˆ°åŸæ¨¡å—ç‰ˆæœ¬çš„æºåœ°å€å»æŠ“å–ã€‚ go mod init [Module_Path] ï¼šåˆå§‹åŒ–Go moduleï¼Œäº§ç”Ÿgo.modæ–‡ä»¶ module go-gin-example go 1 .12 GOMODULEåŸºç¡€ä½¿ç”¨ go get ï¼šæ‹‰å–æ–°çš„ä¾èµ– æ‹‰å–æœ€æ–°çš„ç‰ˆæœ¬ï¼š go get golang/org/x/text@lastest æ‹‰å– master åˆ†æ”¯çš„æœ€æ–°commitï¼š go get golang.org/x/text@master go tidy ï¼šæ•´ç†ä¾","text_tokens":["åˆ†æ”¯","_",",","cd",":","ç¯å¢ƒ","...","go111mudole","åœ¨","ï¼š","env","æŠ“å–"," ","12","ä¾","gin",">","goproxy","é”™è¯¯","gomodule","åŸºç¡€","å˜é‡","ä»£ç†","æœ€æ–°","å¹¶","commit","golang","go111module",".","ç¯å¢ƒå˜é‡","ä¸ºä¸ƒç‰›","get","ç‰ˆæœ¬","$","çš„","ä¾èµ–","å®‰è£…","tidy","01","åˆ°","example","å›æº","ã€‚","ls","åˆå§‹åŒ–","mod","æºåœ°å€","module","@","lastest","é‡åˆ°","ç¬¬ä¸€","æ‰“å¼€","text","ç¬¬ä¸€ä¸ª","init","&&","on","]","åœ°å€","-","=","è®¾ç½®","/","æ•´ç†","ï¼Œ","æºåœ°","go","åˆå§‹","å»","ä½¿ç”¨","æ–‡ä»¶","å¼€å…³","é…ç½®","direct","æ–°","é¡¹ç›®","ä¸‹è½½","æ¨¡å—","äº§ç”Ÿ","1","åˆ‡æ¢","w","ç›®å½•","åˆ›å»º","mkdir","ä¼š","ä¸€ä¸ª","x","cn","ä¸º","https","æ‹‰å–","org","path","master","ç¯å¢ƒå˜","[","åŸ"],"title":"go-gin-example 01ï¼šé…ç½®","title_tokens":["-","gin","01","example"," ","go","é…ç½®","ï¼š"]},{"location":"Golang/Project/go-gin-example/01 Config/#go-gin-example-01","text":"","text_tokens":[],"title":"go-gin-example 01ï¼šé…ç½®","title_tokens":["-","gin","01","example"," ","go","é…ç½®","ï¼š"]},{"location":"Golang/Project/go-gin-example/01 Config/#golang","text":"","text_tokens":[],"title":"Golang ç¯å¢ƒå®‰è£…é…ç½®","title_tokens":["golang","ç¯å¢ƒ"," ","é…ç½®","å®‰è£…"]},{"location":"Golang/Project/go-gin-example/01 Config/#_1","text":"","text_tokens":[],"title":"ä¸‹è½½","title_tokens":["ä¸‹è½½"]},{"location":"Golang/Project/go-gin-example/01 Config/#_2","text":"","text_tokens":[],"title":"é…ç½®ç¯å¢ƒå˜é‡","title_tokens":["ç¯å¢ƒ","å˜é‡","ç¯å¢ƒå˜é‡","é…ç½®","ç¯å¢ƒå˜"]},{"location":"Golang/Project/go-gin-example/01 Config/#_3","text":"$ mkdir go-gin-example && cd go-gin-example $ go env -w GO111MODULE = on $ go env -w GOPROXY = https://goproxy.cn,direct $ go mod init [ MODULE_PATH ] $ ls > go.mod mkdir go-gin-example && cd go-gin-example ï¼šåˆ›å»ºå¹¶åˆ‡æ¢åˆ°é¡¹ç›®ç›®å½•ã€‚ go env -w GO111MUDOLE=on ï¼šæ‰“å¼€Go module å¼€å…³ã€‚ go env -w GOPROXY=... ï¼šè®¾ç½®GOPROXYä»£ç†ï¼Œç¬¬ä¸€ä¸ªä¸ºä¸ƒç‰›Goä»£ç†ï¼Œ direct ä¸ºGoåœ¨æ‹‰å–æ¨¡å—é‡åˆ°é”™è¯¯ä¼šå›æºåˆ°åŸæ¨¡å—ç‰ˆæœ¬çš„æºåœ°å€å»æŠ“å–ã€‚ go mod init [Module_Path] ï¼šåˆå§‹åŒ–Go moduleï¼Œäº§ç”Ÿgo.modæ–‡ä»¶ module go-gin-example go 1 .12","text_tokens":["go111module","æ‰“å¼€","æ¨¡å—",".","ä¸ºä¸ƒç‰›","äº§ç”Ÿ","1","_","åˆ‡æ¢","w",",","cd","init",":","$","åˆ›å»º","ç›®å½•","ç¬¬ä¸€ä¸ª","ç‰ˆæœ¬","&&","çš„","mkdir","...","go111mudole","åœ¨","on","ä¼š","]","ä¸€ä¸ª","ï¼š","åœ°å€","-","=","è®¾ç½®","/","cn","åˆ°","example","env","ï¼Œ","ä¸º","å›æº","æºåœ°","æŠ“å–"," ","go","åˆå§‹","ã€‚","å»","https","ls","åˆå§‹åŒ–","12","gin","mod",">","goproxy","æ‹‰å–","æºåœ°å€","module","é”™è¯¯","æ–‡ä»¶","path","å¼€å…³","ä»£ç†","direct","å¹¶","é¡¹ç›®","[","åŸ","é‡åˆ°","ç¬¬ä¸€"],"title":"æ–‡ä»¶é…ç½®","title_tokens":["æ–‡ä»¶","é…ç½®"]},{"location":"Golang/Project/go-gin-example/01 Config/#gomodule","text":"go get ï¼šæ‹‰å–æ–°çš„ä¾èµ– æ‹‰å–æœ€æ–°çš„ç‰ˆæœ¬ï¼š go get golang/org/x/text@lastest æ‹‰å– master åˆ†æ”¯çš„æœ€æ–°commitï¼š go get golang.org/x/text@master go tidy ï¼šæ•´ç†ä¾","text_tokens":["golang","åˆ†æ”¯","text",".","get","ç‰ˆæœ¬","çš„","ä¾èµ–","ï¼š","x","æ•´ç†","/","tidy"," ","go","ä¾","æ‹‰å–","@","org","master","æœ€æ–°","lastest","æ–°","commit"],"title":"GOMODULEåŸºç¡€ä½¿ç”¨","title_tokens":["åŸºç¡€","gomodule","ä½¿ç”¨"]},{"location":"Golang/Project/go-gin-example/02 API-1/","text":"go-gin-example 02ï¼šAPI-1 åˆå§‹è®¾ç½® é¡¹ç›®ç›®å½• go-gin-example/ â”œâ”€conf â”œâ”€middleware â”œâ”€models â”œâ”€pkg â”œâ”€routers â””â”€runtime confï¼šç”¨äºå­˜å‚¨é…ç½®æ–‡ä»¶ middlewareï¼šåº”ç”¨ä¸­é—´ä»¶ modelsï¼šåº”ç”¨æ•°æ®åº“æ¨¡å‹ pkgï¼šç¬¬ä¸‰æ–¹åŒ… routersï¼šè·¯ç”±é€»è¾‘å¤„ç† runtimeï¼šåº”ç”¨è¿è¡Œæ—¶æ•°æ® æ·»åŠ Go Modules Replaceé…ç½®æœ¬åœ°æ¨¡å—è·¯å¾„ ï¼ˆå¥½åƒä¸å¿…è¦ï¼‰ module go - gin - example go 1.12 require ( Â·Â·Â· ) replace ( . / go - gin - example / conf => . / go - gin - example / pkg / conf . / go - gin - example / middleware => . / go - gin - example / middleware . / go - gin - example / models => . / go - gin - example / models . / go - gin - example / pkg / e => . / go - gin - example / pkg / e . / go - gin - example / pkg / setting => . / go - gin - example / pkg / setting . / go - gin - example / pkg / util => . / go - gin - example / pkg / util . / go - gin - example / routers => . / go - gin - example / routers ) # ç”¨ replace å°†å…¶æŒ‡å®šè¯»å–æœ¬åœ°çš„æ¨¡å—è·¯å¾„ ï¼Œ è¿™æ ·å­å°±å¯ä»¥è§£å†³æœ¬åœ°æ¨¡å—è¯»å–çš„é—®é¢˜ ä½¿ç”¨inié…ç½®æ–‡ä»¶åº“/ç¼–å†™é¡¹ç›®é…ç½®åŒ… åº”ç”¨é…ç½®æ–‡ä»¶ å°†å…¬å…±é…ç½®éƒ¨åˆ†æå–å‡ºæ¥ï¼Œå†™æˆä¸“é—¨çš„é…ç½®æ–‡ä»¶ï¼Œç»Ÿä¸€å†™æ•°æ®åº“ç¯å¢ƒã€æœåŠ¡å™¨ç¯å¢ƒç­‰ã€‚ åœ¨ ./conf ç›®å½•ä¸‹æ–°å»º app.ini æ–‡ä»¶ å®šä¹‰RUN_MODE å®šä¹‰æ•°æ®åº“ç«¯å£ã€è´¦å·ã€è¡¨æ ¼ç­‰ å®šä¹‰å…¬å…±å‚æ•°ï¼šåˆ†é¡µ å®šä¹‰æœåŠ¡å™¨ç«¯å£ã€TIMEOUTæ—¶é—´ç­‰ # debug or release RUN_MODE = debug [app] PAGE_SIZE = 10 JWT_SECRET = 23347$040412 [server] HTTP_PORT = 8000 READ_TIMEOUT = 60 WRITE_TIMEOUT = 60 [database] TYPE = mysql USER = root # æ•°æ®åº“è´¦å· PASSWORD = root # æ•°æ®åº“å¯†ç  HOST = 127.0.0.1:3306 # æ•°æ®åº“IP:æ•°æ®åº“ç«¯å£å· NAME = blog TABLE_PREFIX = blog_ è°ƒç”¨é…ç½®çš„settingæ¨¡å— è´Ÿè´£è°ƒç”¨app.ini go get -u github.com/go-ini/ini åœ¨ ./pkg/setting ç›®å½•ä¸‹æ–°å»º setting.go æ–‡ä»¶ package setting import ( \"log\" \"time\" \"github.com/go-ini/ini\" ) var ( Cfg * ini . File // Cfgä¸ºiniæ–‡ä»¶ç±»å‹ // å£°æ˜app.iniæ–‡ä»¶å†™å¥½çš„å„ç§é…ç½®çš„ç±»å‹ RunMode string HTTPPort int ReadTimeout time . Duration WriteTimeout time . Duration PageSize int JwtSecret string ) func init () { var err error // åŠ è½½åˆå§‹åŒ–æ–‡ä»¶ Cfg , err = ini . Load ( \"conf/app.ini\" ) if err != nil { log . Fatalf ( \"Fail to parse 'conf/app.ini`: %v\" , err ) } LoadBase () LoadServer () LoadApp () } // åŠ è½½åŸºç¡€è®¾ç½® func LoadBase () { // è®¾ç½®RUN_MODEä¸º'debug' RunMode = Cfg . Section ( \"\" ). Key ( \"RUN_MODE\" ). MustString ( \"debug\" ) } // LoadServer åŠ è½½æœåŠ¡å™¨é…ç½® func LoadServer () { // è·å–'server'çš„sectionä¿¡æ¯ // è¿™é‡Œçš„sectionåŒ…å«'server'çš„å„ç§ä¿¡æ¯, ç”±./config/app,inié…ç½®æ–‡ä»¶æä¾› sec , err := Cfg . GetSection ( \"server\" ) if err != nil { log . Fatalf ( \"Fail to get section 'server':%v\" , err ) } RunMode = Cfg . Section ( \"\" ). Key ( \"RUN_MODE\" ). MustString ( \"debug\" ) // è‡ªåŠ¨ç±»å‹è½¬æ¢ HTTPPort = sec . Key ( \"HTTP_PORT\" ). MustInt ( 8000 ) ReadTimeout = time . Duration ( sec . Key ( \"READ_TIMEOUT\" ). MustInt ( 60 )) * time . Second WriteTimeout = time . Duration ( sec . Key ( \"WRITE_TIMEOUT\" ). MustInt ( 60 )) * time . Second } // LoadApp åŠ è½½APPé…ç½® func LoadApp () { // è·å–./config/app.inié…ç½®æ–‡ä»¶çš„APPé…ç½® sec , err := Cfg . GetSection ( \"app\" ) if err != nil { log . Fatalf ( \"Fail to get section 'app':%v\" , err ) } JwtSecret = sec . Key ( \"JWT_SECRET\" ). MustString ( \"!@)*#)!@U#@*!@!)\" ) PageSize = sec . Key ( \"PAGE_SIZE\" ). MustInt ( 10 ) } APIé”™è¯¯ç åŒ… å»ºç«‹é”™è¯¯ç eæ¨¡å— åœ¨ ./pkg/e ç›®å½•ä¸‹æ–°å»º code.go å’Œ msg.go æ–‡ä»¶ code.go package e // APIé”™è¯¯ä»£ç  const ( SUCCESS = 200 ERROR = 500 INVALID_PARAMS = 400 ERROR_EXIST_TAG = 10001 ERROR_NOT_EXIST_TAG = 10002 ERROR_NOT_EXIST_ARTICLE = 10003 ERROR_AUTH_CHECK_TOKEN_FAIL = 20001 ERROR_AUTH_CHECK_TOKEN_TIMEOUT = 20002 ERROR_AUTH_TOKEN = 20003 ERROR_AUTH = 20004 ) msg.go package e //msg.go // MsgFlags é”™è¯¯ä¿¡æ¯ var MsgFlags = map [ int ] string { SUCCESS : \"ok\" , ERROR : \"fail\" , INVALID_PARAMS : \"è¯·æ±‚å‚æ•°é”™è¯¯\" , ERROR_EXIST_TAG : \"å·²å­˜åœ¨è¯¥æ ‡ç­¾åç§°\" , ERROR_NOT_EXIST_TAG : \"è¯¥æ ‡ç­¾ä¸å­˜åœ¨\" , ERROR_NOT_EXIST_ARTICLE : \"è¯¥æ–‡ç« ä¸å­˜åœ¨\" , ERROR_AUTH_CHECK_TOKEN_FAIL : \"Tokené‰´æƒå¤±è´¥\" , ERROR_AUTH_CHECK_TOKEN_TIMEOUT : \"Tokené‰´æƒè¶…æ—¶\" , ERROR_AUTH_TOKEN : \"Tokenç”Ÿæˆå¤±è´¥\" , ERROR_AUTH : \"Tokené”™è¯¯\" , } // GetMsg è·å–é”™è¯¯ä¿¡æ¯ func GetMsg ( code int ) string { msg , ok := MsgFlags [ code ] if ok { return msg } return MsgFlags [ ERROR ] } å·¥å…·åŒ… å…¬å…±æ–¹æ³•ï¼šä¾‹å¦‚è·å–åˆ†é¡µé¡µç ç­‰ go get -u github.com/unknwon/com åœ¨ ./pkg/util ç›®å½•ä¸‹æ–°å»º pagination.go æ–‡ä»¶ package util import ( setting \"go-gin-example/pkg/settings\" \"github.com/gin-gonic/gin\" \"github.com/unknwon/com\" ) // GetPage è·å–pageæ•°é‡ func GetPage ( c * gin . Context ) int { result := 0 // pageè½¬æ¢ä¸ºint page , _ := com . StrTo ( c . Query ( \"page\" )). Int () if page > 0 { result = ( page - 1 ) * setting . PageSize } return result } æ•°æ®åº“æ¨¡å‹æ˜ å°„ é€šè¿‡gormå°†golangç»“æ„ä½“æ˜ å°„åˆ°æ•°æ®åº“ä¸­è‡ªåŠ¨ç”Ÿæˆæ¨¡å‹ go get -u github.com/jinzhu/gorm go get -u github.com/go-sql-driver/mysql åœ¨ ./models ç›®å½•ä¸‹æ–°å»º models.go æ–‡ä»¶ã€‚ package models import ( \"fmt\" setting \"go-gin-example/pkg/settings\" \"log\" \"github.com/jinzhu/gorm\" ) var db * gorm . DB // Model æ•°æ®åº“æ¨¡å‹ type Model struct { ID int `gorm:\"primary_key\" json:id` CreatedOn int `json:\"created_on\"` ModifiedOn int `json:\"modified_on\"` } func init () { var ( err error dbType , dbName , user , password , host , tablePrefix string ) // è·å–é…ç½®æ–‡ä»¶çš„æ•°æ®åº“é…ç½® sec , err := setting . Cfg . GetSection ( \"database\" ) if err != nil { log . Fatal ( 2 , \"Fail to get get scetion `database`:%v\" , err ) } dbType = sec . Key ( \"TYPE\" ). String () dbName = sec . Key ( \"NAME\" ). String () user = sec . Key ( \"USER\" ). String () password = sec . Key ( \"PASSWORD\" ). String () host = sec . Key ( \"HOST\" ). String () tablePrefix = sec . Key ( \"TABLE_PREFIX\" ). String () db , err = gorm . Open ( dbtype , fmt . Sprintf ( \"%s:%s@tcp(%s)/%s?charset=utf8&parseTime=True&loc=Local\" , user , password , dbName )) if err != nil { log . Println ( err ) } gorm . DefaultTableNameHandler = func ( db * gorm . DB , defaultTableName string ) string { return tablePrefix + defaultTableName } db . SingularTable ( true ) db . LogMode ( true ) db . DB (). SetMaxIdleConns ( 10 ) db . DB (). SetMaxOpenConns ( 100 ) } // CloseDB å…³é—­æ•°æ®åº“è¿æ¥ func CloseDB () { defer db . Close () } Demo å®ä¾‹ç¨‹åº åœ¨ ./ ç›®å½•ä¸‹æ–°å»º main.go æ–‡ä»¶ package main import ( \"fmt\" setting \"go-gin-example/pkg/settings\" \"net/http\" \"github.com/gin-gonic/gin\" ) func main () { router := gin . Default () router . GET ( \"/test\" , func ( c * gin . Context ) { c . JSON ( 200 , gin . H { \"message\" : \"test\" , }) }) s := & http . Server { Addr : fmt . Sprintf ( \":%d\" , setting . HTTPPort ), Handler : router , ReadTimeout : setting . ReadTimeout , WriteTimeout : setting . WriteTimeout , MaxHeaderBytes : 1 << 20 , } // è°ƒç”¨åœ¨&http.Serverä¸­è®¾ç½®çš„å‚æ•°,å› æ­¤ä¸Šé¢è¦ç”¨&,è¦æ”¹å˜å‚æ•°çš„å€¼ s . ListenAndServe () } æµè§ˆå™¨è¾“å…¥ localhostï¼š8000/test è¿”å› {\"message\":\"test\"} åˆ™æˆåŠŸ ä»main.goä¸­åˆ†ç¦»è·¯ç”± åœ¨ ./routers ç›®å½•ä¸‹æ–°å»º router.go æ–‡ä»¶ package routers import ( setting \"go-gin-example/pkg/settings\" \"github.com/gin-gonic/gin\" ) func InitRouter () * gin . Engine { r := gin . New () r . Use ( gin . Logger ()) r . Use ( gin . Recovery ()) gin . SetMode ( setting . RunMode ) r . GET ( \"/test\" , func ( c * gin . Context ) { c . JSON ( 200 , gin . H { \"message\" : \"test\" , }) }) return r } ä¿®æ”¹ main.go æ–‡ä»¶ package main import ( \"fmt\" setting \"go-gin-example/pkg/settings\" \"go-gin-example/routers\" \"net/http\" ) func main () { router := routers . InitRouter () s := & http . Server { Addr : fmt . Sprintf ( \":%d\" , setting . HTTPPort ), Handler : router , ReadTimeout : setting . ReadTimeout , WriteTimeout : setting . WriteTimeout , MaxHeaderBytes : 1 << 20 , } s . ListenAndServer () } å½“å‰ç›®å½•ç»“æ„ go-gin-example/ â”œâ”€â”€ conf â”‚ â””â”€â”€ app.ini â”œâ”€â”€ main.go â”œâ”€â”€ middleware â”œâ”€â”€ models â”‚ â””â”€â”€ models.go â”œâ”€â”€ pkg â”‚ â”œâ”€â”€ e â”‚ â”‚ â”œâ”€â”€ code.go â”‚ â”‚ â””â”€â”€ msg.go â”‚ â”œâ”€â”€ setting â”‚ â”‚ â””â”€â”€ setting.go â”‚ â””â”€â”€ util â”‚ â””â”€â”€ pagination.go â”œâ”€â”€ routers â”‚ â””â”€â”€ router.go â”œâ”€â”€ runtime","text_tokens":["default","æ ‡ç­¾","ä¸‹","å£","_","table","runtime","æ˜ å°„","database","`","import","20"," ","ç¨‹åº","maxheaderbytes","listenandserve","invalid","pagination","åŸºç¡€","æ—¶é—´","ç¬¬ä¸‰","å®šä¹‰","å·¥å…·åŒ…",".","æ–°å»º","recovery","fatalf","è½¬æ¢","replace","sec","runmode","â””","load","server","println","æµè§ˆ","jwt","@","id",")","app","å¥½åƒ","settings","handler","è´¦å·","é”™è¯¯ä»£ç ","å­˜åœ¨","é—®é¢˜","mysql","é…ç½®æ–‡ä»¶","or","conf","check","sql","=","ï¼Œ","models","å‡ºæ¥","model","struct","modified","r","ä½“","!","é€šè¿‡","è¯¥","ç”¨äº","å°±","int","createdon","defaulttablename","driver","addr","é”™è¯¯ç ","[","ç”¨","è¾“å…¥","åº“","æ—¶","åˆ†é¡µ","å†™æˆ","duration",",","prefix","åŠ è½½","åŠ¡å™¨","åŒ…å«","package","parsetime","10003","result","local","read","unknwon","closedb","c","gin",">","e","é”™è¯¯","è¶…æ—¶","util","400","å…¶","2","å·¥å…·","true","section","å¿…è¦","$","â”œ","02","é€»è¾‘","singulartable","3306","fatal","timeout","pkg","20004","ip","to","å½“å‰","æœåŠ¡","åˆå§‹åŒ–","å¥½","params","â”€","æå–","host","router","fmt","run","040412","20002","string","è¦","ä¸­é—´ä»¶","è¯·æ±‚","on","use","åŒ…","db","/","time","å®ä¾‹","ç¼–å†™","not","go","åˆå§‹","logmode","defaulttablenamehandler","jinzhu","com","&","msg","v","*","æ¨¡å—","loadbase","200","type","0.1","8000","100","10001","'","è§£å†³","httpport","ä¸º","å…³é—­","}","gonic","ç”±","dbtype","jwtsecret","func","åˆ™","å¯†ç ","æ¨¡å‹","23347","close","è¿æ¥","æ•°æ®","password","è¯»å–","ä¿¡æ¯","ä¸","success","ä»","muststring","æä¾›","setting","+","message","åœ¨","test","localhost","new","ï¼‰","æ”¹å˜","ini","ç«¯å£å·","release","loadserver","æ–¹æ³•","è¿™é‡Œ","æœåŠ¡å™¨ç«¯","ç»“æ„","d","page","loadapp","ç«¯å£","getsection","?","10","auth","second","å¯ä»¥","get","æ•°é‡","ok","blog","defer","ä¸“é—¨","mustint","è¯¯ä¿¡","å­˜å‚¨","åº”ç”¨","example","write","{","ã€‚","10002","æ®åº“","getmsg","æŒ‡å®š","åç§°","è·¯ç”±","module","0","github","#","return","å»ºç«‹","setmode","getpage","ä¸‰æ–¹","ä¸Šé¢","éƒ¨åˆ†","u","é‰´æƒ","charset","å„ç§","init","ã€","scetion","ç±»å‹","exist","è¡¨æ ¼","err","h","tableprefix","-","setmaxidleconns","è®¾ç½®","å°†","parse","åˆ†ç¦»","ä½¿ç”¨","æ–‡ä»¶","æˆåŠŸ","è‡ªåŠ¨","writetimeout","é¡¹ç›®","å‚æ•°","routers","<","middleware","ç­‰","å£°æ˜","1","å½“å‰ç›®å½•","æ ·å­","user","å¤„ç†","map","listenandserver","å­˜å‚¨é…ç½®","%","ä¸­","ä¸­é—´","æœåŠ¡å™¨","é”™è¯¯ä¿¡æ¯","port","è¿è¡Œ","è¦ç”¨","ç”Ÿæˆ","mode","ç»Ÿä¸€","const","â”‚","http","primary",":","api","name","ç¯å¢ƒ","500","pagesize","root","æœ¬åœ°","è·å–","ï¼š","æ·»åŠ ","context","Â·","utf8","net","fail","article","ç¬¬ä¸‰æ–¹","å…¬å…±","è¿”å›","tcp","golang","å†™","ä»£ç ","æ–‡ç« ","60","open","secret","ä¿®æ”¹","çš„","å¤±è´¥","loc","ä¾‹å¦‚","var","ä¸å¿…è¦","debug","20003","token","åˆ°","if","å€¼","config","s","è·¯å¾„","size","initrouter","cfg","è´Ÿè´£","æ–‡ä»¶ç±»å‹","require","code","error","è¯¯ç ","å’Œ","å·²","created","]","è¿™","127.0","strto","modifiedon","engine","è°ƒç”¨","å› æ­¤","setmaxopenconns","ï¼ˆ","é…ç½®","ä¸å¿…","modules","æµè§ˆå™¨","demo","key","json","å£å·","readtimeout","sprintf","gorm","ç›®å½•","tag","dbname","logger","1.12","msgflags","(","nil","æ•°æ®åº“","file","ç±»å‹è½¬æ¢","é¡µç ","\"","query","log","20001","main"],"title":"go-gin-example 02ï¼šAPI-1","title_tokens":["-","gin","api","02","example"," ","go","1","ï¼š"]},{"location":"Golang/Project/go-gin-example/02 API-1/#go-gin-example-02api-1","text":"åˆå§‹è®¾ç½®","text_tokens":["è®¾ç½®","åˆå§‹"],"title":"go-gin-example 02ï¼šAPI-1","title_tokens":["-","gin","api","02","example"," ","go","1","ï¼š"]},{"location":"Golang/Project/go-gin-example/02 API-1/#_1","text":"go-gin-example/ â”œâ”€conf â”œâ”€middleware â”œâ”€models â”œâ”€pkg â”œâ”€routers â””â”€runtime confï¼šç”¨äºå­˜å‚¨é…ç½®æ–‡ä»¶ middlewareï¼šåº”ç”¨ä¸­é—´ä»¶ modelsï¼šåº”ç”¨æ•°æ®åº“æ¨¡å‹ pkgï¼šç¬¬ä¸‰æ–¹åŒ… routersï¼šè·¯ç”±é€»è¾‘å¤„ç† runtimeï¼šåº”ç”¨è¿è¡Œæ—¶æ•°æ®","text_tokens":["æ•°æ®","æ—¶","ä¸‰æ–¹","middleware","ç”¨äº","conf","å¤„ç†","runtime","â”œ","é€»è¾‘","ä¸­é—´ä»¶","â””","ï¼š","å­˜å‚¨é…ç½®","åŒ…","-","pkg","å­˜å‚¨","/","åº”ç”¨","example"," ","go","models","æ®åº“","gin","ä¸­é—´","æ•°æ®åº“","è·¯ç”±","æ–‡ä»¶","â”€","è¿è¡Œ","ç¬¬ä¸‰","é…ç½®","ç¬¬ä¸‰æ–¹","æ¨¡å‹","routers"],"title":"é¡¹ç›®ç›®å½•","title_tokens":["é¡¹ç›®","ç›®å½•"]},{"location":"Golang/Project/go-gin-example/02 API-1/#go-modules-replace","text":"module go - gin - example go 1.12 require ( Â·Â·Â· ) replace ( . / go - gin - example / conf => . / go - gin - example / pkg / conf . / go - gin - example / middleware => . / go - gin - example / middleware . / go - gin - example / models => . / go - gin - example / models . / go - gin - example / pkg / e => . / go - gin - example / pkg / e . / go - gin - example / pkg / setting => . / go - gin - example / pkg / setting . / go - gin - example / pkg / util => . / go - gin - example / pkg / util . / go - gin - example / routers => . / go - gin - example / routers ) # ç”¨ replace å°†å…¶æŒ‡å®šè¯»å–æœ¬åœ°çš„æ¨¡å—è·¯å¾„ ï¼Œ è¿™æ ·å­å°±å¯ä»¥è§£å†³æœ¬åœ°æ¨¡å—è¯»å–çš„é—®é¢˜","text_tokens":["å…¶","middleware","require","æ¨¡å—","é—®é¢˜",".","è¯»å–","å¯ä»¥","conf","æ ·å­","replace","çš„","å°±","setting","1.12","æœ¬åœ°","è¿™","è§£å†³","-","pkg","=","(","/","ç”¨","å°†","example","ï¼Œ"," ","go","models","æŒ‡å®š","gin",">","e","Â·","module","è·¯å¾„",")","util","#","routers"],"title":"æ·»åŠ Go Modules Replaceé…ç½®æœ¬åœ°æ¨¡å—è·¯å¾„ ï¼ˆå¥½åƒä¸å¿…è¦ï¼‰","title_tokens":["ï¼‰","ä¸å¿…è¦","replace","æ·»åŠ ","æ¨¡å—","è·¯å¾„","ï¼ˆ"," ","go","é…ç½®","æœ¬åœ°","å¥½åƒ","ä¸å¿…","modules","å¿…è¦"]},{"location":"Golang/Project/go-gin-example/02 API-1/#ini","text":"","text_tokens":[],"title":"ä½¿ç”¨inié…ç½®æ–‡ä»¶åº“/ç¼–å†™é¡¹ç›®é…ç½®åŒ…","title_tokens":["åº“","ä½¿ç”¨","/","æ–‡ä»¶","ini","ç¼–å†™","é…ç½®","é…ç½®æ–‡ä»¶","é¡¹ç›®","åŒ…"]},{"location":"Golang/Project/go-gin-example/02 API-1/#_2","text":"å°†å…¬å…±é…ç½®éƒ¨åˆ†æå–å‡ºæ¥ï¼Œå†™æˆä¸“é—¨çš„é…ç½®æ–‡ä»¶ï¼Œç»Ÿä¸€å†™æ•°æ®åº“ç¯å¢ƒã€æœåŠ¡å™¨ç¯å¢ƒç­‰ã€‚ åœ¨ ./conf ç›®å½•ä¸‹æ–°å»º app.ini æ–‡ä»¶ å®šä¹‰RUN_MODE å®šä¹‰æ•°æ®åº“ç«¯å£ã€è´¦å·ã€è¡¨æ ¼ç­‰ å®šä¹‰å…¬å…±å‚æ•°ï¼šåˆ†é¡µ å®šä¹‰æœåŠ¡å™¨ç«¯å£ã€TIMEOUTæ—¶é—´ç­‰ # debug or release RUN_MODE = debug [app] PAGE_SIZE = 10 JWT_SECRET = 23347$040412 [server] HTTP_PORT = 8000 READ_TIMEOUT = 60 WRITE_TIMEOUT = 60 [database] TYPE = mysql USER = root # æ•°æ®åº“è´¦å· PASSWORD = root # æ•°æ®åº“å¯†ç  HOST = 127.0.0.1:3306 # æ•°æ®åº“IP:æ•°æ®åº“ç«¯å£å· NAME = blog TABLE_PREFIX = blog_","text_tokens":["mode","æ•°æ®","åˆ†é¡µ","ç»Ÿä¸€","å†™æˆ","ä¸‹","password","å£","_","http","prefix",":","name","table","ç¯å¢ƒ","åŠ¡å™¨","åœ¨","database","root","ï¼š","ini","ç«¯å£å·","release","read"," ","æœåŠ¡å™¨ç«¯","page","æ—¶é—´","ç«¯å£","å®šä¹‰","å…¬å…±","å†™","10","60",".","æ–°å»º","secret","$","çš„","3306","[","blog","ä¸“é—¨","timeout","debug","server","write","ip","ã€‚","æœåŠ¡","jwt","æ®åº“","size","app","#","è´¦å·","æå–","host","run","éƒ¨åˆ†","040412","mysql","é…ç½®æ–‡ä»¶","or","conf","ã€","è¡¨æ ¼","]","127.0","=","/","å°†","ï¼Œ","æ–‡ä»¶","å‡ºæ¥","é…ç½®","å‚æ•°","ç­‰","å£å·","type","ç›®å½•","0.1","user","8000","æ•°æ®åº“","æœåŠ¡å™¨","port","å¯†ç ","23347"],"title":"åº”ç”¨é…ç½®æ–‡ä»¶","title_tokens":["æ–‡ä»¶","åº”ç”¨","é…ç½®","é…ç½®æ–‡ä»¶"]},{"location":"Golang/Project/go-gin-example/02 API-1/#setting","text":"è´Ÿè´£è°ƒç”¨app.ini go get -u github.com/go-ini/ini åœ¨ ./pkg/setting ç›®å½•ä¸‹æ–°å»º setting.go æ–‡ä»¶ package setting import ( \"log\" \"time\" \"github.com/go-ini/ini\" ) var ( Cfg * ini . File // Cfgä¸ºiniæ–‡ä»¶ç±»å‹ // å£°æ˜app.iniæ–‡ä»¶å†™å¥½çš„å„ç§é…ç½®çš„ç±»å‹ RunMode string HTTPPort int ReadTimeout time . Duration WriteTimeout time . Duration PageSize int JwtSecret string ) func init () { var err error // åŠ è½½åˆå§‹åŒ–æ–‡ä»¶ Cfg , err = ini . Load ( \"conf/app.ini\" ) if err != nil { log . Fatalf ( \"Fail to parse 'conf/app.ini`: %v\" , err ) } LoadBase () LoadServer () LoadApp () } // åŠ è½½åŸºç¡€è®¾ç½® func LoadBase () { // è®¾ç½®RUN_MODEä¸º'debug' RunMode = Cfg . Section ( \"\" ). Key ( \"RUN_MODE\" ). MustString ( \"debug\" ) } // LoadServer åŠ è½½æœåŠ¡å™¨é…ç½® func LoadServer () { // è·å–'server'çš„sectionä¿¡æ¯ // è¿™é‡Œçš„sectionåŒ…å«'server'çš„å„ç§ä¿¡æ¯, ç”±./config/app,inié…ç½®æ–‡ä»¶æä¾› sec , err := Cfg . GetSection ( \"server\" ) if err != nil { log . Fatalf ( \"Fail to get section 'server':%v\" , err ) } RunMode = Cfg . Section ( \"\" ). Key ( \"RUN_MODE\" ). MustString ( \"debug\" ) // è‡ªåŠ¨ç±»å‹è½¬æ¢ HTTPPort = sec . Key ( \"HTTP_PORT\" ). MustInt ( 8000 ) ReadTimeout = time . Duration ( sec . Key ( \"READ_TIMEOUT\" ). MustInt ( 60 )) * time . Second WriteTimeout = time . Duration ( sec . Key ( \"WRITE_TIMEOUT\" ). MustInt ( 60 )) * time . Second } // LoadApp åŠ è½½APPé…ç½® func LoadApp () { // è·å–./config/app.inié…ç½®æ–‡ä»¶çš„APPé…ç½® sec , err := Cfg . GetSection ( \"app\" ) if err != nil { log . Fatalf ( \"Fail to get section 'app':%v\" , err ) } JwtSecret = sec . Key ( \"JWT_SECRET\" ). MustString ( \"!@)*#)!@U#@*!@!)\" ) PageSize = sec . Key ( \"PAGE_SIZE\" ). MustInt ( 10 ) }","text_tokens":["mode","ä¸‹","ä¿¡æ¯","duration","_","http",",",":","åŠ è½½","åŠ¡å™¨","åŒ…å«","package","muststring","æä¾›","setting","pagesize","åœ¨","è·å–","`","import","ini","loadserver","read","è¿™é‡Œ"," ","åŸºç¡€","page","loadapp","fail","getsection","å†™","10","60","second",".","æ–°å»º","secret","section","get","fatalf","è½¬æ¢","sec","çš„","runmode","var","load","pkg","mustint","debug","timeout","server","write","{","if","to","æœåŠ¡","åˆå§‹åŒ–","jwt","config","å¥½","@","github","size",")","app","#","cfg","è´Ÿè´£","æ–‡ä»¶ç±»å‹","run","u","string","é…ç½®æ–‡ä»¶","error","conf","å„ç§","init","ç±»å‹","err","-","=","è®¾ç½®","/","time","è°ƒç”¨","go","åˆå§‹","parse","æ–‡ä»¶","è‡ªåŠ¨","com","é…ç½®","writetimeout","v","*","å£°æ˜","loadbase","key","!","readtimeout","ç›®å½•","8000","int","'","(","httpport","ä¸º","%","}","nil","ç±»å‹è½¬æ¢","file","æœåŠ¡å™¨","ç”±","\"","port","jwtsecret","func","log"],"title":"è°ƒç”¨é…ç½®çš„settingæ¨¡å—","title_tokens":["çš„","æ¨¡å—","setting","è°ƒç”¨","é…ç½®"]},{"location":"Golang/Project/go-gin-example/02 API-1/#api","text":"å»ºç«‹é”™è¯¯ç eæ¨¡å— åœ¨ ./pkg/e ç›®å½•ä¸‹æ–°å»º code.go å’Œ msg.go æ–‡ä»¶ code.go package e // APIé”™è¯¯ä»£ç  const ( SUCCESS = 200 ERROR = 500 INVALID_PARAMS = 400 ERROR_EXIST_TAG = 10001 ERROR_NOT_EXIST_TAG = 10002 ERROR_NOT_EXIST_ARTICLE = 10003 ERROR_AUTH_CHECK_TOKEN_FAIL = 20001 ERROR_AUTH_CHECK_TOKEN_TIMEOUT = 20002 ERROR_AUTH_TOKEN = 20003 ERROR_AUTH = 20004 ) msg.go package e //msg.go // MsgFlags é”™è¯¯ä¿¡æ¯ var MsgFlags = map [ int ] string { SUCCESS : \"ok\" , ERROR : \"fail\" , INVALID_PARAMS : \"è¯·æ±‚å‚æ•°é”™è¯¯\" , ERROR_EXIST_TAG : \"å·²å­˜åœ¨è¯¥æ ‡ç­¾åç§°\" , ERROR_NOT_EXIST_TAG : \"è¯¥æ ‡ç­¾ä¸å­˜åœ¨\" , ERROR_NOT_EXIST_ARTICLE : \"è¯¥æ–‡ç« ä¸å­˜åœ¨\" , ERROR_AUTH_CHECK_TOKEN_FAIL : \"Tokené‰´æƒå¤±è´¥\" , ERROR_AUTH_CHECK_TOKEN_TIMEOUT : \"Tokené‰´æƒè¶…æ—¶\" , ERROR_AUTH_TOKEN : \"Tokenç”Ÿæˆå¤±è´¥\" , ERROR_AUTH : \"Tokené”™è¯¯\" , } // GetMsg è·å–é”™è¯¯ä¿¡æ¯ func GetMsg ( code int ) string { msg , ok := MsgFlags [ code ] if ok { return msg } return MsgFlags [ ERROR ] }","text_tokens":["æ ‡ç­¾","ä¸‹","const","ä¿¡æ¯","_","ä¸",",","success","api",":","package","500","10003","åœ¨","è·å–"," ","invalid","e","é”™è¯¯","è¶…æ—¶","article","fail","400","ä»£ç ","æ–‡ç« ","auth",".","æ–°å»º","ok","å¤±è´¥","var","timeout","pkg","è¯¯ä¿¡","20004","20003","token","{","if","10002","getmsg","åç§°","params",")","return","å»ºç«‹","é”™è¯¯ä»£ç ","å­˜åœ¨","code","20002","é‰´æƒ","string","error","è¯¯ç ","å’Œ","20001","å·²","exist","check","è¯·æ±‚","]","=","/","not","go","æ–‡ä»¶","å‚æ•°","msg","æ¨¡å—","200","è¯¥","ç›®å½•","tag","map","10001","int","msgflags","(","}","é”™è¯¯ä¿¡æ¯","\"","é”™è¯¯ç ","func","ç”Ÿæˆ","["],"title":"APIé”™è¯¯ç åŒ…","title_tokens":["è¯¯ç ","api","é”™è¯¯","é”™è¯¯ç ","åŒ…"]},{"location":"Golang/Project/go-gin-example/02 API-1/#_3","text":"å…¬å…±æ–¹æ³•ï¼šä¾‹å¦‚è·å–åˆ†é¡µé¡µç ç­‰ go get -u github.com/unknwon/com åœ¨ ./pkg/util ç›®å½•ä¸‹æ–°å»º pagination.go æ–‡ä»¶ package util import ( setting \"go-gin-example/pkg/settings\" \"github.com/gin-gonic/gin\" \"github.com/unknwon/com\" ) // GetPage è·å–pageæ•°é‡ func GetPage ( c * gin . Context ) int { result := 0 // pageè½¬æ¢ä¸ºint page , _ := com . StrTo ( c . Query ( \"page\" )). Int () if page > 0 { result = ( page - 1 ) * setting . PageSize } return result }","text_tokens":["getpage","*","åˆ†é¡µ","ä¸‹","ç­‰",".","æ–°å»º","u","1","æ•°é‡","get","_","ç›®å½•",",","è½¬æ¢",":","package","setting","pagesize","int","åœ¨","ä¾‹å¦‚","è·å–","result","ï¼š","-","pkg","import","=","(","/","strto","example","ä¸º","æ–¹æ³•","unknwon","}","{","if"," ","go","context","c","gonic","gin","pagination",">","æ–‡ä»¶","é¡µç ","\"","github","page","0","func",")","util","query","com","return","settings","å…¬å…±"],"title":"å·¥å…·åŒ…","title_tokens":["å·¥å…·","å·¥å…·åŒ…"]},{"location":"Golang/Project/go-gin-example/02 API-1/#_4","text":"é€šè¿‡gormå°†golangç»“æ„ä½“æ˜ å°„åˆ°æ•°æ®åº“ä¸­è‡ªåŠ¨ç”Ÿæˆæ¨¡å‹ go get -u github.com/jinzhu/gorm go get -u github.com/go-sql-driver/mysql åœ¨ ./models ç›®å½•ä¸‹æ–°å»º models.go æ–‡ä»¶ã€‚ package models import ( \"fmt\" setting \"go-gin-example/pkg/settings\" \"log\" \"github.com/jinzhu/gorm\" ) var db * gorm . DB // Model æ•°æ®åº“æ¨¡å‹ type Model struct { ID int `gorm:\"primary_key\" json:id` CreatedOn int `json:\"created_on\"` ModifiedOn int `json:\"modified_on\"` } func init () { var ( err error dbType , dbName , user , password , host , tablePrefix string ) // è·å–é…ç½®æ–‡ä»¶çš„æ•°æ®åº“é…ç½® sec , err := setting . Cfg . GetSection ( \"database\" ) if err != nil { log . Fatal ( 2 , \"Fail to get get scetion `database`:%v\" , err ) } dbType = sec . Key ( \"TYPE\" ). String () dbName = sec . Key ( \"NAME\" ). String () user = sec . Key ( \"USER\" ). String () password = sec . Key ( \"PASSWORD\" ). String () host = sec . Key ( \"HOST\" ). String () tablePrefix = sec . Key ( \"TABLE_PREFIX\" ). String () db , err = gorm . Open ( dbtype , fmt . Sprintf ( \"%s:%s@tcp(%s)/%s?charset=utf8&parseTime=True&loc=Local\" , user , password , dbName )) if err != nil { log . Println ( err ) } gorm . DefaultTableNameHandler = func ( db * gorm . DB , defaultTableName string ) string { return tablePrefix + defaultTableName } db . SingularTable ( true ) db . LogMode ( true ) db . DB (). SetMaxIdleConns ( 10 ) db . DB (). SetMaxOpenConns ( 100 ) } // CloseDB å…³é—­æ•°æ®åº“è¿æ¥ func CloseDB () { defer db . Close () }","text_tokens":["è¿æ¥","æ•°æ®","ä¸‹","password","_",",","prefix","primary",":","name","table","parsetime","package","æ˜ å°„","setting","+","åœ¨","database","è·å–","`","import","local"," ","closedb","ç»“æ„","gin","utf8","fail","getsection","?","tcp","golang","10","2","open",".","æ–°å»º","true","get","sec","çš„","singulartable","loc","fatal","var","defer","æ¨¡å‹","pkg","println","åˆ°","example","{","if","to","ã€‚","æ®åº“","id","@","github","s",")","return","settings","cfg","host","fmt","mysql","u","string","é…ç½®æ–‡ä»¶","charset","error","init","scetion","created","sql","on","err","tableprefix","-","db","setmaxidleconns","=","/","modifiedon","å°†","go","models","logmode","setmaxopenconns","defaulttablenamehandler","jinzhu","æ–‡ä»¶","è‡ªåŠ¨","com","é…ç½®","&","model","struct","modified","v","*","ä½“","key","json","!","type","é€šè¿‡","sprintf","gorm","ç›®å½•","user","dbname","100","int","createdon","defaulttablename","(","%","å…³é—­","driver","}","ä¸­","æ•°æ®åº“","nil","dbtype","\"","func","ç”Ÿæˆ","log","close"],"title":"æ•°æ®åº“æ¨¡å‹æ˜ å°„","title_tokens":["æ•°æ®åº“","æ•°æ®","æ˜ å°„","æ¨¡å‹","æ®åº“"]},{"location":"Golang/Project/go-gin-example/02 API-1/#demo","text":"å®ä¾‹ç¨‹åº åœ¨ ./ ç›®å½•ä¸‹æ–°å»º main.go æ–‡ä»¶ package main import ( \"fmt\" setting \"go-gin-example/pkg/settings\" \"net/http\" \"github.com/gin-gonic/gin\" ) func main () { router := gin . Default () router . GET ( \"/test\" , func ( c * gin . Context ) { c . JSON ( 200 , gin . H { \"message\" : \"test\" , }) }) s := & http . Server { Addr : fmt . Sprintf ( \":%d\" , setting . HTTPPort ), Handler : router , ReadTimeout : setting . ReadTimeout , WriteTimeout : setting . WriteTimeout , MaxHeaderBytes : 1 << 20 , } // è°ƒç”¨åœ¨&http.Serverä¸­è®¾ç½®çš„å‚æ•°,å› æ­¤ä¸Šé¢è¦ç”¨&,è¦æ”¹å˜å‚æ•°çš„å€¼ s . ListenAndServe () } æµè§ˆå™¨è¾“å…¥ localhostï¼š8000/test è¿”å› {\"message\":\"test\"} åˆ™æˆåŠŸ","text_tokens":["è¾“å…¥","default","ä¸‹","http",",",":","package","message","setting","åœ¨","test","localhost","ï¼š","æ”¹å˜","import","20"," ","context","ç¨‹åº","c","maxheaderbytes","listenandserve","gin","d","net","è¿”å›",".","æ–°å»º","get","çš„","pkg","server","example","æµè§ˆ","{","å€¼","github","s",")","settings","handler","router","fmt","ä¸Šé¢","è¦","h","-","=","è®¾ç½®","/","å®ä¾‹","è°ƒç”¨","å› æ­¤","go","æ–‡ä»¶","æˆåŠŸ","com","writetimeout","&","å‚æ•°","<","*","æµè§ˆå™¨","json","200","1","readtimeout","sprintf","ç›®å½•","8000","(","httpport","%","}","gonic","ä¸­","addr","\"","func","åˆ™","è¦ç”¨","main"],"title":"Demo","title_tokens":["demo"]},{"location":"Golang/Project/go-gin-example/02 API-1/#maingo","text":"åœ¨ ./routers ç›®å½•ä¸‹æ–°å»º router.go æ–‡ä»¶ package routers import ( setting \"go-gin-example/pkg/settings\" \"github.com/gin-gonic/gin\" ) func InitRouter () * gin . Engine { r := gin . New () r . Use ( gin . Logger ()) r . Use ( gin . Recovery ()) gin . SetMode ( setting . RunMode ) r . GET ( \"/test\" , func ( c * gin . Context ) { c . JSON ( 200 , gin . H { \"message\" : \"test\" , }) }) return r } ä¿®æ”¹ main.go æ–‡ä»¶ package main import ( \"fmt\" setting \"go-gin-example/pkg/settings\" \"go-gin-example/routers\" \"net/http\" ) func main () { router := routers . InitRouter () s := & http . Server { Addr : fmt . Sprintf ( \":%d\" , setting . HTTPPort ), Handler : router , ReadTimeout : setting . ReadTimeout , WriteTimeout : setting . WriteTimeout , MaxHeaderBytes : 1 << 20 , } s . ListenAndServer () }","text_tokens":["r","<","*","router","ä¸‹",".","æ–°å»º","recovery","fmt","json","200","1","http","get","sprintf","readtimeout","ç›®å½•",",","ä¿®æ”¹",":","package","logger","setting","message","runmode","åœ¨","new","use","test","h","listenandserver","-","pkg","import","=","(","/","server","20","httpport","engine","example","%","}","{"," ","go","context","c","maxheaderbytes","gonic","handler","gin","d","æ–‡ä»¶","addr","\"","github","s","net","func",")","initrouter","com","return","settings","main","setmode","&","routers","writetimeout"],"title":"ä»main.goä¸­åˆ†ç¦»è·¯ç”±","title_tokens":["åˆ†ç¦»","ä¸­","è·¯ç”±","ä»",".","go","main"]},{"location":"Golang/Project/go-gin-example/02 API-1/#_5","text":"go-gin-example/ â”œâ”€â”€ conf â”‚ â””â”€â”€ app.ini â”œâ”€â”€ main.go â”œâ”€â”€ middleware â”œâ”€â”€ models â”‚ â””â”€â”€ models.go â”œâ”€â”€ pkg â”‚ â”œâ”€â”€ e â”‚ â”‚ â”œâ”€â”€ code.go â”‚ â”‚ â””â”€â”€ msg.go â”‚ â”œâ”€â”€ setting â”‚ â”‚ â””â”€â”€ setting.go â”‚ â””â”€â”€ util â”‚ â””â”€â”€ pagination.go â”œâ”€â”€ routers â”‚ â””â”€â”€ router.go â”œâ”€â”€ runtime","text_tokens":["middleware","router",".","code","â”‚","conf","routers","runtime","â”œ","setting","â””","-","pkg","/","ini","example"," ","go","models","gin","e","pagination","â”€","util","app","msg","main"],"title":"å½“å‰ç›®å½•ç»“æ„","title_tokens":["ç›®å½•","å½“å‰ç›®å½•","ç»“æ„","å½“å‰"]},{"location":"Golang/Project/go-gin-example/03 API-2/","text":"go-gin-example 03ï¼šAPI-2 å®Œæˆåšå®¢çš„æ ‡ç­¾ç±»æ¥å£å®šä¹‰å’Œç¼–å†™ å®šä¹‰æ¥å£ å®šä¹‰æ–‡ç« æ ‡ç­¾çš„è·¯ç”±åˆ†å‘æ“ä½œ è·å–æ ‡ç­¾åˆ—è¡¨ï¼šGET(â€œ/tagsâ€) æ–°å»ºæ ‡ç­¾ï¼šPOST(â€œ/tagsâ€) æ›´æ–°æŒ‡å®šæ ‡ç­¾ï¼šPUT(â€œ/tags/:idâ€) åˆ é™¤æŒ‡å®šæ ‡ç­¾ï¼šDELETE(â€œ/tags/:idâ€) ç©ºå£³è·¯ç”± æ³¨å†Œè·¯ç”±å°†è¯·æ±‚åˆ†å‘åˆ°è¯¥è·¯ç”±ä¸­ï¼Œç”±è¯¥APIè·¯ç”±ä¸­å‡½æ•°å¤„ç† åœ¨./routers/api ä¸‹æ–°å»º v1 ç›®å½•ï¼Œç›®å½•å†…æ–°å»º tag.go æ–‡ä»¶ä»£è¡¨ç¬¬ä¸€ä¸ªAPIå¤§ç‰ˆæœ¬ package v1 import ( \"github.com/gin-gonic/gin\" ) // GetTags è·å–å¤šä¸ªæ–‡ç« æ ‡ç­¾ func GetTags ( c * gin . Context ) { } // AddTag æ–°å¢æ–‡ç« æ ‡ç­¾ func AddTag ( c * gin . Context ) { } // EditTag ä¿®æ”¹æ–‡ç« æ ‡ç­¾ func EditTag ( c * gin . Context ) { } // DeleteTag åˆ é™¤æ–‡ç« æ ‡ç­¾ func DeleteTag ( c * gin . Context ) { } æ³¨å†Œè·¯ç”± è¯¥è·¯ç”±è´Ÿè´£åˆ†å‘å„ä¸ªapiè¯·æ±‚ç»™ç›¸åº”çš„ handler è€… æ‰“å¼€ ./routers ä¸‹çš„ router.go æ–‡ä»¶ï¼Œä¿®æ”¹ä¸ºï¼š package routers import ( setting \"go-gin-example/pkg/settings\" v1 \"go-gin-example/routers/api/v1\" \"github.com/gin-gonic/gin\" ) // InitRouter åˆå§‹åŒ–è·¯ç”± func InitRouter () * gin . Engine { r := gin . New () r . Use ( gin . Logger ()) r . Use ( gin . Recovery ()) gin . SetMode ( setting . RunMode ) apiv1 := r . Group ( \"/api/v1\" ) { apiv1 . GET ( \"/tags\" , v1 . GetTags ) apiv1 . POST ( \"/tags\" , v1 . AddTag ) apiv1 . PUT ( \"/tags/:id\" , v1 . EditTag ) apiv1 . DELETE ( \"/tags/:id\" , v1 . DeleteTag ) } return r } ç”¨ go run main.go æ£€æµ‹æ˜¯å¦æˆåŠŸæ³¨å†Œè·¯ç”± è¡¨å•éªŒè¯ ç”¨beegoçš„validationæ¥è¿›è¡Œè¡¨å•æ ¡éªŒæ•°æ® è¯¥ tag.go æ¨¡å‹ä¸­ç»§æ‰¿äº† model.Model ç»“æ„ä½“å¤–æ–°å¢äº†æ ‡ç­¾ç»“æ„ä½“ä¸­çš„ä¸€äº›å±æ€§ï¼Œåœ¨è¯¥æ–‡ä»¶ä¸‹é™¤äº†é€šè¿‡ gorm æ˜ å°„æ•°æ®åº“æ¨¡å‹å¤–è¿˜æ·»åŠ äº†å¯¹æ ‡ç­¾çš„CRUDæ“ä½œæ–¹æ³•ï¼Œåœ¨ ./routers/api/v1/tag.go ä¸­å¯ä»¥è°ƒç”¨è¿™äº›CRUDæ–¹æ³• go get -u github.com/astaxie/beego/validation åœ¨ models ç›®å½•ä¸‹çš„ tag.go å†™å…¥ package models import ( \"time\" \"github.com/jinzhu/gorm\" ) // Tag æ ‡ç­¾ç»“æ„ä½“ // ç»™ç»“æ„ä½“èµ‹äºˆjsonå±æ€§, åœ¨c.JSONä¸­ä¼šè‡ªåŠ¨è½¬æ¢ type Tag struct { // ç»§æ‰¿Modelçš„ç»“æ„ä½“ Model Name string `json:\"name\"` CreatedBy string `json:\"created_by\"` ModifiedBy string `json:\"modified_by\"` State int `json:\"state\"` } // BeforeCreate åˆ›å»ºæ ‡ç­¾ä¹‹å‰è‡ªåŠ¨è¡¥å…¨CreatedOnæ—¶é—´ func ( tag * Tag ) BeforeCreate ( scope * gorm . Scope ) error { scope . SetColumn ( \"CreatedOn\" , time . Now (). Unix ()) return nil } // BeforeUpdate æ›´æ–°æ ‡ç­¾ä¹‹å‰è‡ªåŠ¨è¡¥å…¨ModifiedOnæ—¶é—´ func ( tag * Tag ) BeforeUpdate ( scope * gorm . Scope ) error { scope . SetColumn ( \"ModifiedOn\" , time . Now (). Unix ()) return nil } // GetTags è·å–æ–‡ç« æ ‡ç­¾ func GetTags ( pageNum int , pageSize int , maps interface {}) ( tags [] Tag ) { db . Where ( maps ). Offset ( pageNum ). Limit ( pageSize ). Find ( & tags ) return } // GetTagTotal è·å–å…¨éƒ¨æ–‡ç« æ ‡ç­¾ func GetTagTotal ( maps interface {}) ( count int ) { db . Model ( & Tag {}). Where ( maps ). Count ( & count ) return } // ExistTagByName æŸ¥è¯¢æ–‡ç« æ ‡ç­¾æ˜¯å¦å­˜åœ¨ func ExistTagByName ( name string ) bool { var tag Tag db . Select ( \"id\" ). Where ( \"name = ?\" , name ). First ( & tag ) if tag . ID > 0 { return true } return false } // ExistTagByID æŸ¥è¯¢IDæ–‡ç« æ˜¯å¦å­˜åœ¨ func ExistTagByID ( id int ) bool { var tag Tag db . Select ( \"id\" ). Where ( \"id = ?\" , id ). First ( & tag ) if tag . ID > 0 { return true } return false } // AddTag æ·»åŠ æ–‡ç« æ ‡ç­¾ func AddTag ( name string , state int , createdBy string ) bool { db . Create ( & Tag { Name : name , State : state , CreatedBy : createdBy , }) return true } // DeleteTag åˆ é™¤æ–‡ç« æ ‡ç­¾ func DeleteTag ( id int ) bool { db . Where ( \"id = ? \" , id ). Delete ( & Tag {}) return true } // EditTag ç¼–è¾‘æ–‡ç« æ ‡ç­¾ func EditTag ( id int , data interface {}) bool { db . Model ( & Tag {}). Where ( \"id = ? \" , id ). Update ( data ) return true } ç¼–å†™æ ‡ç­¾åˆ—è¡¨çš„è·¯ç”±é€»è¾‘ å®Œå–„ç©ºå£³è·¯ç”± é€šè¿‡ beego/validation å¯¹URLä¼ é€’è¿›æ¥çš„å‚æ•°è¿›è¡Œæ ¡éªŒï¼Œæ“ä½œä¸ºå£°æ˜ validation.Validation å¯¹è±¡ï¼Œè°ƒç”¨å…¶ .Required ã€ .MaxSize ã€ .Range ã€ .Message ç­‰æ–¹æ³• é€šè¿‡ c.Query è·å–URLä¸­ ?name=test&state=1 ä¸­çš„å‚æ•°ï¼Œ c.DefaultQuery åˆ™æ”¯æŒè®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼ util.GetPage ç¡®ä¿å„ä¸ªæ¥å£çš„ page å¤„ç†æ˜¯ä¸€è‡´çš„ åœ¨ ./routers/v1/tag.go å†™å…¥ package v1 import ( \"go-gin-example/models\" \"go-gin-example/pkg/e\" setting \"go-gin-example/pkg/settings\" \"go-gin-example/pkg/util\" \"net/http\" \"github.com/astaxie/beego/validation\" \"github.com/gin-gonic/gin\" \"github.com/unknwon/com\" ) // GetTags è·å–æ–‡ç« æ ‡ç­¾ func GetTags ( c * gin . Context ) { // ä»URLè·å–å‚æ•° // localhost:8000/tags?name=test&state=1 name := c . Query ( \"name\" ) maps := make ( map [ string ] interface {}) data := make ( map [ string ] interface {}) if name != \"\" { // å¦‚æœå­˜åœ¨nameå‚æ•°, å°†å…¶æ·»åŠ åˆ°mapsä¸­ maps [ \"name\" ] = name } var state = - 1 // should omit type , it will be inferred if arg := c . Query ( \"state\" ); arg != \"\" { // å¦‚æœURLä¸­å­˜åœ¨stateå‚æ•°, ä¸”argä¸ç­‰äºç©ºçš„æ—¶å€™ // å°†stateè½¬æ¢ä¸ºint // æ·»åŠ åˆ°maps[\"state\"]ä¸­ state = com . StrTo ( arg ). MustInt () maps [ \"state\" ] = state } code := e . SUCCESS // æ‰¾åˆ°è¯¥æ–‡ç« ,å°†å…¶æ·»åŠ åˆ°listsä¸­è¿”å› data [ \"lists\" ] = models . GetTags ( util . GetPage ( c ), setting . PageSize , maps ) data [ \"total\" ] = models . GetTagTotal ( maps ) c . JSON ( http . StatusOK , gin . H { \"code\" : code , \"msg\" : e . GetMsg ( code ), \"data\" : data , }) } // AddTag å¢åŠ æ–‡ç« æ ‡ç­¾ func AddTag ( c * gin . Context ) { name := c . Query ( \"name\" ) // state=0ä»£è¡¨è¯¥æ ‡ç­¾ä¸å­˜åœ¨ // è®¾ç½®é»˜è®¤å€¼ä¸º0 state := com . StrTo ( c . DefaultQuery ( \"state\" , \"0\" )). MustInt () createdBy := c . Query ( \"created_by\" ) valid := validation . Validation {} valid . Required ( name , \"name\" ). Message ( \"åç§°ä¸èƒ½ä¸ºç©º\" ) valid . MaxSize ( name , 100 , \"name\" ). Message ( \"åç§°æœ€é•¿ä¸º100å­—ç¬¦\" ) valid . Required ( createdBy , \"created_by\" ). Message ( \"åˆ›å»ºäººä¸èƒ½ä¸ºç©º\" ) valid . MaxSize ( createdBy , 100 , \"created_by\" ). Message ( \"åˆ›å»ºäººæœ€é•¿ä¸º100å­—ç¬¦\" ) valid . Range ( state , 0 , 1 , \"starte\" ). Message ( \"çŠ¶æ€åªå…è®¸0æˆ–1\" ) code := e . INVALID_PARAMS if ! valid . HasErrors () { if ! models . ExistTagByName ( name ) { code = e . SUCCESS models . AddTag ( name , state , createdBy ) } else { code = e . ERROR_EXIST_TAG } } c . JSON ( http . StatusOK , gin . H { \"code\" : code , \"msg\" : e . GetMsg ( code ), \"data\" : make ( map [ string ] string ), }) } // EditTag ä¿®æ”¹æ–‡ç« æ ‡ç­¾ func EditTag ( c * gin . Context ) { id := com . StrTo ( c . Param ( \"id\" )). MustInt () name := c . Query ( \"name\" ) modifiedBy := c . Query ( \"modified_by\" ) valid := validation . Validation {} var state = - 1 if arg := c . Query ( \"state\" ); arg != \"\" { state = com . StrTo ( arg ). MustInt () valid . Range ( state , 0 , 1 , \"state\" ). Message ( \"çŠ¶æ€åªå…è®¸0æˆ–1\" ) } valid . Required ( id , \"id\" ). Message ( \"IDä¸èƒ½ä¸ºç©º\" ) valid . Required ( modifiedBy , \"modiified_by\" ). Message ( \"ä¿®æ”¹äººä¸èƒ½ä¸ºç©º\" ) valid . MaxSize ( modifiedBy , 100 , \"modified_by\" ). Message ( \"ä¿®æ”¹äººæœ€é•¿ä¸º100å­—ç¬¦\" ) valid . MaxSize ( name , 100 , \"name\" ). Message ( \"åç§°æœ€é•¿ä¸º100å­—ç¬¦\" ) code := e . INVALID_PARAMS if ! valid . HasErrors () { code = e . SUCCESS if models . ExistTagByID ( id ) { data := make ( map [ string ] interface {}) data [ \"modified_by\" ] = modifiedBy if name != \"\" { data [ \"name\" ] = name } if state != - 1 { data [ \"state\" ] = state } models . EditTag ( id , data ) } else { // ä¸å­˜åœ¨, æ— æ³•ä¿®æ”¹æ ‡ç­¾ code = e . ERROR_NOT_EXIST_ARTICLE } } c . JSON ( http . StatusOK , gin . H { \"code\" : code , \"message\" : e . GetMsg ( code ), \"data\" : make ( map [ string ] string ), }) } // DeleteTag åˆ é™¤æ–‡ç« æ ‡ç­¾ func DeleteTag ( c * gin . Context ) { id := com . StrTo ( c . Param ( \"id\" )). MustInt () valid := validation . Validation {} valid . Min ( id , 1 , \"id\" ). Message ( \"IDå¿…é¡»å¤§äº0\" ) code := e . INVALID_PARAMS if ! valid . HasErrors () { code = e . SUCCESS // æ•°æ®åº“æ“ä½œ if models . ExistTagByID ( id ) { models . DeleteTag ( id ) } else { code = e . ERROR_NOT_EXIST_TAG } } c . JSON ( http . StatusOK , gin . H { \"code\" : code , \"msg\" : e . GetMsg ( code ), \"data\" : make ( map [ string ] string ), }) }","text_tokens":["æ ‡ç­¾","beego","ä¸‹","å±æ€§","åˆ—è¡¨","_","è¿›è¡Œ","ä¹‹å‰","tags","min","æ˜ å°„","å¿…é¡»","`","ç»™","import","setcolumn"," ","invalid","æ—¶é—´","åˆ›å»ºäºº","param","å®šä¹‰","åˆ é™¤","æ–°å»º",".","recovery","scope","ç‰ˆæœ¬","è½¬æ¢","03","runmode","æ ¡éªŒ","æ˜¯","å®Œå–„","url","å†™å…¥","å…¨éƒ¨","æ“ä½œ","å¯¹è±¡","id",")","settings","handler","å­˜åœ¨","inferred","ç¬¬ä¸€ä¸ª","=","by","ï¼Œ","ä¼ é€’","models","arg","å…è®¸","model","struct","r","modified","haserrors","ä½“","è¡¥å…¨","!","é€šè¿‡","è¯¥",";","éªŒè¯","åšå®¢","int","createdon","ä¸èƒ½","ä¸€è‡´","[","ç”¨","existtagbyname","be","limit","required",",","package","ä¸”","ä¿®æ”¹æ–‡ç« ","unknwon","å¤šä¸ª","c","gin",">","e","è¿™äº›","will","å¢åŠ ","util","æ˜¯å¦","å…¶","2","true","crud","else","é€»è¾‘","ä¸€äº›","ä½“ä¸­","pkg","å¤–","å­—ç¬¦","åˆå§‹åŒ–","put","params","find","è¿›æ¥","first","å¦‚æœ","router","run","string","pagenum","validation","äºº","defaultquery","è¯·æ±‚","use","æ“ä½œæ–¹æ³•","db","/","time","ç¼–å†™","not","it","go","åˆå§‹","æ£€æµ‹","jinzhu","com","&","msg","range","*","ç­‰äº","æœ€é•¿","type","unix","è€…","8000","100","å„ä¸ª","è¿˜","astaxie","ä¸ºç©º","ä¸º","}","select","now","gonic","ç›¸åº”","func","åˆ™","æ¨¡å‹","statusok","æ•°æ®","æ‰¾åˆ°","ä¸","edittag","æ—¶å€™","ä»","success","message","setting","æ¥","åœ¨","new","test","localhost","make","æ–¹æ³•","æ³¨å†Œ","ç»“æ„","addtag","page","bool","?","å¯ä»¥","get","createdby","gettagtotal","where","ç¼–è¾‘","lists","mustint","example","{","create","æ®åº“","data","æŒ‡å®š","getmsg","åç§°","è·¯ç”±","0","github","return","setmode","æ¥å£","getpage","æ‰“å¼€","u","state","åˆ†å‘","ã€","exist","h","â€œ","-","èµ‹äºˆ","è®¾ç½®","maps","çŠ¶æ€","å°†","ç»§æ‰¿","æ–‡ä»¶","æˆåŠŸ","è‡ªåŠ¨","å‚æ•°","routers","åª","ç­‰","æ–°å¢","å£°æ˜","äº†","1","should","å¤„ç†","åˆ›å»º","map","æ›´æ–°","ç¡®ä¿","count","å¤§","ä¸­","æ”¯æŒ","ç”±è¯¥","total","http",":","api","name","existtagbyid","pagesize","è·å–","ï¼š","é»˜è®¤","å¤§äº","å¯¹","æ·»åŠ ","â€","ç±»","context","net","article","interface","è¿”å›","å®Œæˆ","å†…","æ–‡ç« ","æŸ¥è¯¢","ä¿®æ”¹","çš„","apiv1","var","false","ä¸­ä¼š","åˆ°","if","post","beforecreate","é»˜è®¤å€¼","initrouter","è¡¨å•","ç¬¬ä¸€","è´Ÿè´£","valid","code","error","modiified","å’Œ","created","v1","]","strto","modifiedon","engine","omit","è°ƒç”¨","deletetag","update","å‡½æ•°","ç©ºå£³","é™¤äº†","modifiedby","beforeupdate","offset","json","ä»£è¡¨","ä½“å¤–","gorm","ç›®å½•","tag","æ¥å£å®šä¹‰","delete","æ— æ³•","æˆ–","logger","gettags","ä¸€ä¸ª","(","maxsize","starte","group","ç©º","nil","æ•°æ®åº“","\"","query","main"],"title":"go-gin-example 03ï¼šAPI-2","title_tokens":["-","gin","api","2","example","03"," ","go","ï¼š"]},{"location":"Golang/Project/go-gin-example/03 API-2/#go-gin-example-03api-2","text":"å®Œæˆåšå®¢çš„æ ‡ç­¾ç±»æ¥å£å®šä¹‰å’Œç¼–å†™","text_tokens":["æ¥å£å®šä¹‰","å®Œæˆ","å’Œ","æ ‡ç­¾","çš„","åšå®¢","ç±»","ç¼–å†™","å®šä¹‰","æ¥å£"],"title":"go-gin-example 03ï¼šAPI-2","title_tokens":["-","gin","api","2","example","03"," ","go","ï¼š"]},{"location":"Golang/Project/go-gin-example/03 API-2/#_1","text":"å®šä¹‰æ–‡ç« æ ‡ç­¾çš„è·¯ç”±åˆ†å‘æ“ä½œ è·å–æ ‡ç­¾åˆ—è¡¨ï¼šGET(â€œ/tagsâ€) æ–°å»ºæ ‡ç­¾ï¼šPOST(â€œ/tagsâ€) æ›´æ–°æŒ‡å®šæ ‡ç­¾ï¼šPUT(â€œ/tags/:idâ€) åˆ é™¤æŒ‡å®šæ ‡ç­¾ï¼šDELETE(â€œ/tags/:idâ€)","text_tokens":["æ–‡ç« ","æ ‡ç­¾","åˆ é™¤","æ–°å»º","åˆ—è¡¨","get","åˆ†å‘","delete",":","çš„","tags","æ›´æ–°","è·å–","ï¼š","â€œ","(","/","â€","post"," ","put","æ“ä½œ","æŒ‡å®š","è·¯ç”±","id",")","å®šä¹‰"],"title":"å®šä¹‰æ¥å£","title_tokens":["å®šä¹‰","æ¥å£"]},{"location":"Golang/Project/go-gin-example/03 API-2/#_2","text":"æ³¨å†Œè·¯ç”±å°†è¯·æ±‚åˆ†å‘åˆ°è¯¥è·¯ç”±ä¸­ï¼Œç”±è¯¥APIè·¯ç”±ä¸­å‡½æ•°å¤„ç† åœ¨./routers/api ä¸‹æ–°å»º v1 ç›®å½•ï¼Œç›®å½•å†…æ–°å»º tag.go æ–‡ä»¶ä»£è¡¨ç¬¬ä¸€ä¸ªAPIå¤§ç‰ˆæœ¬ package v1 import ( \"github.com/gin-gonic/gin\" ) // GetTags è·å–å¤šä¸ªæ–‡ç« æ ‡ç­¾ func GetTags ( c * gin . Context ) { } // AddTag æ–°å¢æ–‡ç« æ ‡ç­¾ func AddTag ( c * gin . Context ) { } // EditTag ä¿®æ”¹æ–‡ç« æ ‡ç­¾ func EditTag ( c * gin . Context ) { } // DeleteTag åˆ é™¤æ–‡ç« æ ‡ç­¾ func DeleteTag ( c * gin . Context ) { }","text_tokens":["å†…","æ–‡ç« ","æ ‡ç­¾","*","ä¸‹","åˆ é™¤","æ–°å¢",".","æ–°å»º","è¯¥","ä»£è¡¨","ç›®å½•","åˆ†å‘","tag","ç¬¬ä¸€ä¸ª","ç‰ˆæœ¬","edittag","api","å¤„ç†","ç”±è¯¥","ä¿®æ”¹","package","v1","gettags","åœ¨","è¯·æ±‚","è·å–","ä¸€ä¸ª","-","import","(","/","å°†","åˆ°","ï¼Œ","å¤§","ä¿®æ”¹æ–‡ç« ","æ³¨å†Œ","}","{"," ","go","context","deletetag","å¤šä¸ª","c","gonic","å‡½æ•°","ä¸­","è·¯ç”±","gin","addtag","æ–‡ä»¶","\"","github","func",")","com","routers","ç¬¬ä¸€"],"title":"ç©ºå£³è·¯ç”±","title_tokens":["ç©ºå£³","è·¯ç”±"]},{"location":"Golang/Project/go-gin-example/03 API-2/#_3","text":"è¯¥è·¯ç”±è´Ÿè´£åˆ†å‘å„ä¸ªapiè¯·æ±‚ç»™ç›¸åº”çš„ handler è€… æ‰“å¼€ ./routers ä¸‹çš„ router.go æ–‡ä»¶ï¼Œä¿®æ”¹ä¸ºï¼š package routers import ( setting \"go-gin-example/pkg/settings\" v1 \"go-gin-example/routers/api/v1\" \"github.com/gin-gonic/gin\" ) // InitRouter åˆå§‹åŒ–è·¯ç”± func InitRouter () * gin . Engine { r := gin . New () r . Use ( gin . Logger ()) r . Use ( gin . Recovery ()) gin . SetMode ( setting . RunMode ) apiv1 := r . Group ( \"/api/v1\" ) { apiv1 . GET ( \"/tags\" , v1 . GetTags ) apiv1 . POST ( \"/tags\" , v1 . AddTag ) apiv1 . PUT ( \"/tags/:id\" , v1 . EditTag ) apiv1 . DELETE ( \"/tags/:id\" , v1 . DeleteTag ) } return r } ç”¨ go run main.go æ£€æµ‹æ˜¯å¦æˆåŠŸæ³¨å†Œè·¯ç”±","text_tokens":["ä¸‹",",","edittag",":","api","package","tags","setting","new","ï¼š","ç»™","import","æ³¨å†Œ"," ","gin","addtag","main","æ˜¯å¦",".","recovery","get","ä¿®æ”¹","çš„","runmode","apiv1","pkg","example","{","post","åˆå§‹åŒ–","put","è·¯ç”±","id","github",")","initrouter","return","settings","handler","setmode","è´Ÿè´£","æ‰“å¼€","router","run","åˆ†å‘","v1","è¯·æ±‚","use","-","=","/","engine","ï¼Œ","go","åˆå§‹","deletetag","æ£€æµ‹","æ–‡ä»¶","æˆåŠŸ","com","routers","r","*","è¯¥","è€…","delete","logger","å„ä¸ª","gettags","(","ä¸º","}","group","gonic","\"","ç›¸åº”","func","ç”¨"],"title":"æ³¨å†Œè·¯ç”±","title_tokens":["æ³¨å†Œ","è·¯ç”±"]},{"location":"Golang/Project/go-gin-example/03 API-2/#_4","text":"ç”¨beegoçš„validationæ¥è¿›è¡Œè¡¨å•æ ¡éªŒæ•°æ® è¯¥ tag.go æ¨¡å‹ä¸­ç»§æ‰¿äº† model.Model ç»“æ„ä½“å¤–æ–°å¢äº†æ ‡ç­¾ç»“æ„ä½“ä¸­çš„ä¸€äº›å±æ€§ï¼Œåœ¨è¯¥æ–‡ä»¶ä¸‹é™¤äº†é€šè¿‡ gorm æ˜ å°„æ•°æ®åº“æ¨¡å‹å¤–è¿˜æ·»åŠ äº†å¯¹æ ‡ç­¾çš„CRUDæ“ä½œæ–¹æ³•ï¼Œåœ¨ ./routers/api/v1/tag.go ä¸­å¯ä»¥è°ƒç”¨è¿™äº›CRUDæ–¹æ³• go get -u github.com/astaxie/beego/validation åœ¨ models ç›®å½•ä¸‹çš„ tag.go å†™å…¥ package models import ( \"time\" \"github.com/jinzhu/gorm\" ) // Tag æ ‡ç­¾ç»“æ„ä½“ // ç»™ç»“æ„ä½“èµ‹äºˆjsonå±æ€§, åœ¨c.JSONä¸­ä¼šè‡ªåŠ¨è½¬æ¢ type Tag struct { // ç»§æ‰¿Modelçš„ç»“æ„ä½“ Model Name string `json:\"name\"` CreatedBy string `json:\"created_by\"` ModifiedBy string `json:\"modified_by\"` State int `json:\"state\"` } // BeforeCreate åˆ›å»ºæ ‡ç­¾ä¹‹å‰è‡ªåŠ¨è¡¥å…¨CreatedOnæ—¶é—´ func ( tag * Tag ) BeforeCreate ( scope * gorm . Scope ) error { scope . SetColumn ( \"CreatedOn\" , time . Now (). Unix ()) return nil } // BeforeUpdate æ›´æ–°æ ‡ç­¾ä¹‹å‰è‡ªåŠ¨è¡¥å…¨ModifiedOnæ—¶é—´ func ( tag * Tag ) BeforeUpdate ( scope * gorm . Scope ) error { scope . SetColumn ( \"ModifiedOn\" , time . Now (). Unix ()) return nil } // GetTags è·å–æ–‡ç« æ ‡ç­¾ func GetTags ( pageNum int , pageSize int , maps interface {}) ( tags [] Tag ) { db . Where ( maps ). Offset ( pageNum ). Limit ( pageSize ). Find ( & tags ) return } // GetTagTotal è·å–å…¨éƒ¨æ–‡ç« æ ‡ç­¾ func GetTagTotal ( maps interface {}) ( count int ) { db . Model ( & Tag {}). Where ( maps ). Count ( & count ) return } // ExistTagByName æŸ¥è¯¢æ–‡ç« æ ‡ç­¾æ˜¯å¦å­˜åœ¨ func ExistTagByName ( name string ) bool { var tag Tag db . Select ( \"id\" ). Where ( \"name = ?\" , name ). First ( & tag ) if tag . ID > 0 { return true } return false } // ExistTagByID æŸ¥è¯¢IDæ–‡ç« æ˜¯å¦å­˜åœ¨ func ExistTagByID ( id int ) bool { var tag Tag db . Select ( \"id\" ). Where ( \"id = ?\" , id ). First ( & tag ) if tag . ID > 0 { return true } return false } // AddTag æ·»åŠ æ–‡ç« æ ‡ç­¾ func AddTag ( name string , state int , createdBy string ) bool { db . Create ( & Tag { Name : name , State : state , CreatedBy : createdBy , }) return true } // DeleteTag åˆ é™¤æ–‡ç« æ ‡ç­¾ func DeleteTag ( id int ) bool { db . Where ( \"id = ? \" , id ). Delete ( & Tag {}) return true } // EditTag ç¼–è¾‘æ–‡ç« æ ‡ç­¾ func EditTag ( id int , data interface {}) bool { db . Model ( & Tag {}). Where ( \"id = ? \" , id ). Update ( data ) return true }","text_tokens":["æ•°æ®","æ ‡ç­¾","beego","existtagbyname","ä¸‹","å±æ€§","_","limit","è¿›è¡Œ",",","ä¹‹å‰","edittag","name","api",":","package","tags","existtagbyid","æ˜ å°„","pagesize","æ¥","åœ¨","è·å–","`","ç»™","å¯¹","import","æ·»åŠ ","setcolumn","æ–¹æ³•"," ","c","ç»“æ„",">","è¿™äº›","addtag","æ—¶é—´","interface","bool","æ˜¯å¦","?","æ–‡ç« ","åˆ é™¤",".","true","crud","æŸ¥è¯¢","scope","å¯ä»¥","get","è½¬æ¢","createdby","çš„","gettagtotal","ä¸€äº›","where","ä½“ä¸­","ç¼–è¾‘","var","æ ¡éªŒ","å¤–","false","ä¸­ä¼š","{","if","å†™å…¥","create","å…¨éƒ¨","æ®åº“","data","æ“ä½œ","id","beforecreate","find","github","0",")","first","return","è¡¨å•","å­˜åœ¨","u","string","error","state","pagenum","validation","created","v1","]","æ“ä½œæ–¹æ³•","-","èµ‹äºˆ","db","=","maps","/","modifiedon","time","by","ï¼Œ","è°ƒç”¨","go","ç»§æ‰¿","deletetag","models","update","jinzhu","æ–‡ä»¶","è‡ªåŠ¨","com","é™¤äº†","modifiedby","&","routers","model","struct","modified","*","beforeupdate","offset","æ–°å¢","ä½“","è¡¥å…¨","json","äº†","type","é€šè¿‡","è¯¥","ä½“å¤–","gorm","unix","ç›®å½•","tag","delete","åˆ›å»º","æ›´æ–°","int","gettags","createdon","è¿˜","astaxie","count","(","}","select","now","ä¸­","æ•°æ®åº“","nil","\"","func","æ¨¡å‹","[","ç”¨"],"title":"è¡¨å•éªŒè¯","title_tokens":["éªŒè¯","è¡¨å•"]},{"location":"Golang/Project/go-gin-example/03 API-2/#_5","text":"å®Œå–„ç©ºå£³è·¯ç”± é€šè¿‡ beego/validation å¯¹URLä¼ é€’è¿›æ¥çš„å‚æ•°è¿›è¡Œæ ¡éªŒï¼Œæ“ä½œä¸ºå£°æ˜ validation.Validation å¯¹è±¡ï¼Œè°ƒç”¨å…¶ .Required ã€ .MaxSize ã€ .Range ã€ .Message ç­‰æ–¹æ³• é€šè¿‡ c.Query è·å–URLä¸­ ?name=test&state=1 ä¸­çš„å‚æ•°ï¼Œ c.DefaultQuery åˆ™æ”¯æŒè®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼ util.GetPage ç¡®ä¿å„ä¸ªæ¥å£çš„ page å¤„ç†æ˜¯ä¸€è‡´çš„ åœ¨ ./routers/v1/tag.go å†™å…¥ package v1 import ( \"go-gin-example/models\" \"go-gin-example/pkg/e\" setting \"go-gin-example/pkg/settings\" \"go-gin-example/pkg/util\" \"net/http\" \"github.com/astaxie/beego/validation\" \"github.com/gin-gonic/gin\" \"github.com/unknwon/com\" ) // GetTags è·å–æ–‡ç« æ ‡ç­¾ func GetTags ( c * gin . Context ) { // ä»URLè·å–å‚æ•° // localhost:8000/tags?name=test&state=1 name := c . Query ( \"name\" ) maps := make ( map [ string ] interface {}) data := make ( map [ string ] interface {}) if name != \"\" { // å¦‚æœå­˜åœ¨nameå‚æ•°, å°†å…¶æ·»åŠ åˆ°mapsä¸­ maps [ \"name\" ] = name } var state = - 1 // should omit type , it will be inferred if arg := c . Query ( \"state\" ); arg != \"\" { // å¦‚æœURLä¸­å­˜åœ¨stateå‚æ•°, ä¸”argä¸ç­‰äºç©ºçš„æ—¶å€™ // å°†stateè½¬æ¢ä¸ºint // æ·»åŠ åˆ°maps[\"state\"]ä¸­ state = com . StrTo ( arg ). MustInt () maps [ \"state\" ] = state } code := e . SUCCESS // æ‰¾åˆ°è¯¥æ–‡ç« ,å°†å…¶æ·»åŠ åˆ°listsä¸­è¿”å› data [ \"lists\" ] = models . GetTags ( util . GetPage ( c ), setting . PageSize , maps ) data [ \"total\" ] = models . GetTagTotal ( maps ) c . JSON ( http . StatusOK , gin . H { \"code\" : code , \"msg\" : e . GetMsg ( code ), \"data\" : data , }) } // AddTag å¢åŠ æ–‡ç« æ ‡ç­¾ func AddTag ( c * gin . Context ) { name := c . Query ( \"name\" ) // state=0ä»£è¡¨è¯¥æ ‡ç­¾ä¸å­˜åœ¨ // è®¾ç½®é»˜è®¤å€¼ä¸º0 state := com . StrTo ( c . DefaultQuery ( \"state\" , \"0\" )). MustInt () createdBy := c . Query ( \"created_by\" ) valid := validation . Validation {} valid . Required ( name , \"name\" ). Message ( \"åç§°ä¸èƒ½ä¸ºç©º\" ) valid . MaxSize ( name , 100 , \"name\" ). Message ( \"åç§°æœ€é•¿ä¸º100å­—ç¬¦\" ) valid . Required ( createdBy , \"created_by\" ). Message ( \"åˆ›å»ºäººä¸èƒ½ä¸ºç©º\" ) valid . MaxSize ( createdBy , 100 , \"created_by\" ). Message ( \"åˆ›å»ºäººæœ€é•¿ä¸º100å­—ç¬¦\" ) valid . Range ( state , 0 , 1 , \"starte\" ). Message ( \"çŠ¶æ€åªå…è®¸0æˆ–1\" ) code := e . INVALID_PARAMS if ! valid . HasErrors () { if ! models . ExistTagByName ( name ) { code = e . SUCCESS models . AddTag ( name , state , createdBy ) } else { code = e . ERROR_EXIST_TAG } } c . JSON ( http . StatusOK , gin . H { \"code\" : code , \"msg\" : e . GetMsg ( code ), \"data\" : make ( map [ string ] string ), }) } // EditTag ä¿®æ”¹æ–‡ç« æ ‡ç­¾ func EditTag ( c * gin . Context ) { id := com . StrTo ( c . Param ( \"id\" )). MustInt () name := c . Query ( \"name\" ) modifiedBy := c . Query ( \"modified_by\" ) valid := validation . Validation {} var state = - 1 if arg := c . Query ( \"state\" ); arg != \"\" { state = com . StrTo ( arg ). MustInt () valid . Range ( state , 0 , 1 , \"state\" ). Message ( \"çŠ¶æ€åªå…è®¸0æˆ–1\" ) } valid . Required ( id , \"id\" ). Message ( \"IDä¸èƒ½ä¸ºç©º\" ) valid . Required ( modifiedBy , \"modiified_by\" ). Message ( \"ä¿®æ”¹äººä¸èƒ½ä¸ºç©º\" ) valid . MaxSize ( modifiedBy , 100 , \"modified_by\" ). Message ( \"ä¿®æ”¹äººæœ€é•¿ä¸º100å­—ç¬¦\" ) valid . MaxSize ( name , 100 , \"name\" ). Message ( \"åç§°æœ€é•¿ä¸º100å­—ç¬¦\" ) code := e . INVALID_PARAMS if ! valid . HasErrors () { code = e . SUCCESS if models . ExistTagByID ( id ) { data := make ( map [ string ] interface {}) data [ \"modified_by\" ] = modifiedBy if name != \"\" { data [ \"name\" ] = name } if state != - 1 { data [ \"state\" ] = state } models . EditTag ( id , data ) } else { // ä¸å­˜åœ¨, æ— æ³•ä¿®æ”¹æ ‡ç­¾ code = e . ERROR_NOT_EXIST_ARTICLE } } c . JSON ( http . StatusOK , gin . H { \"code\" : code , \"message\" : e . GetMsg ( code ), \"data\" : make ( map [ string ] string ), }) } // DeleteTag åˆ é™¤æ–‡ç« æ ‡ç­¾ func DeleteTag ( c * gin . Context ) { id := com . StrTo ( c . Param ( \"id\" )). MustInt () valid := validation . Validation {} valid . Min ( id , 1 , \"id\" ). Message ( \"IDå¿…é¡»å¤§äº0\" ) code := e . INVALID_PARAMS if ! valid . HasErrors () { code = e . SUCCESS // æ•°æ®åº“æ“ä½œ if models . ExistTagByID ( id ) { models . DeleteTag ( id ) } else { code = e . ERROR_NOT_EXIST_TAG } } c . JSON ( http . StatusOK , gin . H { \"code\" : code , \"msg\" : e . GetMsg ( code ), \"data\" : make ( map [ string ] string ), }) }","text_tokens":["total","æ•°æ®","æ ‡ç­¾","æ‰¾åˆ°","beego","existtagbyname","be","http","_","required","ä¸","è¿›è¡Œ",",","edittag","æ—¶å€™","name","ä»",":","success","package","tags","message","setting","existtagbyid","min","ä¸”","pagesize","åœ¨","test","localhost","è·å–","å¿…é¡»","é»˜è®¤","å¤§äº","å¯¹","import","æ·»åŠ ","make","ä¿®æ”¹æ–‡ç« ","æ–¹æ³•","unknwon"," ","context","c","invalid","gin","e","addtag","will","page","å¢åŠ ","net","article","util","interface","åˆ›å»ºäºº","param","è¿”å›","?","æ–‡ç« ","å…¶","åˆ é™¤",".","else","ä¿®æ”¹","è½¬æ¢","createdby","çš„","gettagtotal","lists","var","æ ¡éªŒ","pkg","mustint","æ˜¯","å­—ç¬¦","åˆ°","example","å®Œå–„","url","{","if","å†™å…¥","getmsg","data","æ“ä½œ","åç§°","æ®åº“","è·¯ç”±","params","å¯¹è±¡","id","0","github","è¿›æ¥",")","é»˜è®¤å€¼","settings","æ¥å£","å­˜åœ¨","getpage","å¦‚æœ","inferred","valid","code","string","error","state","modiified","ã€","validation","created","v1","exist","defaultquery","äºº","h","]","-","=","è®¾ç½®","/","maps","strto","å°†","çŠ¶æ€","omit","ï¼Œ","by","è°ƒç”¨","not","it","ä¼ é€’","go","deletetag","models","arg","å…è®¸","ç©ºå£³","com","modifiedby","&","å‚æ•°","msg","routers","range","modified","åª","*","ç­‰äº","haserrors","ç­‰","æœ€é•¿","å£°æ˜","json","1","!","type","é€šè¿‡","è¯¥","ä»£è¡¨","æ— æ³•","tag","should",";","å¤„ç†","åˆ›å»º","8000","map","100","æˆ–","å„ä¸ª","gettags","int","astaxie","ä¸€ä¸ª","ç¡®ä¿","(","maxsize","ä¸èƒ½","ä¸ºç©º","starte","ä¸º","}","ç©º","gonic","ä¸€è‡´","ä¸­","æ•°æ®åº“","æ”¯æŒ","\"","func","åˆ™","query","[","statusok"],"title":"ç¼–å†™æ ‡ç­¾åˆ—è¡¨çš„è·¯ç”±é€»è¾‘","title_tokens":["è·¯ç”±","æ ‡ç­¾","çš„","é€»è¾‘","ç¼–å†™","åˆ—è¡¨"]},{"location":"Golang/Project/go-gin-example/04 API-3/","text":"go-gin-example 04ï¼šAPI-3 å®Œæˆåšå®¢çš„æ–‡ç« ç±»æ¥å£å®šä¹‰å’Œç¼–å†™ å®šä¹‰æ¥å£ å®šä¹‰æ–‡ç« çš„è·¯ç”±åˆ†å‘æ“ä½œ è·å–æ–‡ç« åˆ—è¡¨ï¼šGET(â€œ/articlesâ€) è·å–å•ç¯‡æ–‡ç« ï¼šGET(â€œ/articles/:idâ€) æ›´æ–°æ–‡ç« ï¼šPUT(â€œ/articles/:idâ€) æ–°å»ºæ–‡ç« ï¼šPOST(â€œ/articlesâ€) åˆ é™¤æ–‡ç« ï¼šDELETE(â€œ/tags/:idâ€) ç©ºå£³è·¯ç”± æ–‡ç« è¯·æ±‚å¤„ç†API åœ¨ ./routers/api/v1 ä¸‹æ–°å»º article.go æ–‡ä»¶ package v1 import ( \"go-gin-example/models\" \"go-gin-example/pkg/e\" setting \"go-gin-example/pkg/settings\" \"go-gin-example/pkg/util\" \"log\" \"net/http\" \"github.com/astaxie/beego/validation\" \"github.com/gin-gonic/gin\" \"github.com/unknwon/com\" ) // GetArticle è·å–å•ä¸ªæ–‡ç«  func GetArticle ( c * gin . Context ) { id := com . StrTo ( c . Param ( \"id\" )). MustInt () valid := validation . Validation {} valid . Min ( id , 1 , \"id\" ). Message ( \"IDå¿…é¡»å¤§äº0\" ) code := e . INVALID_PARAMS var data interface {} if ! valid . HasErrors () { if models . ExistArticleByID ( id ) { data = models . GetArticle ( id ) code = e . SUCCESS } else { code = e . ERROR_NOT_EXIST_ARTICLE } } else { for _ , err := range valid . Errors { log . Printf ( \"err.key: %s, err.message: %s\" , err . Key , err . Message ) } } c . JSON ( http . StatusOK , gin . H { \"code\" : code , \"msg\" : e . GetMsg ( code ), \"data\" : data , }) } // GetArticles è·å–å¤šä¸ªæ–‡ç«  func GetArticles ( c * gin . Context ) { data := make ( map [ string ] interface {}) maps := make ( map [ string ] interface {}) valid := validation . Validation {} var state = - 1 if arg := c . Query ( \"state\" ); arg != \"\" { state = com . StrTo ( arg ). MustInt () maps [ \"state\" ] = state valid . Range ( state , 0 , 1 , \"state\" ). Message ( \"çŠ¶æ€åªå…è®¸0æˆ–1\" ) } var tagID = - 1 if arg := c . Query ( \"tag_id\" ); arg != \"\" { tagID = com . StrTo ( arg ). MustInt () maps [ \"tag_id\" ] = tagID valid . Min ( tagID , 1 , \"tag_id\" ). Message ( \"æ ‡ç­¾IDå¿…é¡»å¤§äº0\" ) } code := e . INVALID_PARAMS if ! valid . HasErrors () { data [ \"list\" ] = models . GetArticles ( util . GetPage ( c ), setting . PageSize , maps ) data [ \"total\" ] = models . GetTagTotal ( maps ) code = e . SUCCESS } else { for _ , err := range valid . Errors { log . Printf ( \"err.key:%s, err.message:%s\" , err . Key , err . Message ) } } c . JSON ( http . StatusOK , gin . H { \"code\" : code , \"msg\" : e . GetMsg ( code ), \"data\" : data , }) } // AddArticle å¢åŠ æ–‡ç«  func AddArticle ( c * gin . Context ) { tagID := com . StrTo ( c . Query ( \"tag_id\" )). MustInt () title := c . Query ( \"title\" ) desc := c . Query ( \"desc\" ) content := c . Query ( \"content\" ) createdBy := c . Query ( \"created_by\" ) state := com . StrTo ( c . Query ( \"state\" )). MustInt () valid := validation . Validation {} valid . Min ( tagID , 1 , \"tagID\" ). Message ( \"æ ‡ç­¾IDå¿…é¡»å¤§äº0\" ) valid . Required ( title , \"title\" ). Message ( \"é¢˜ç›®ä¸èƒ½ä¸ºç©º\" ) valid . Required ( desc , \"desc\" ). Message ( \"æè¿°ä¸èƒ½ä¸ºç©º\" ) valid . Required ( content , \"content\" ). Message ( \"å†…å®¹ä¸èƒ½ä¸ºç©º\" ) valid . Required ( createdBy , \"created_by\" ). Message ( \"åˆ›å»ºäººä¸èƒ½ä¸ºç©º\" ) valid . Range ( state , 0 , 1 , \"state\" ). Message ( \"çŠ¶æ€åªèƒ½æ˜¯0æˆ–1\" ) code := e . INVALID_PARAMS if ! valid . HasErrors () { if models . ExistTagByID ( tagID ) { data := make ( map [ string ] interface {}) data [ \"tag_id\" ] = tagID data [ \"title\" ] = title data [ \"desc\" ] = desc data [ \"content\" ] = content data [ \"created_by\" ] = createdBy data [ \"state\" ] = state models . AddArticle ( data ) code = e . SUCCESS } else { code = e . ERROR_NOT_EXIST_TAG } } else { for _ , err := range valid . Errors { log . Printf ( \"err.key:%s, err.message%s\" , err . Key , err . Message ) } } c . JSON ( http . StatusOK , gin . H { \"code\" : code , \"msg\" : e . GetMsg ( code ), \"data\" : make ( map [ string ] string ), }) } // EditArticle ä¿®æ”¹æ–‡ç«  func EditArticle ( c * gin . Context ) { valid := validation . Validation {} id := com . StrTo ( c . Query ( \"id\" )). MustInt () tagID := com . StrTo ( c . Query ( \"tag_id\" )). MustInt () title := c . Query ( \"title\" ) desc := c . Query ( \"desc\" ) content := c . Query ( \"content\" ) modifiedBy := c . Query ( \"modified_by\" ) var state = - 1 if arg := c . Query ( \"state\" ); arg != \"\" { state = com . StrTo ( arg ). MustInt () valid . Range ( state , 0 , 1 , \"state\" ). Message ( \"çŠ¶æ€åªèƒ½æ˜¯0æˆ–1\" ) } valid . Min ( id , 1 , \"id\" ). Message ( \"IDå¿…é¡»å¤§äº0\" ) valid . MaxSize ( title , 100 , \"title\" ). Message ( \"æ ‡é¢˜æœ€é•¿ä¸º100å­—ç¬¦\" ) valid . MaxSize ( desc , 255 , \"desc\" ). Message ( \"ç®€è¿°æœ€é•¿ä¸º255å­—ç¬¦\" ) valid . MaxSize ( content , 65535 , \"content\" ). Message ( \"å†…å®¹æœ€é•¿ä¸º65535å­—ç¬¦\" ) valid . Required ( modifiedBy , \"modified_by\" ). Message ( \"ä¿®æ”¹äººä¸èƒ½ä¸ºç©º\" ) valid . MaxSize ( modifiedBy , 100 , \"modified_by\" ). Message ( \"ä¿®æ”¹äººæœ€é•¿ä¸º100å­—ç¬¦\" ) code := e . INVALID_PARAMS if ! valid . HasErrors () { if models . ExistArticleByID ( id ) { if models . ExistTagByID ( tagID ) { data := make ( map [ string ] interface {}) if tagID > 0 { data [ \"tag_id\" ] = tagID } if title != \"\" { data [ \"title\" ] = title } if desc != \"\" { data [ \"desc\" ] = desc } if content != \"\" { data [ \"content\" ] = content } data [ \"modified_by\" ] = modifiedBy models . EditArticle ( id , data ) code = e . SUCCESS } else { code = e . ERROR_NOT_EXIST_TAG } } else { code = e . ERROR_NOT_EXIST_ARTICLE } } else { for _ , err := range valid . Errors { log . Printf ( \"err.key:%s err.Message:%s\" , err . Key , err . Message ) } } c . JSON ( http . StatusOK , gin . H { \"code\" : code , \"msg\" : e . GetMsg ( code ), \"data\" : make ( map [ string ] string ), }) } // DeleteArticle åˆ é™¤æ–‡ç«  func DeleteArticle ( c * gin . Context ) { id := com . StrTo ( c . Query ( \"id\" )). MustInt () valid := validation . Validation {} valid . Min ( id , 1 , \"id\" ). Message ( \"IDå¿…é¡»å¤§äº0\" ) code := e . INVALID_PARAMS if ! valid . HasErrors () { if models . ExistArticleByID ( id ) { models . DeleteArticle ( id ) code = e . SUCCESS } else { code = e . ERROR_NOT_EXIST_ARTICLE } } else { for _ , err := range valid . Errors { log . Printf ( \"err.Key:%s err.Message:%s\" , err . Key , err . Message ) } } c . JSON ( http . StatusOK , gin . H { \"code\" : code , \"msg\" : e . GetMsg ( code ), \"data\" : make ( map [ string ] string ), }) } å®šä¹‰æ–‡ç« çš„æ•°æ®åº“æ¨¡å‹ æ•°æ®åº“æ¨¡å‹å’Œç›¸å…³CRUDæ“ä½œ åœ¨ ./models ä¸‹æ–°å»º article.go æ–‡ä»¶ package models import ( \"time\" \"github.com/jinzhu/gorm\" ) // Article æ–‡ç« ç»“æ„ä½“ type Article struct { Model // å£°æ˜è¯¥`TagID`ä¸ºç´¢å¼• TagID int `json:\"tag_id\" gorm:\"index\"` Tag Tag `json:tag` Title string `json:\"title\"` Desc string `json:\"desc\"` Content string `json:\"content\"` CreatedBy string `json:\"created_by\"` ModifiedBy string `json:\"modified_by\"` State int `json:state\"` } // BeforeCreate åˆ›å»ºæ•°æ®å‰çš„æ“ä½œ func ( article * Article ) BeforeCreate ( scope * gorm . Scope ) error { // scope åŒ…å«å½“å‰æ‰§è¡Œçš„æ‰€æœ‰ä¿¡æ¯ scope . SetColumn ( \"CreateOn\" , time . Now (). Unix ()) return nil } // BeforeUpdate æ›´æ–°(ç¼–è¾‘)ä¹‹å‰æ·»åŠ ä¿®æ”¹æ—¶é—´ func ( article * Article ) BeforeUpdate ( scope * gorm . Scope ) error { scope . SetColumn ( \"ModifiedOn\" , time . Now (). Unix ()) return nil } // ExistArticleByID åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ–‡ç«  func ExistArticleByID ( id int ) bool { var article Article db . Select ( \"id\" ). Where ( \"id = ?\" , id ). Find ( & article ) if article . ID > 0 { return true } return false } // GetArticleTotal è®¡ç®—æ–‡ç« æ•°é‡ func GetArticleTotal ( maps interface {}) ( count int ) { // åœ¨Articleæ•°æ®åº“ä¸­æŸ¥è¯¢æ‰€æœ‰æ•°æ®åè®¡æ•°è¿”å›ç»™count db . Model ( & Article {}). Where ( maps ). Count ( & count ) return count } // GetArticles è·å–æ‰€æœ‰æ–‡ç« åˆ—è¡¨ func GetArticles ( pageNum int , pageSize int , maps interface {}) ( articles [] Article ) { // æ ¹æ®æ¡ä»¶é¢„åŠ è½½ db . Preload ( \"Tag\" ). Where ( maps ). Offset ( pageNum ). Limit ( pageSize ). Find ( & articles ) return articles } // GetArticle è·å–å•ç¯‡æ–‡ç«  func GetArticle ( id int ) ( article Article ) { // æ‰¾åˆ°è¯¥ç‰‡æ–‡ç« , è¿”å›åˆ°articleä¸­ db . Where ( \"id = ?\" , id ). First ( & article ) // è·å–ä¸è¯¥ç¯‡æ–‡ç« æœ‰å…³çš„Tag // é€šè¿‡.Relatedå…³è”åˆ°åµŒå¥—åœ¨Articleå†…çš„Tagç»“æ„ä½“ db . Model ( & article ). Related ( & article . Tag ) return article } // EditArticle ç¼–è¾‘æ–‡ç«  func EditArticle ( id int , data interface {}) bool { db . Model ( & Article {}). Where ( \"id = ?\" , id ). Update ( data ) return true } // AddArticle æ·»åŠ æ–‡ç«  func AddArticle ( data map [ string ] interface {}) bool { db . Create ( & Article { // v.(I)ç±»å‹æ–­è¨€: åˆ¤æ–­æ¥å£vçš„å®é™…ç±»å‹æ˜¯å¦ä¸º(I)ç±»å‹ TagID : data [ \"tag_id\" ].( int ), Title : data [ \"title\" ].( string ), Desc : data [ \"desc\" ].( string ), Content : data [ \"content\" ].( string ), CreatedBy : data [ \"created_by\" ].( string ), State : data [ \"state\" ].( int ), }) return true } // DeleteArticle åˆ é™¤æ–‡ç«  func DeleteArticle ( id int ) bool { db . Where ( \"id = ?\" , id ). Delete ( Article {}) return true }","text_tokens":["é¢˜ç›®","total","æ•°æ®","æ ‡ç­¾","æ‰¾åˆ°","beego","ä¸‹","title","ç´¢å¼•","æ¡ä»¶","åˆ—è¡¨","ä¿¡æ¯","http","_","required","limit","ä¹‹å‰",",","è¯¥ç‰‡",":","api","success","åŒ…å«","åŠ è½½","tags","package","min","setting","message","getarticles","tagid","pagesize","existtagbyid","åµŒå¥—","åœ¨","å","è·å–","å¿…é¡»","`","ï¼š","å¤§äº","ç»™","import","æ·»åŠ ","make","â€","ä¿®æ”¹æ–‡ç« ","ç®€è¿°","ç±»","setcolumn","unknwon"," ","context","åªèƒ½","å¤šä¸ª","c","ç»“æ„","invalid","65535","gin","e",">","deletearticle","list","å¢åŠ ","net","article","æ—¶é—´","util","interface","bool","åˆ›å»ºäºº","æ˜¯å¦","param","å®šä¹‰","è¿”å›","æè¿°","?","å®Œæˆ","å†…","æ–‡ç« ","åˆ é™¤","æ–°å»º",".","true","crud","else","04","scope","æŸ¥è¯¢","æ•°é‡","get","å•ä¸ª","ä¿®æ”¹","é¢„","createdby","çš„","gettagtotal","æ ¹æ®","ä¸","where","åˆ¤æ–­","ç›¸å…³","ç¼–è¾‘","var","æ¨¡å‹","pkg","mustint","errors","æ˜¯","false","æ–­è¨€","å­—ç¬¦","255","existarticlebyid","example","åˆ°","{","post","if","æ ‡é¢˜","å½“å‰","create","put","data","æ“ä½œ","getmsg","æ®åº“","è·¯ç”±","params","content","id","0","beforecreate","github","s","find",")","i","å‰","first","return","settings","æ¥å£","å­˜åœ¨","getpage","valid","code","string","error","state","åˆ†å‘","è®¡ç®—","å’Œ","æ‰§è¡Œ","for","pagenum","validation","created","v1","addarticle","ç±»å‹","exist","äºº","è¯·æ±‚","err","h","]","â€œ","-","db","=","maps","/","strto","çŠ¶æ€","time","modifiedon","editarticle","by","ç¼–å†™","å…³è”","not","related","go","message%","models","update","å•ç¯‡","jinzhu","æ–‡ä»¶","arg","è®¡æ•°","å…è®¸","ç©ºå£³","å®é™…","com","modifiedby","&","msg","routers","range","modified","struct","model","v","åª","*","haserrors","beforeupdate","offset","æœ€é•¿","ä½“","å£°æ˜","key","json","1","!","type","é€šè¿‡","è¯¥","ç¯‡æ–‡ç« ","gorm","unix","tag","æ¥å£å®šä¹‰","delete",";","æœ‰å…³","å¤„ç†","æˆ–","map","åˆ›å»º","100","æ›´æ–°","æ‰€æœ‰","åšå®¢","3","int","createon","astaxie","index","count","preload","å†…å®¹","(","articles","desc","ä¸èƒ½","ä¸ºç©º","maxsize","ä¸º","%","}","select","now","printf","gonic","nil","æ•°æ®åº“","ä¸­","\"","func","query","getarticletotal","log","[","getarticle","statusok"],"title":"go-gin-example 04ï¼šAPI-3","title_tokens":["-","gin","api","example","3"," ","go","04","ï¼š"]},{"location":"Golang/Project/go-gin-example/04 API-3/#go-gin-example-04api-3","text":"å®Œæˆåšå®¢çš„æ–‡ç« ç±»æ¥å£å®šä¹‰å’Œç¼–å†™","text_tokens":["æ¥å£å®šä¹‰","å®Œæˆ","æ–‡ç« ","å’Œ","çš„","åšå®¢","ç±»","ç¼–å†™","å®šä¹‰","æ¥å£"],"title":"go-gin-example 04ï¼šAPI-3","title_tokens":["-","gin","api","example","3"," ","go","04","ï¼š"]},{"location":"Golang/Project/go-gin-example/04 API-3/#_1","text":"å®šä¹‰æ–‡ç« çš„è·¯ç”±åˆ†å‘æ“ä½œ è·å–æ–‡ç« åˆ—è¡¨ï¼šGET(â€œ/articlesâ€) è·å–å•ç¯‡æ–‡ç« ï¼šGET(â€œ/articles/:idâ€) æ›´æ–°æ–‡ç« ï¼šPUT(â€œ/articles/:idâ€) æ–°å»ºæ–‡ç« ï¼šPOST(â€œ/articlesâ€) åˆ é™¤æ–‡ç« ï¼šDELETE(â€œ/tags/:idâ€)","text_tokens":["æ–‡ç« ","åˆ é™¤","æ–°å»º","åˆ—è¡¨","get","åˆ†å‘","delete",":","çš„","tags","æ›´æ–°","è·å–","ï¼š","â€œ","(","/","articles","â€","post"," ","put","æ“ä½œ","è·¯ç”±","å•ç¯‡","id",")","å®šä¹‰"],"title":"å®šä¹‰æ¥å£","title_tokens":["å®šä¹‰","æ¥å£"]},{"location":"Golang/Project/go-gin-example/04 API-3/#_2","text":"æ–‡ç« è¯·æ±‚å¤„ç†API åœ¨ ./routers/api/v1 ä¸‹æ–°å»º article.go æ–‡ä»¶ package v1 import ( \"go-gin-example/models\" \"go-gin-example/pkg/e\" setting \"go-gin-example/pkg/settings\" \"go-gin-example/pkg/util\" \"log\" \"net/http\" \"github.com/astaxie/beego/validation\" \"github.com/gin-gonic/gin\" \"github.com/unknwon/com\" ) // GetArticle è·å–å•ä¸ªæ–‡ç«  func GetArticle ( c * gin . Context ) { id := com . StrTo ( c . Param ( \"id\" )). MustInt () valid := validation . Validation {} valid . Min ( id , 1 , \"id\" ). Message ( \"IDå¿…é¡»å¤§äº0\" ) code := e . INVALID_PARAMS var data interface {} if ! valid . HasErrors () { if models . ExistArticleByID ( id ) { data = models . GetArticle ( id ) code = e . SUCCESS } else { code = e . ERROR_NOT_EXIST_ARTICLE } } else { for _ , err := range valid . Errors { log . Printf ( \"err.key: %s, err.message: %s\" , err . Key , err . Message ) } } c . JSON ( http . StatusOK , gin . H { \"code\" : code , \"msg\" : e . GetMsg ( code ), \"data\" : data , }) } // GetArticles è·å–å¤šä¸ªæ–‡ç«  func GetArticles ( c * gin . Context ) { data := make ( map [ string ] interface {}) maps := make ( map [ string ] interface {}) valid := validation . Validation {} var state = - 1 if arg := c . Query ( \"state\" ); arg != \"\" { state = com . StrTo ( arg ). MustInt () maps [ \"state\" ] = state valid . Range ( state , 0 , 1 , \"state\" ). Message ( \"çŠ¶æ€åªå…è®¸0æˆ–1\" ) } var tagID = - 1 if arg := c . Query ( \"tag_id\" ); arg != \"\" { tagID = com . StrTo ( arg ). MustInt () maps [ \"tag_id\" ] = tagID valid . Min ( tagID , 1 , \"tag_id\" ). Message ( \"æ ‡ç­¾IDå¿…é¡»å¤§äº0\" ) } code := e . INVALID_PARAMS if ! valid . HasErrors () { data [ \"list\" ] = models . GetArticles ( util . GetPage ( c ), setting . PageSize , maps ) data [ \"total\" ] = models . GetTagTotal ( maps ) code = e . SUCCESS } else { for _ , err := range valid . Errors { log . Printf ( \"err.key:%s, err.message:%s\" , err . Key , err . Message ) } } c . JSON ( http . StatusOK , gin . H { \"code\" : code , \"msg\" : e . GetMsg ( code ), \"data\" : data , }) } // AddArticle å¢åŠ æ–‡ç«  func AddArticle ( c * gin . Context ) { tagID := com . StrTo ( c . Query ( \"tag_id\" )). MustInt () title := c . Query ( \"title\" ) desc := c . Query ( \"desc\" ) content := c . Query ( \"content\" ) createdBy := c . Query ( \"created_by\" ) state := com . StrTo ( c . Query ( \"state\" )). MustInt () valid := validation . Validation {} valid . Min ( tagID , 1 , \"tagID\" ). Message ( \"æ ‡ç­¾IDå¿…é¡»å¤§äº0\" ) valid . Required ( title , \"title\" ). Message ( \"é¢˜ç›®ä¸èƒ½ä¸ºç©º\" ) valid . Required ( desc , \"desc\" ). Message ( \"æè¿°ä¸èƒ½ä¸ºç©º\" ) valid . Required ( content , \"content\" ). Message ( \"å†…å®¹ä¸èƒ½ä¸ºç©º\" ) valid . Required ( createdBy , \"created_by\" ). Message ( \"åˆ›å»ºäººä¸èƒ½ä¸ºç©º\" ) valid . Range ( state , 0 , 1 , \"state\" ). Message ( \"çŠ¶æ€åªèƒ½æ˜¯0æˆ–1\" ) code := e . INVALID_PARAMS if ! valid . HasErrors () { if models . ExistTagByID ( tagID ) { data := make ( map [ string ] interface {}) data [ \"tag_id\" ] = tagID data [ \"title\" ] = title data [ \"desc\" ] = desc data [ \"content\" ] = content data [ \"created_by\" ] = createdBy data [ \"state\" ] = state models . AddArticle ( data ) code = e . SUCCESS } else { code = e . ERROR_NOT_EXIST_TAG } } else { for _ , err := range valid . Errors { log . Printf ( \"err.key:%s, err.message%s\" , err . Key , err . Message ) } } c . JSON ( http . StatusOK , gin . H { \"code\" : code , \"msg\" : e . GetMsg ( code ), \"data\" : make ( map [ string ] string ), }) } // EditArticle ä¿®æ”¹æ–‡ç«  func EditArticle ( c * gin . Context ) { valid := validation . Validation {} id := com . StrTo ( c . Query ( \"id\" )). MustInt () tagID := com . StrTo ( c . Query ( \"tag_id\" )). MustInt () title := c . Query ( \"title\" ) desc := c . Query ( \"desc\" ) content := c . Query ( \"content\" ) modifiedBy := c . Query ( \"modified_by\" ) var state = - 1 if arg := c . Query ( \"state\" ); arg != \"\" { state = com . StrTo ( arg ). MustInt () valid . Range ( state , 0 , 1 , \"state\" ). Message ( \"çŠ¶æ€åªèƒ½æ˜¯0æˆ–1\" ) } valid . Min ( id , 1 , \"id\" ). Message ( \"IDå¿…é¡»å¤§äº0\" ) valid . MaxSize ( title , 100 , \"title\" ). Message ( \"æ ‡é¢˜æœ€é•¿ä¸º100å­—ç¬¦\" ) valid . MaxSize ( desc , 255 , \"desc\" ). Message ( \"ç®€è¿°æœ€é•¿ä¸º255å­—ç¬¦\" ) valid . MaxSize ( content , 65535 , \"content\" ). Message ( \"å†…å®¹æœ€é•¿ä¸º65535å­—ç¬¦\" ) valid . Required ( modifiedBy , \"modified_by\" ). Message ( \"ä¿®æ”¹äººä¸èƒ½ä¸ºç©º\" ) valid . MaxSize ( modifiedBy , 100 , \"modified_by\" ). Message ( \"ä¿®æ”¹äººæœ€é•¿ä¸º100å­—ç¬¦\" ) code := e . INVALID_PARAMS if ! valid . HasErrors () { if models . ExistArticleByID ( id ) { if models . ExistTagByID ( tagID ) { data := make ( map [ string ] interface {}) if tagID > 0 { data [ \"tag_id\" ] = tagID } if title != \"\" { data [ \"title\" ] = title } if desc != \"\" { data [ \"desc\" ] = desc } if content != \"\" { data [ \"content\" ] = content } data [ \"modified_by\" ] = modifiedBy models . EditArticle ( id , data ) code = e . SUCCESS } else { code = e . ERROR_NOT_EXIST_TAG } } else { code = e . ERROR_NOT_EXIST_ARTICLE } } else { for _ , err := range valid . Errors { log . Printf ( \"err.key:%s err.Message:%s\" , err . Key , err . Message ) } } c . JSON ( http . StatusOK , gin . H { \"code\" : code , \"msg\" : e . GetMsg ( code ), \"data\" : make ( map [ string ] string ), }) } // DeleteArticle åˆ é™¤æ–‡ç«  func DeleteArticle ( c * gin . Context ) { id := com . StrTo ( c . Query ( \"id\" )). MustInt () valid := validation . Validation {} valid . Min ( id , 1 , \"id\" ). Message ( \"IDå¿…é¡»å¤§äº0\" ) code := e . INVALID_PARAMS if ! valid . HasErrors () { if models . ExistArticleByID ( id ) { models . DeleteArticle ( id ) code = e . SUCCESS } else { code = e . ERROR_NOT_EXIST_ARTICLE } } else { for _ , err := range valid . Errors { log . Printf ( \"err.Key:%s err.Message:%s\" , err . Key , err . Message ) } } c . JSON ( http . StatusOK , gin . H { \"code\" : code , \"msg\" : e . GetMsg ( code ), \"data\" : make ( map [ string ] string ), }) }","text_tokens":["é¢˜ç›®","total","æ ‡ç­¾","beego","ä¸‹","title","http","_","required",",",":","api","success","package","min","message","setting","getarticles","tagid","existtagbyid","pagesize","åœ¨","è·å–","å¿…é¡»","å¤§äº","import","make","ä¿®æ”¹æ–‡ç« ","ç®€è¿°","unknwon"," ","context","åªèƒ½","å¤šä¸ª","c","invalid","65535","gin","e",">","deletearticle","list","å¢åŠ ","net","article","util","interface","åˆ›å»ºäºº","param","æè¿°","æ–‡ç« ","åˆ é™¤",".","æ–°å»º","else","å•ä¸ª","ä¿®æ”¹","createdby","gettagtotal","var","pkg","mustint","errors","æ˜¯","å­—ç¬¦","255","existarticlebyid","example","{","if","æ ‡é¢˜","getmsg","data","params","content","id","0","github","s",")","settings","getpage","valid","code","string","error","state","for","validation","created","v1","addarticle","exist","äºº","è¯·æ±‚","err","h","]","-","=","maps","/","strto","çŠ¶æ€","editarticle","by","not","go","message%","models","æ–‡ä»¶","arg","å…è®¸","com","modifiedby","msg","routers","range","modified","åª","*","haserrors","æœ€é•¿","key","json","1","!","tag",";","å¤„ç†","æˆ–","map","åˆ›å»º","100","astaxie","å†…å®¹","(","desc","ä¸èƒ½","ä¸ºç©º","maxsize","ä¸º","%","}","printf","gonic","\"","func","query","log","[","getarticle","statusok"],"title":"ç©ºå£³è·¯ç”±","title_tokens":["ç©ºå£³","è·¯ç”±"]},{"location":"Golang/Project/go-gin-example/04 API-3/#_3","text":"æ•°æ®åº“æ¨¡å‹å’Œç›¸å…³CRUDæ“ä½œ åœ¨ ./models ä¸‹æ–°å»º article.go æ–‡ä»¶ package models import ( \"time\" \"github.com/jinzhu/gorm\" ) // Article æ–‡ç« ç»“æ„ä½“ type Article struct { Model // å£°æ˜è¯¥`TagID`ä¸ºç´¢å¼• TagID int `json:\"tag_id\" gorm:\"index\"` Tag Tag `json:tag` Title string `json:\"title\"` Desc string `json:\"desc\"` Content string `json:\"content\"` CreatedBy string `json:\"created_by\"` ModifiedBy string `json:\"modified_by\"` State int `json:state\"` } // BeforeCreate åˆ›å»ºæ•°æ®å‰çš„æ“ä½œ func ( article * Article ) BeforeCreate ( scope * gorm . Scope ) error { // scope åŒ…å«å½“å‰æ‰§è¡Œçš„æ‰€æœ‰ä¿¡æ¯ scope . SetColumn ( \"CreateOn\" , time . Now (). Unix ()) return nil } // BeforeUpdate æ›´æ–°(ç¼–è¾‘)ä¹‹å‰æ·»åŠ ä¿®æ”¹æ—¶é—´ func ( article * Article ) BeforeUpdate ( scope * gorm . Scope ) error { scope . SetColumn ( \"ModifiedOn\" , time . Now (). Unix ()) return nil } // ExistArticleByID åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ–‡ç«  func ExistArticleByID ( id int ) bool { var article Article db . Select ( \"id\" ). Where ( \"id = ?\" , id ). Find ( & article ) if article . ID > 0 { return true } return false } // GetArticleTotal è®¡ç®—æ–‡ç« æ•°é‡ func GetArticleTotal ( maps interface {}) ( count int ) { // åœ¨Articleæ•°æ®åº“ä¸­æŸ¥è¯¢æ‰€æœ‰æ•°æ®åè®¡æ•°è¿”å›ç»™count db . Model ( & Article {}). Where ( maps ). Count ( & count ) return count } // GetArticles è·å–æ‰€æœ‰æ–‡ç« åˆ—è¡¨ func GetArticles ( pageNum int , pageSize int , maps interface {}) ( articles [] Article ) { // æ ¹æ®æ¡ä»¶é¢„åŠ è½½ db . Preload ( \"Tag\" ). Where ( maps ). Offset ( pageNum ). Limit ( pageSize ). Find ( & articles ) return articles } // GetArticle è·å–å•ç¯‡æ–‡ç«  func GetArticle ( id int ) ( article Article ) { // æ‰¾åˆ°è¯¥ç‰‡æ–‡ç« , è¿”å›åˆ°articleä¸­ db . Where ( \"id = ?\" , id ). First ( & article ) // è·å–ä¸è¯¥ç¯‡æ–‡ç« æœ‰å…³çš„Tag // é€šè¿‡.Relatedå…³è”åˆ°åµŒå¥—åœ¨Articleå†…çš„Tagç»“æ„ä½“ db . Model ( & article ). Related ( & article . Tag ) return article } // EditArticle ç¼–è¾‘æ–‡ç«  func EditArticle ( id int , data interface {}) bool { db . Model ( & Article {}). Where ( \"id = ?\" , id ). Update ( data ) return true } // AddArticle æ·»åŠ æ–‡ç«  func AddArticle ( data map [ string ] interface {}) bool { db . Create ( & Article { // v.(I)ç±»å‹æ–­è¨€: åˆ¤æ–­æ¥å£vçš„å®é™…ç±»å‹æ˜¯å¦ä¸º(I)ç±»å‹ TagID : data [ \"tag_id\" ].( int ), Title : data [ \"title\" ].( string ), Desc : data [ \"desc\" ].( string ), Content : data [ \"content\" ].( string ), CreatedBy : data [ \"created_by\" ].( string ), State : data [ \"state\" ].( int ), }) return true } // DeleteArticle åˆ é™¤æ–‡ç«  func DeleteArticle ( id int ) bool { db . Where ( \"id = ?\" , id ). Delete ( Article {}) return true }","text_tokens":["æ•°æ®","æ‰¾åˆ°","ä¸‹","title","ç´¢å¼•","æ¡ä»¶","åˆ—è¡¨","ä¿¡æ¯","_","limit","ä¹‹å‰",",","è¯¥ç‰‡",":","åŒ…å«","åŠ è½½","package","getarticles","tagid","åµŒå¥—","pagesize","åœ¨","å","è·å–","`","ç»™","import","æ·»åŠ ","setcolumn"," ","ç»“æ„",">","deletearticle","article","æ—¶é—´","bool","interface","æ˜¯å¦","è¿”å›","?","å†…","æ–‡ç« ","åˆ é™¤",".","æ–°å»º","true","crud","æŸ¥è¯¢","scope","æ•°é‡","ä¿®æ”¹","é¢„","createdby","çš„","æ ¹æ®","ä¸","where","åˆ¤æ–­","ç›¸å…³","ç¼–è¾‘","var","false","æ–­è¨€","existarticlebyid","åˆ°","{","if","å½“å‰","create","æ®åº“","data","æ“ä½œ","content","id","beforecreate","find","github","0",")","i","å‰","first","return","æ¥å£","å­˜åœ¨","string","error","state","è®¡ç®—","å’Œ","æ‰§è¡Œ","pagenum","created","addarticle","ç±»å‹","]","db","=","maps","/","å…³è”","modifiedon","time","editarticle","by","related","go","models","update","å•ç¯‡","jinzhu","æ–‡ä»¶","è®¡æ•°","å®é™…","com","modifiedby","&","model","struct","modified","v","*","beforeupdate","offset","ä½“","å£°æ˜","json","type","é€šè¿‡","è¯¥","ç¯‡æ–‡ç« ","gorm","unix","tag","delete","æœ‰å…³","åˆ›å»º","map","æ›´æ–°","æ‰€æœ‰","int","createon","index","count","preload","(","desc","articles","ä¸º","}","select","now","nil","æ•°æ®åº“","ä¸­","\"","func","getarticletotal","æ¨¡å‹","[","getarticle"],"title":"å®šä¹‰æ–‡ç« çš„æ•°æ®åº“æ¨¡å‹","title_tokens":["æ•°æ®åº“","æ•°æ®","æ–‡ç« ","çš„","å®šä¹‰","æ¨¡å‹","æ®åº“"]},{"location":"Golang/Project/go-gin-example/05 JWT/","text":"go-gin-example 05ï¼šJWT ä¸ºä»€ä¹ˆè¦JWT å½“å‰çš„APIæ¥å£è™½ç„¶ç¼–å†™å¥½äº†ï¼Œä½†æ˜¯è¿™äº›APIå¯ä»¥è¢«éšæ„è°ƒç”¨ï¼Œè¿™æ ·å­æ˜¯ä¸å®‰å…¨çš„ã€‚å› æ­¤éœ€è¦é€šè¿‡ jwt-go çš„æ–¹å¼æ¥è§£å†³ å¦‚ä½•ä½¿ç”¨JWT ä¸‹è½½ä¾èµ–åŒ…ï¼š go get -u github.com/dgrijalva/jwt-go ç¼–å†™ ./pkg/util ä¸‹çš„æ–°å»º jwt.go æ–‡ä»¶ å…¶ä¸­è¯¥å·¥å…·åŒ…ä¸»è¦åŒ…å« ç”ŸæˆToken ã€ è§£æToken åŠŸèƒ½ NewWithClaims ä¸­åŠ å¯†æ–¹æ³•æœ‰ SigningMethodHS256 ï¼Œ SigningMethodHS384 ã€ SigningMethodHS512 ä¸‰ç§ cropto.Hash æ–¹æ¡ˆ package util import ( setting \"go-gin-example/pkg/settings\" \"time\" \"github.com/dgrijalva/jwt-go\" ) var jwtSecret = [] byte ( setting . JwtSecret ) // Claims å£°æ˜Claimsç»“æ„ä½“ type Claims struct { Username string `json: \"username\"` Password string `json: \"password\"` jwt . StandardClaims } // GenerateToken ç”Ÿæˆå¯†é’¥ func GenerateToken ( username , password string ) ( string , error ) { nowTime := time . Now () expireTime := nowTime . Add ( 3 * time . Hour ) claims := Claims { username , password , jwt . StandardClaims { ExpiresAt : expireTime . Unix (), Issuer : \"gin-blog\" , }, } // å¯¹claims è¿›è¡ŒåŠ å¯† tokenClaims := jwt . NewWithClaims ( jwt . SigningMethodHS256 , claims ) // è·å¾—åŠ å¯†åçš„token // çŒœæµ‹ä¸ºç”Ÿæˆä¸€ä¸ªåŠ å¯†åçš„å­—ç¬¦ä¸²ç»™jwtSecret token , err := tokenClaims . SignedString ( jwtSecret ) return token , err } // ParseToken è§£æå¯†é’¥ func ParseToken ( token string ) ( * Claims , error ) { tokenClaims , err := jwt . ParseWithClaims ( token , & Claims {}, func ( token * jwt . Token ) ( interface {}, error ) { return jwtSecret , nil }) if tokenClaims != nil { if claims , ok := tokenClaims . Claims .( * Claims ); ok && tokenClaims . Valid { return claims , nil } } return nil , err } ç¼–å†™Ginä¸­é—´ä»¶ï¼Œåœ¨ middleware ä¸‹æ–°å»º jwt ç›®å½•ï¼Œåœ¨å…¶ä¸­æ–°å»º jwt.go æ–‡ä»¶å†™å…¥ package jwt import ( \"go-gin-example/pkg/e\" \"go-gin-example/pkg/util\" \"net/http\" \"time\" \"github.com/gin-gonic/gin\" ) // JWT json web token func JWT () gin . HandlerFunc { return func ( c * gin . Context ) { var code int var data interface {} code = e . SUCCESS token := c . Query ( \"token\" ) if token == \"\" { code = e . INVALID_PARAMS } else { claims , err := util . ParseToken ( token ) if err != nil { code = e . ERROR_AUTH_CHECK_TOKEN_FAIL } else if time . Now (). Unix () > claims . ExpiresAt { code = e . ERROR_AUTH_CHECK_TOKEN_TIMEOUT } } if code != e . SUCCESS { c . JSON ( http . StatusUnauthorized , gin . H { \"code\" : code , \"msg\" : e . GetMsg ( code ), \"data\" : data , }) // é€šè¿‡Abortç¡®ä¿å½“å‰çš„handleræœªè¢«è°ƒç”¨, å³å½“éªŒè¯ä¸æ­£ç¡®çš„æ—¶å€™ä¸¢å¼ƒæ‰è¯¥å¤„ç† c . Abort () return } c . Next () } } è·å¾—tokenï¼Œåœ¨ ./models ä¸‹æ–°å»º auth.go æ–‡ä»¶å†™å…¥ package models // Auth Tokenè®¤è¯ type Auth struct { ID int `gorm:\"primary_key\" json:\"id\"` Username string `json:\"username\"` Password string `json:\"password\"` } // CheckAuth éªŒè¯token func CheckAuth ( username , password string ) bool { var auth Auth db . Select ( \"id\" ). Where ( Auth { Username : username , Password : password }). First ( & auth ) if auth . ID > 0 { return true } return false } åœ¨ ./api ä¸‹æ–°å»º auth.go æ–‡ä»¶å†™å…¥ package api import ( \"go-gin-example/models\" \"go-gin-example/pkg/e\" \"go-gin-example/pkg/util\" \"log\" \"net/http\" \"github.com/astaxie/beego/validation\" \"github.com/gin-gonic/gin\" ) type auth struct { Username string `valid: \"Required; MaxSize(50)\" ` Password string `valid: \"Required; MaxSize(50)\"` } // GetAuth è·å–è®¤è¯ func GetAuth ( c * gin . Context ) { username := c . Query ( \"username\" ) password := c . Query ( \"password\" ) valid := validation . Validation {} a := auth { Username : username , Password : password } ok , _ := valid . Valid ( & a ) data := make ( map [ string ] interface {}) code := e . INVALID_PARAMS if ok { isExist := models . CheckAuth ( username , password ) // å¦‚æœå­˜åœ¨è¯¥è´¦å· if isExist { token , err := util . GenerateToken ( username , password ) if err != nil { code = e . ERROR_AUTH_TOKEN } else { data [ \"token\" ] = token code = e . SUCCESS } } else { // ä¸å­˜åœ¨è´¦å· code = e . ERROR_AUTH } } else { for _ , err := range valid . Errors { log . Println ( err . Key , err . Message ) } } c . JSON ( http . StatusOK , gin . H { \"code\" : code , \"msg\" : e . GetMsg ( code ), \"data\" : data , }) } ä¿®æ”¹ router.go æ–‡ä»¶ package routers import ( \"go-gin-example/middleware/jwt\" setting \"go-gin-example/pkg/settings\" \"go-gin-example/routers/api\" v1 \"go-gin-example/routers/api/v1\" \"github.com/gin-gonic/gin\" ) // InitRouter åˆå§‹åŒ–è·¯ç”± func InitRouter () * gin . Engine { r := gin . New () r . Use ( gin . Logger ()) r . Use ( gin . Recovery ()) gin . SetMode ( setting . RunMode ) // è°ƒç”¨è®¤è¯æ¥å£ r . GET ( \"/auth\" , api . GetAuth ) apiv1 := r . Group ( \"/api/v1\" ) // Groupå†…çš„æ‰€æœ‰è¯·æ±‚éƒ½éœ€è¦ç»è¿‡JWT apiv1 . Use ( jwt . JWT ()) { apiv1 . GET ( \"/tags\" , v1 . GetTags ) apiv1 . POST ( \"/tags\" , v1 . AddTag ) apiv1 . PUT ( \"/tags/:id\" , v1 . EditTag ) apiv1 . DELETE ( \"/tags/:id\" , v1 . DeleteTag ) apiv1 . GET ( \"/articles\" , v1 . GetArticles ) apiv1 . GET ( \"/articles/:id\" , v1 . GetArticle ) apiv1 . POST ( \"/articles\" , v1 . AddArticle ) apiv1 . PUT ( \"/articles/:id\" , v1 . EditTag ) apiv1 . DELETE ( \"/atricles/:id\" , v1 . DeleteTag ) } return r } è°ƒç”¨ è®¿é—® http://127.0.0.1:8000/auth?username=test&password=test123456 è·å¾—token å¸¦ç€tokenè®¿é—®api http://127.0.0.1:8000/api/v1/articles?token=eyJhbGci...","text_tokens":["ä¸ºä»€ä¹ˆ","å³å½“","beego","0.1","ä¸‹","password","ä½†æ˜¯","http","_","ä¸","required","è¿›è¡Œ",",","edittag","æ—¶å€™","primary",":","api","åŒ…å«","success","getauth","package","tags","message","setting","getarticles","handlerfunc","æ¥","...","åœ¨","å","hash","new","è·å–","test","`","ï¼š","hour","ç»™","éƒ½","import","å¯¹","gorm","make","æ–¹æ³•","statusunauthorized"," ","context","expiresat","05","c","ç»“æ„","invalid","gin","parsewithclaims","e","è¿™äº›",">","addtag","net","fail","éšæ„","util","add","interface","bool","å­—ç¬¦ä¸²","next","?","nowtime","å·¥å…·åŒ…","å†…","å·¥å…·","auth",".","æ–¹å¼","æ–°å»º","åŠŸèƒ½","true","else","recovery","å¯ä»¥","get","ä¿®æ”¹","çš„","ä¾èµ–","è®¿é—®","ok","where","runmode","apiv1","blog","var","timeout","pkg","errors","æ˜¯","false","å­—ç¬¦","println","ä¸‰ç§","token","example","web","ä¸¢å¼ƒ","{","if","post","å¸¦","å†™å…¥","å½“å‰","ã€‚","å®‰å…¨","standardclaims","jwt","50","getmsg","data","åˆå§‹åŒ–","put","å¥½","params","è·¯ç”±","id","dgrijalva","0","github",")","æœ‰","first","initrouter","return","settings","handler","setmode","æ¥å£","è´¦å·","ä»€ä¹ˆ","å­˜åœ¨","å¦‚æœ","router","valid","code","æ‰","username","u","ä¸»è¦","string","è·å¾—","error","test123456","çŒœæµ‹","ã€","for","&&","validation","v1","addarticle","è¦","ä¸­é—´ä»¶","eyjhbgci","check","err","!","h","newwithclaims","abort","]","è¿™","isexist","use","è¯·æ±‚","åŒ…","ç€","-","signingmethodhs384","db","=","127.0","è™½ç„¶","/","è§£æ","time","engine","ç¼–å†™","ï¼Œ","issuer","è°ƒç”¨","å› æ­¤","go","åˆå§‹","deletetag","models","claims","signedstring","ä½¿ç”¨","å¦‚ä½•","æ–‡ä»¶","ç»è¿‡","com","atricles","&","msg","cropto","struct","range","routers","r","*","ä¸‹è½½","middleware","ä½“","å£°æ˜","key","json","äº†","tokenclaims","type","é€šè¿‡","expiretime","è¯¥","parsetoken","æ–¹æ¡ˆ","generatetoken","å…¶ä¸­","unix","ç›®å½•","æœª","æ ·å­",";","æ­£ç¡®","å¤„ç†","a","å¯†é’¥","éªŒè¯","map","delete","logger","signingmethodhs256","æ‰€æœ‰","8000","3","byte","int","checkauth","gettags","astaxie","ä¸€ä¸ª","ç¡®ä¿","è§£å†³","(","åŠ å¯†","maxsize","articles","ä¸º","}","group","select","signingmethodhs512","éœ€è¦","now","gonic","ä¸­","nil","ä¸­é—´","è¢«","\"","è®¤è¯","jwtsecret","func","query","ç”Ÿæˆ","log","[","getarticle","statusok"],"title":"go-gin-example 05ï¼šJWT","title_tokens":["-","gin","example","jwt"," ","go","05","ï¼š"]},{"location":"Golang/Project/go-gin-example/05 JWT/#go-gin-example-05jwt","text":"","text_tokens":[],"title":"go-gin-example 05ï¼šJWT","title_tokens":["-","gin","example","jwt"," ","go","05","ï¼š"]},{"location":"Golang/Project/go-gin-example/05 JWT/#jwt","text":"å½“å‰çš„APIæ¥å£è™½ç„¶ç¼–å†™å¥½äº†ï¼Œä½†æ˜¯è¿™äº›APIå¯ä»¥è¢«éšæ„è°ƒç”¨ï¼Œè¿™æ ·å­æ˜¯ä¸å®‰å…¨çš„ã€‚å› æ­¤éœ€è¦é€šè¿‡ jwt-go çš„æ–¹å¼æ¥è§£å†³","text_tokens":["ä½†æ˜¯","æ–¹å¼","äº†","é€šè¿‡","å¯ä»¥","ä¸","æ ·å­","api","çš„","æ¥","è¿™","è§£å†³","-","æ˜¯","è™½ç„¶","ç¼–å†™","ï¼Œ","è°ƒç”¨","å› æ­¤"," ","go","å½“å‰","ã€‚","å®‰å…¨","éœ€è¦","jwt","å¥½","è¿™äº›","è¢«","éšæ„","æ¥å£"],"title":"ä¸ºä»€ä¹ˆè¦JWT","title_tokens":["è¦","ä¸ºä»€ä¹ˆ","jwt","ä»€ä¹ˆ"]},{"location":"Golang/Project/go-gin-example/05 JWT/#jwt_1","text":"ä¸‹è½½ä¾èµ–åŒ…ï¼š go get -u github.com/dgrijalva/jwt-go ç¼–å†™ ./pkg/util ä¸‹çš„æ–°å»º jwt.go æ–‡ä»¶ å…¶ä¸­è¯¥å·¥å…·åŒ…ä¸»è¦åŒ…å« ç”ŸæˆToken ã€ è§£æToken åŠŸèƒ½ NewWithClaims ä¸­åŠ å¯†æ–¹æ³•æœ‰ SigningMethodHS256 ï¼Œ SigningMethodHS384 ã€ SigningMethodHS512 ä¸‰ç§ cropto.Hash æ–¹æ¡ˆ package util import ( setting \"go-gin-example/pkg/settings\" \"time\" \"github.com/dgrijalva/jwt-go\" ) var jwtSecret = [] byte ( setting . JwtSecret ) // Claims å£°æ˜Claimsç»“æ„ä½“ type Claims struct { Username string `json: \"username\"` Password string `json: \"password\"` jwt . StandardClaims } // GenerateToken ç”Ÿæˆå¯†é’¥ func GenerateToken ( username , password string ) ( string , error ) { nowTime := time . Now () expireTime := nowTime . Add ( 3 * time . Hour ) claims := Claims { username , password , jwt . StandardClaims { ExpiresAt : expireTime . Unix (), Issuer : \"gin-blog\" , }, } // å¯¹claims è¿›è¡ŒåŠ å¯† tokenClaims := jwt . NewWithClaims ( jwt . SigningMethodHS256 , claims ) // è·å¾—åŠ å¯†åçš„token // çŒœæµ‹ä¸ºç”Ÿæˆä¸€ä¸ªåŠ å¯†åçš„å­—ç¬¦ä¸²ç»™jwtSecret token , err := tokenClaims . SignedString ( jwtSecret ) return token , err } // ParseToken è§£æå¯†é’¥ func ParseToken ( token string ) ( * Claims , error ) { tokenClaims , err := jwt . ParseWithClaims ( token , & Claims {}, func ( token * jwt . Token ) ( interface {}, error ) { return jwtSecret , nil }) if tokenClaims != nil { if claims , ok := tokenClaims . Claims .( * Claims ); ok && tokenClaims . Valid { return claims , nil } } return nil , err } ç¼–å†™Ginä¸­é—´ä»¶ï¼Œåœ¨ middleware ä¸‹æ–°å»º jwt ç›®å½•ï¼Œåœ¨å…¶ä¸­æ–°å»º jwt.go æ–‡ä»¶å†™å…¥ package jwt import ( \"go-gin-example/pkg/e\" \"go-gin-example/pkg/util\" \"net/http\" \"time\" \"github.com/gin-gonic/gin\" ) // JWT json web token func JWT () gin . HandlerFunc { return func ( c * gin . Context ) { var code int var data interface {} code = e . SUCCESS token := c . Query ( \"token\" ) if token == \"\" { code = e . INVALID_PARAMS } else { claims , err := util . ParseToken ( token ) if err != nil { code = e . ERROR_AUTH_CHECK_TOKEN_FAIL } else if time . Now (). Unix () > claims . ExpiresAt { code = e . ERROR_AUTH_CHECK_TOKEN_TIMEOUT } } if code != e . SUCCESS { c . JSON ( http . StatusUnauthorized , gin . H { \"code\" : code , \"msg\" : e . GetMsg ( code ), \"data\" : data , }) // é€šè¿‡Abortç¡®ä¿å½“å‰çš„handleræœªè¢«è°ƒç”¨, å³å½“éªŒè¯ä¸æ­£ç¡®çš„æ—¶å€™ä¸¢å¼ƒæ‰è¯¥å¤„ç† c . Abort () return } c . Next () } } è·å¾—tokenï¼Œåœ¨ ./models ä¸‹æ–°å»º auth.go æ–‡ä»¶å†™å…¥ package models // Auth Tokenè®¤è¯ type Auth struct { ID int `gorm:\"primary_key\" json:\"id\"` Username string `json:\"username\"` Password string `json:\"password\"` } // CheckAuth éªŒè¯token func CheckAuth ( username , password string ) bool { var auth Auth db . Select ( \"id\" ). Where ( Auth { Username : username , Password : password }). First ( & auth ) if auth . ID > 0 { return true } return false } åœ¨ ./api ä¸‹æ–°å»º auth.go æ–‡ä»¶å†™å…¥ package api import ( \"go-gin-example/models\" \"go-gin-example/pkg/e\" \"go-gin-example/pkg/util\" \"log\" \"net/http\" \"github.com/astaxie/beego/validation\" \"github.com/gin-gonic/gin\" ) type auth struct { Username string `valid: \"Required; MaxSize(50)\" ` Password string `valid: \"Required; MaxSize(50)\"` } // GetAuth è·å–è®¤è¯ func GetAuth ( c * gin . Context ) { username := c . Query ( \"username\" ) password := c . Query ( \"password\" ) valid := validation . Validation {} a := auth { Username : username , Password : password } ok , _ := valid . Valid ( & a ) data := make ( map [ string ] interface {}) code := e . INVALID_PARAMS if ok { isExist := models . CheckAuth ( username , password ) // å¦‚æœå­˜åœ¨è¯¥è´¦å· if isExist { token , err := util . GenerateToken ( username , password ) if err != nil { code = e . ERROR_AUTH_TOKEN } else { data [ \"token\" ] = token code = e . SUCCESS } } else { // ä¸å­˜åœ¨è´¦å· code = e . ERROR_AUTH } } else { for _ , err := range valid . Errors { log . Println ( err . Key , err . Message ) } } c . JSON ( http . StatusOK , gin . H { \"code\" : code , \"msg\" : e . GetMsg ( code ), \"data\" : data , }) } ä¿®æ”¹ router.go æ–‡ä»¶ package routers import ( \"go-gin-example/middleware/jwt\" setting \"go-gin-example/pkg/settings\" \"go-gin-example/routers/api\" v1 \"go-gin-example/routers/api/v1\" \"github.com/gin-gonic/gin\" ) // InitRouter åˆå§‹åŒ–è·¯ç”± func InitRouter () * gin . Engine { r := gin . New () r . Use ( gin . Logger ()) r . Use ( gin . Recovery ()) gin . SetMode ( setting . RunMode ) // è°ƒç”¨è®¤è¯æ¥å£ r . GET ( \"/auth\" , api . GetAuth ) apiv1 := r . Group ( \"/api/v1\" ) // Groupå†…çš„æ‰€æœ‰è¯·æ±‚éƒ½éœ€è¦ç»è¿‡JWT apiv1 . Use ( jwt . JWT ()) { apiv1 . GET ( \"/tags\" , v1 . GetTags ) apiv1 . POST ( \"/tags\" , v1 . AddTag ) apiv1 . PUT ( \"/tags/:id\" , v1 . EditTag ) apiv1 . DELETE ( \"/tags/:id\" , v1 . DeleteTag ) apiv1 . GET ( \"/articles\" , v1 . GetArticles ) apiv1 . GET ( \"/articles/:id\" , v1 . GetArticle ) apiv1 . POST ( \"/articles\" , v1 . AddArticle ) apiv1 . PUT ( \"/articles/:id\" , v1 . EditTag ) apiv1 . DELETE ( \"/atricles/:id\" , v1 . DeleteTag ) } return r } è°ƒç”¨ è®¿é—® http://127.0.0.1:8000/auth?username=test&password=test123456 è·å¾—token å¸¦ç€tokenè®¿é—®api http://127.0.0.1:8000/api/v1/articles?token=eyJhbGci...","text_tokens":["å³å½“","beego","0.1","ä¸‹","password","http","_","ä¸","required","è¿›è¡Œ",",","edittag","æ—¶å€™","primary",":","success","åŒ…å«","api","getauth","package","tags","message","setting","getarticles","handlerfunc","...","åœ¨","å","hash","new","è·å–","test","`","ï¼š","hour","ç»™","éƒ½","import","å¯¹","make","æ–¹æ³•","statusunauthorized"," ","context","expiresat","c","ç»“æ„","invalid","gin","parsewithclaims","e",">","addtag","net","fail","util","add","interface","bool","å­—ç¬¦ä¸²","next","?","nowtime","å·¥å…·åŒ…","å†…","å·¥å…·","auth",".","æ–°å»º","åŠŸèƒ½","true","recovery","else","get","ä¿®æ”¹","ä¾èµ–","çš„","è®¿é—®","ok","where","runmode","apiv1","blog","var","timeout","pkg","errors","false","å­—ç¬¦","println","ä¸‰ç§","token","example","web","ä¸¢å¼ƒ","{","if","post","å¸¦","å†™å…¥","å½“å‰","standardclaims","50","jwt","åˆå§‹åŒ–","getmsg","data","put","è·¯ç”±","params","id","dgrijalva","0","github",")","æœ‰","first","initrouter","return","settings","handler","setmode","æ¥å£","è´¦å·","å­˜åœ¨","å¦‚æœ","router","valid","code","æ‰","username","u","ä¸»è¦","string","è·å¾—","error","test123456","çŒœæµ‹","ã€","for","&&","validation","v1","addarticle","eyjhbgci","ä¸­é—´ä»¶","check","err","use","h","newwithclaims","abort","]","isexist","è¯·æ±‚","ç€","åŒ…","-","signingmethodhs384","db","=","127.0","/","è§£æ","time","engine","ç¼–å†™","ï¼Œ","issuer","è°ƒç”¨","go","åˆå§‹","deletetag","models","claims","signedstring","æ–‡ä»¶","ç»è¿‡","com","atricles","&","msg","cropto","struct","range","routers","r","*","ä¸‹è½½","middleware","ä½“","å£°æ˜","key","json","tokenclaims","!","type","expiretime","parsetoken","è¯¥","é€šè¿‡","æ–¹æ¡ˆ","generatetoken","å…¶ä¸­","unix","ç›®å½•","æœª",";","æ­£ç¡®","gorm","å¤„ç†","a","å¯†é’¥","éªŒè¯","map","delete","logger","signingmethodhs256","æ‰€æœ‰","8000","3","byte","int","checkauth","gettags","astaxie","ä¸€ä¸ª","ç¡®ä¿","(","åŠ å¯†","maxsize","articles","ä¸º","}","group","select","signingmethodhs512","now","éœ€è¦","gonic","ä¸­","nil","ä¸­é—´","è¢«","\"","è®¤è¯","jwtsecret","func","query","ç”Ÿæˆ","log","[","getarticle","statusok"],"title":"å¦‚ä½•ä½¿ç”¨JWT","title_tokens":["å¦‚ä½•","jwt","ä½¿ç”¨"]},{"location":"Golang/Project/go-gin-example/08 Swagger/","text":"go-gin-example 08ï¼š Swagger Swaggeræ˜¯ä»€ä¹ˆ? æ¥å£ç”Ÿæˆå™¨ï¼šè‡ªåŠ¨ç”Ÿæˆæ¥å£æ–‡æ¡£ å¦‚ä½•åœ¨golangä¸­ä½¿ç”¨Swagger å®‰è£… å®‰è£…swag go get -u github.com/swaggo/swag/cmd/swag ï¼Œå¦‚æœæ²¡æœ‰å°† $GOROOT/bin æ·»åŠ åˆ° $PATH ä¸­ï¼Œåˆ™éœ€è¦å°†swagçš„å¯æ‰§è¡Œæ–‡ä»¶ç§»åˆ° $GOBIN ä¸­ éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ $ swag -v swag version v1.6.3 å®‰è£…gin-swagger go get -u github.com/swaggo/gin-swagger go get -u github.com/swaggo/gin-swagger/swaggerFiles ç¼–å†™swag // Response å®šä¹‰ swag æ–‡æ¡£è¿”å›çš„ç»“æ„ä½“ type Response struct { Code int ` json : \" code \" ` Msg string ` json : \" msg \" ` Data interface {} ` json : \" data \" ` } // GetArticles è·å–å¤šä¸ªæ–‡ç«  // @ Summary è·å–å¤šä¸ªæ–‡ç«  // @ Produce json // @ Param tag_id body int false \" TagID \" // @ Param state body int false \" State \" // @ Param created_by body int false \" CreatedBy \" // @ Success 200 { object } Response // @ Failure 500 { object } Response // @ Router / api / v1 / articles [ get ] func GetArticles ( c * gin . Context ) { data : = make ( map [ string ] interface {} ) maps : = make ( map [ string ] interface {} ) valid : = validation . Validation {} var state = - 1 if arg : = c . Query ( \" state \" ) ; arg != \"\" { state = com . StrTo ( arg ) . MustInt () maps [ \" state \" ] = state valid . Range ( state , 0 , 1 , \" state \" ) . Message ( \" çŠ¶æ€åªå…è®¸0æˆ–1 \" ) } var tagID = - 1 if arg : = c . Query ( \" tag_id \" ) ; arg != \"\" { tagID = com . StrTo ( arg ) . MustInt () maps [ \" tag_id \" ] = tagID valid . Min ( tagID , 1 , \" tag_id \" ) . Message ( \" æ ‡ç­¾IDå¿…é¡»å¤§äº0 \" ) } code : = e . INVALID_PARAMS if ! valid . HasErrors () { data [ \" list \" ] = models . GetArticles ( util . GetPage ( c ) , setting . PageSize , maps ) data [ \" total \" ] = models . GetTagTotal ( maps ) code = e . SUCCESS } else { for _ , err : = range valid . Errors { log . Printf ( \" err.key:%s, err.message:%s \" , err . Key , err . Message ) } } c . JSON ( http . StatusOK , gin . H { \" code \" : code , \" msg \" : e . GetMsg ( code ) , \" data \" : data , } ) } æ ¼å¼ // @Summary APIæè¿° // @Produce json[ç”Ÿæˆ..å†…å®¹] // @Param id path/body/query int[type] false/true \"ID\"[ç¨‹åºä¸­å¯¹åº”å˜é‡åå­—] // @Success 200 string \"ok\" --æˆåŠŸè¿”å›ä¿¡æ¯ // @Failure 500 string \"bad\" --å¤±è´¥è¿”å›ä¿¡æ¯ // @Routers api/v1/article/{id} [GET] è¯·æ±‚id, è¯·æ±‚æ–¹æ³• æ•ˆæœ è®¿é—® http://127.0.0.1:8000/swagger/index.html","text_tokens":["swaggo","total","æ ‡ç­¾","ä¿¡æ¯","_","http","swagger","version",",",":","success","api","getarticles","min","message","setting","tagid","500","pagesize","object","åœ¨","è·å–","å¿…é¡»","`","ï¼š","å¤§äº","cmd","æ·»åŠ ","make","æ–¹æ³•"," ","context","å¤šä¸ª","c","ç¨‹åº","ç»“æ„","invalid","gin","e","swag","å¯¹åº”","list","html","å˜é‡","article","interface","util","æ˜¯å¦","param","è¿”å›","08","å®šä¹‰","?","æè¿°","golang","æ–‡ç« ",".","true","æˆå™¨","else","get","$","createdby","body","çš„","gettagtotal","è®¿é—®","æ–‡æ¡£","ok","failure","å¤±è´¥","var","å®‰è£…","mustint","errors","æ˜¯","false","produce","åˆ°","example","ç§»","{","if","getmsg","data","params","@","id","0","github","s",")","åå­—","æ¥å£","ä»€ä¹ˆ","getpage","å¦‚æœ","swaggerfiles","response","router","valid","code","u","string","bad","state","gobin","æ‰§è¡Œ","for","validation","created","v1","goroot","å¯æ‰§è¡Œæ–‡ä»¶","summary","err","è¯·æ±‚","h","]","-","127.0","=","maps","/","strto","çŠ¶æ€","å°†","by","ï¼Œ","ç¼–å†™","æ²¡æœ‰","go","models","æ•ˆæœ","ä½¿ç”¨","å¦‚ä½•","æ–‡ä»¶","arg","æˆåŠŸ","å…è®¸","è‡ªåŠ¨","com","msg","routers","struct","range","v","åª","*","haserrors","ä½“","key","json","200","ç”Ÿæˆå™¨","type","1","!","tag","bin","v1.6",";","0.1","æˆ–","map","éªŒè¯","8000","3","int","..","æ ¼å¼","index","å†…å®¹","(","articles","è¡Œæ–‡","%","}","éœ€è¦","printf","ä¸­","\"","path","func","åˆ™","query","ç”Ÿæˆ","log","[","statusok"],"title":"go-gin-example 08ï¼š Swagger","title_tokens":["-","gin","example"," ","go","08","ï¼š","swagger"]},{"location":"Golang/Project/go-gin-example/08 Swagger/#go-gin-example-08-swagger","text":"","text_tokens":[],"title":"go-gin-example 08ï¼š Swagger","title_tokens":["-","gin","example"," ","go","08","ï¼š","swagger"]},{"location":"Golang/Project/go-gin-example/08 Swagger/#swagger","text":"æ¥å£ç”Ÿæˆå™¨ï¼šè‡ªåŠ¨ç”Ÿæˆæ¥å£æ–‡æ¡£","text_tokens":["æ–‡æ¡£","è‡ªåŠ¨","æˆå™¨","ç”Ÿæˆå™¨","ç”Ÿæˆ","æ¥å£","ï¼š"],"title":"Swaggeræ˜¯ä»€ä¹ˆ?","title_tokens":["æ˜¯","?","swagger","ä»€ä¹ˆ"]},{"location":"Golang/Project/go-gin-example/08 Swagger/#golangswagger","text":"","text_tokens":[],"title":"å¦‚ä½•åœ¨golangä¸­ä½¿ç”¨Swagger","title_tokens":["golang","ä¸­","ä½¿ç”¨","å¦‚ä½•","åœ¨","swagger"]},{"location":"Golang/Project/go-gin-example/08 Swagger/#_1","text":"å®‰è£…swag go get -u github.com/swaggo/swag/cmd/swag ï¼Œå¦‚æœæ²¡æœ‰å°† $GOROOT/bin æ·»åŠ åˆ° $PATH ä¸­ï¼Œåˆ™éœ€è¦å°†swagçš„å¯æ‰§è¡Œæ–‡ä»¶ç§»åˆ° $GOBIN ä¸­ éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ $ swag -v swag version v1.6.3 å®‰è£…gin-swagger go get -u github.com/swaggo/gin-swagger go get -u github.com/swaggo/gin-swagger/swaggerFiles","text_tokens":["swaggo","v","å¦‚æœ","swaggerfiles",".","u","get","version","swagger","bin","v1.6","gobin","$","æ‰§è¡Œ","çš„","éªŒè¯","3","goroot","å¯æ‰§è¡Œæ–‡ä»¶","å®‰è£…","-","cmd","/","æ·»åŠ ","è¡Œæ–‡","å°†","åˆ°","ï¼Œ","ç§»","æ²¡æœ‰"," ","go","éœ€è¦","ä¸­","gin","swag","æ–‡ä»¶","github","path","æˆåŠŸ","åˆ™","com","æ˜¯å¦"],"title":"å®‰è£…","title_tokens":["å®‰è£…"]},{"location":"Golang/Project/go-gin-example/08 Swagger/#swag","text":"// Response å®šä¹‰ swag æ–‡æ¡£è¿”å›çš„ç»“æ„ä½“ type Response struct { Code int ` json : \" code \" ` Msg string ` json : \" msg \" ` Data interface {} ` json : \" data \" ` } // GetArticles è·å–å¤šä¸ªæ–‡ç«  // @ Summary è·å–å¤šä¸ªæ–‡ç«  // @ Produce json // @ Param tag_id body int false \" TagID \" // @ Param state body int false \" State \" // @ Param created_by body int false \" CreatedBy \" // @ Success 200 { object } Response // @ Failure 500 { object } Response // @ Router / api / v1 / articles [ get ] func GetArticles ( c * gin . Context ) { data : = make ( map [ string ] interface {} ) maps : = make ( map [ string ] interface {} ) valid : = validation . Validation {} var state = - 1 if arg : = c . Query ( \" state \" ) ; arg != \"\" { state = com . StrTo ( arg ) . MustInt () maps [ \" state \" ] = state valid . Range ( state , 0 , 1 , \" state \" ) . Message ( \" çŠ¶æ€åªå…è®¸0æˆ–1 \" ) } var tagID = - 1 if arg : = c . Query ( \" tag_id \" ) ; arg != \"\" { tagID = com . StrTo ( arg ) . MustInt () maps [ \" tag_id \" ] = tagID valid . Min ( tagID , 1 , \" tag_id \" ) . Message ( \" æ ‡ç­¾IDå¿…é¡»å¤§äº0 \" ) } code : = e . INVALID_PARAMS if ! valid . HasErrors () { data [ \" list \" ] = models . GetArticles ( util . GetPage ( c ) , setting . PageSize , maps ) data [ \" total \" ] = models . GetTagTotal ( maps ) code = e . SUCCESS } else { for _ , err : = range valid . Errors { log . Printf ( \" err.key:%s, err.message:%s \" , err . Key , err . Message ) } } c . JSON ( http . StatusOK , gin . H { \" code \" : code , \" msg \" : e . GetMsg ( code ) , \" data \" : data , } ) } æ ¼å¼ // @Summary APIæè¿° // @Produce json[ç”Ÿæˆ..å†…å®¹] // @Param id path/body/query int[type] false/true \"ID\"[ç¨‹åºä¸­å¯¹åº”å˜é‡åå­—] // @Success 200 string \"ok\" --æˆåŠŸè¿”å›ä¿¡æ¯ // @Failure 500 string \"bad\" --å¤±è´¥è¿”å›ä¿¡æ¯ // @Routers api/v1/article/{id} [GET] è¯·æ±‚id, è¯·æ±‚æ–¹æ³•","text_tokens":["total","æ ‡ç­¾","ä¿¡æ¯","_","http",",",":","success","api","getarticles","min","message","setting","tagid","500","pagesize","object","è·å–","å¿…é¡»","`","å¤§äº","make","æ–¹æ³•"," ","context","å¤šä¸ª","c","ç¨‹åº","ç»“æ„","invalid","gin","e","swag","å¯¹åº”","list","å˜é‡","article","interface","util","param","å®šä¹‰","è¿”å›","æè¿°","æ–‡ç« ",".","true","else","get","createdby","body","çš„","gettagtotal","æ–‡æ¡£","ok","failure","å¤±è´¥","var","mustint","errors","false","produce","{","if","getmsg","data","params","@","id","0","s",")","åå­—","getpage","response","router","valid","code","bad","string","state","for","validation","created","v1","summary","err","è¯·æ±‚","h","]","-","=","maps","/","strto","çŠ¶æ€","by","models","arg","æˆåŠŸ","å…è®¸","com","msg","routers","struct","range","åª","*","haserrors","ä½“","key","json","200","1","type","!","tag",";","æˆ–","map","int","..","æ ¼å¼","å†…å®¹","(","articles","%","}","printf","ä¸­","\"","path","func","query","ç”Ÿæˆ","log","[","statusok"],"title":"ç¼–å†™swag","title_tokens":["ç¼–å†™","swag"]},{"location":"Golang/Project/go-gin-example/08 Swagger/#_2","text":"è®¿é—® http://127.0.0.1:8000/swagger/index.html","text_tokens":["127.0","0.1",":","/","8000","html","è®¿é—®","."," ","http","index","swagger"],"title":"æ•ˆæœ","title_tokens":["æ•ˆæœ"]},{"location":"Golang/Project/go-gin-example/09 Docker/","text":"go-gin-example 09ï¼šDocker Dockeræ˜¯ä»€ä¹ˆ Docker is a set of platform as a service (PaaS) products that use OS-level virtualization to deliver software in packages called containers.[6] Containers are isolated from one another and bundle their own software, libraries and configuration files; they can communicate with each other through well-defined channels.[7] All containers are run by a single operating-system kernel and are thus more lightweight than virtual machines.[8] Dockeræ˜¯Paasçš„äº§å“, é€šè¿‡è¢«æˆä¸º å®¹å™¨ çš„ ç³»ç»Ÿçº§åˆ« çš„è™šæ‹ŸåŒ–äº¤ä»˜è½¯ä»¶. å¦‚ä½•ä½¿ç”¨Docker å®‰è£…Docker(WIN10 PRO) å³é”®WINDOWS - åº”ç”¨å’ŒåŠŸèƒ½ - ç¨‹åºå’ŒåŠŸèƒ½ - å¯ç”¨æˆ–å…³é—­WINDOSåŠŸèƒ½ - å¼€å¯Hyper-V å¼€å¯ Hyper-V å¯èƒ½å¯¼è‡´ ShadowSocksR ç«¯å£è¢«å ç”¨ å®˜ç½‘ DockeråŸºæœ¬æŒ‡ä»¤ ç¼–å†™Dockerfile FROM golang:latest ENV GOPROXY https://goproxy.cn,direct WORKDIR $GOPATH /src/go-gin-example COPY . $GOPATH /src/go-gin-example RUN go build . EXPOSE 8000 ENTRYPOINT [ \"./go-gin-example\" ] 1. FROM : æŒ‡å®šåŸºç¡€é•œåƒ, è¯¥æŒ‡ä»¤å¿…é¡»è¦æœ‰,ä¸”å¾—ä¸ºç¬¬ä¸€æ¡ 2. WORKDIR : æŒ‡å®šå·¥ä½œç›®å½•è·¯å¾„, è‹¥ç›®å½•ä¸å­˜åœ¨, åˆ™ä¼šåˆ›å»ºæ”¹ç›®å½• 3. COPY : æºè·¯å¾„ ... ç›®æ ‡è·¯å¾„, COPY æŒ‡ä»¤å°† Dockerfile æ–‡ä»¶æ‰€å­˜åœ¨çš„ä¸Šä¸‹æ–‡ç›®å½• å¤åˆ¶ åˆ°ç›®æ ‡è·¯å¾„ä½ç½® 4. RUN : æ‰§è¡Œå‘½ä»¤ 5. EXPOSE : å£°æ˜ è¿è¡Œæ—¶å®¹å™¨ æä¾›æœåŠ¡ç«¯å£, ä»…ä»…æ˜¯ä¸€ä¸ª å£°æ˜ , ä¸ä¼šå› ä¸ºè¿™ä¸ªå£°æ˜è€Œå¼€å¯è¿™ä¸ªç«¯å£ 6. ENTRYPOINT : æŒ‡å®š å®¹å™¨ å¯åŠ¨ç¨‹åºçš„åŠå‚æ•°(æ‰§è¡Œ ./go-gin-example) è¿è¡Œ docker build - t gin - blog - docker . docker images docker run - p 8000 : 8000 gin - blog - docker 1. åœ¨ . å½“å‰ç¯å¢ƒè¿è¡Œ docker build åˆ›å»º/æ„å»ºé•œåƒ, -t æŒ‡å®šåç§° 2. docker images æŸ¥çœ‹é•œåƒæ˜¯å¦åˆ›å»ºæˆåŠŸ 3. åœ¨æœ¬åœ°8000ç«¯å£è¿è¡Œå®¹å™¨ 4. å‘ç° dial tcp 127.0.0.1:3306: connect: connection refused é”™è¯¯ é…ç½®Mysql Docker docker pull mysql docker run --name mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=root -d mysql 1. æ‹‰å–mysqlé•œåƒ 2. é…ç½®mysqlç«¯å£ ä¿®æ”¹é…ç½®æ–‡ä»¶ conf.ini [database] TYPE = mysql USER = root PASSWORD = rootroot HOST = mysql:3306 NAME = blog TABLE_PREFIX = blog_ å…³è”Golangå®¹å™¨å’ŒMysqlå®¹å™¨ docker run --link mysql:mysql -p 8000:8000 gin-blog-docker æ•ˆæœ","text_tokens":["thus","è™šæ‹Ÿ","workdir","æ—¶","virtualization","set","images","ä¸Šä¸‹","password","æ‰§è¡Œå‘½ä»¤","_","ä¸","can",",","prefix",":","name","table","ç¯å¢ƒ","service","æä¾›","latest","more","ä¸”","...","ä½ç½®","4","è€Œ","åœ¨","æœ¬åœ°","å¿…é¡»","root","database","ï¼š","è¿™ä¸ª","å ç”¨","ini","env"," ","6","ä¸ä¼š","docker","ç¨‹åº","gin","e","d","goproxy","src","libraries","åŸºç¡€","é”™è¯¯","ä¸€æ¡","ç«¯å£","each","å¯ç”¨","æ˜¯å¦","å®˜ç½‘","å®¹å™¨","tcp","windos","golang","other","gopath","2","æ”¹","8","they","expose","single",".","åŠŸèƒ½","channels","dial","ä¸Šä¸‹æ–‡","defined","with","products","ä¿®æ”¹","is","isolated","åŸºæœ¬","$","è‹¥","deliver","çš„","shadowsocksr","build","packages","è½¯ä»¶","3306","çº§åˆ«","blog","connect","rootroot","å®‰è£…","than","æ˜¯","ä¸‹æ–‡","that","å¤åˆ¶","åº”ç”¨","åˆ°","example","æº","å¯åŠ¨","to","t","å½“å‰","æœåŠ¡","machines","own","through","æŒ‡å®š","å¯¼è‡´","æˆä¸º","åç§°","æŒ‡ä»¤","one","è·¯å¾„",")","æœ‰","å¾—","virtual","ä»€ä¹ˆ","09","ç¬¬ä¸€","å­˜åœ¨","host","paas","ç³»ç»Ÿ","æ„å»º","run","mysql","configuration","ä»…ä»…","é…ç½®æ–‡ä»¶","5","conf","å’Œ","æ‰§è¡Œ","æ‰€","è¦","use","]","dockerfile","å¯èƒ½","are","è™šæ‹ŸåŒ–","containers","refused","-","127.0","level","=","/","well","å…³è”","å°†","their","by","ç¼–å†™","é•œåƒ","of","go","link","å¼€å¯","å› ä¸º","æ•ˆæœ","another","ä½¿ç”¨","in","å¦‚ä½•","from","æ–‡ä»¶","æˆåŠŸ","ç¬¬ä¸€æ¡","direct","é…ç½®","system","and","å‚æ•°","pull","v","kernel","pro","ç›®æ ‡","äº§å“","communicate","windows","å£°æ˜","1","7","é€šè¿‡","type","è¯¥","entrypoint","æŸ¥çœ‹","ç›®å½•","a",";","0.1","åˆ›å»º","æˆ–","8000","user","connection","3","å·¥ä½œ","software","operating","hyper","ä¼š","os","ä¸€ä¸ª","lightweight","(","cn","å‘½ä»¤","ä¸º","åŠ","å…³é—­","äº¤ä»˜","win10","https","called","all","p","copy","æ‹‰å–","è¢«","\"","è¿è¡Œ","bundle","åˆ™","platform","files","as","[","å‘ç°","å³é”®"],"title":"go-gin-example 09ï¼šDocker","title_tokens":["-","gin","example"," ","go","docker","ï¼š","09"]},{"location":"Golang/Project/go-gin-example/09 Docker/#go-gin-example-09docker","text":"","text_tokens":[],"title":"go-gin-example 09ï¼šDocker","title_tokens":["-","gin","example"," ","go","docker","ï¼š","09"]},{"location":"Golang/Project/go-gin-example/09 Docker/#docker","text":"Docker is a set of platform as a service (PaaS) products that use OS-level virtualization to deliver software in packages called containers.[6] Containers are isolated from one another and bundle their own software, libraries and configuration files; they can communicate with each other through well-defined channels.[7] All containers are run by a single operating-system kernel and are thus more lightweight than virtual machines.[8] Dockeræ˜¯Paasçš„äº§å“, é€šè¿‡è¢«æˆä¸º å®¹å™¨ çš„ ç³»ç»Ÿçº§åˆ« çš„è™šæ‹ŸåŒ–äº¤ä»˜è½¯ä»¶.","text_tokens":["thus","è™šæ‹Ÿ","virtualization","set","can",",","service","more"," ","6","docker","libraries","each","å®¹å™¨","other","8","they","single",".","channels","defined","with","products","is","isolated","deliver","çš„","packages","è½¯ä»¶","çº§åˆ«","than","æ˜¯","that","to","machines","own","through","æˆä¸º","one",")","virtual","paas","ç³»ç»Ÿ","run","configuration","use","]","are","è™šæ‹ŸåŒ–","containers","-","level","well","their","by","of","another","in","from","system","and","kernel","äº§å“","communicate","7","é€šè¿‡","a",";","software","operating","os","lightweight","(","äº¤ä»˜","called","all","è¢«","bundle","platform","files","as","["],"title":"Dockeræ˜¯ä»€ä¹ˆ","title_tokens":["docker","æ˜¯","ä»€ä¹ˆ"]},{"location":"Golang/Project/go-gin-example/09 Docker/#docker_1","text":"","text_tokens":[],"title":"å¦‚ä½•ä½¿ç”¨Docker","title_tokens":["å¦‚ä½•","docker","ä½¿ç”¨"]},{"location":"Golang/Project/go-gin-example/09 Docker/#dockerwin10-pro","text":"å³é”®WINDOWS - åº”ç”¨å’ŒåŠŸèƒ½ - ç¨‹åºå’ŒåŠŸèƒ½ - å¯ç”¨æˆ–å…³é—­WINDOSåŠŸèƒ½ - å¼€å¯Hyper-V å¼€å¯ Hyper-V å¯èƒ½å¯¼è‡´ ShadowSocksR ç«¯å£è¢«å ç”¨ å®˜ç½‘","text_tokens":["windos","v","windows","åŠŸèƒ½","å’Œ","æˆ–","shadowsocksr","hyper","å¯èƒ½","-","å ç”¨","åº”ç”¨","å…³é—­"," ","å¼€å¯","ç¨‹åº","å¯¼è‡´","è¢«","ç«¯å£","å¯ç”¨","å®˜ç½‘","å³é”®"],"title":"å®‰è£…Docker(WIN10 PRO)","title_tokens":["pro","(",")"," ","docker","win10","å®‰è£…"]},{"location":"Golang/Project/go-gin-example/09 Docker/#docker_2","text":"","text_tokens":[],"title":"DockeråŸºæœ¬æŒ‡ä»¤","title_tokens":["docker","åŸºæœ¬","æŒ‡ä»¤"]},{"location":"Golang/Project/go-gin-example/09 Docker/#dockerfile","text":"FROM golang:latest ENV GOPROXY https://goproxy.cn,direct WORKDIR $GOPATH /src/go-gin-example COPY . $GOPATH /src/go-gin-example RUN go build . EXPOSE 8000 ENTRYPOINT [ \"./go-gin-example\" ] 1. FROM : æŒ‡å®šåŸºç¡€é•œåƒ, è¯¥æŒ‡ä»¤å¿…é¡»è¦æœ‰,ä¸”å¾—ä¸ºç¬¬ä¸€æ¡ 2. WORKDIR : æŒ‡å®šå·¥ä½œç›®å½•è·¯å¾„, è‹¥ç›®å½•ä¸å­˜åœ¨, åˆ™ä¼šåˆ›å»ºæ”¹ç›®å½• 3. COPY : æºè·¯å¾„ ... ç›®æ ‡è·¯å¾„, COPY æŒ‡ä»¤å°† Dockerfile æ–‡ä»¶æ‰€å­˜åœ¨çš„ä¸Šä¸‹æ–‡ç›®å½• å¤åˆ¶ åˆ°ç›®æ ‡è·¯å¾„ä½ç½® 4. RUN : æ‰§è¡Œå‘½ä»¤ 5. EXPOSE : å£°æ˜ è¿è¡Œæ—¶å®¹å™¨ æä¾›æœåŠ¡ç«¯å£, ä»…ä»…æ˜¯ä¸€ä¸ª å£°æ˜ , ä¸ä¼šå› ä¸ºè¿™ä¸ªå£°æ˜è€Œå¼€å¯è¿™ä¸ªç«¯å£ 6. ENTRYPOINT : æŒ‡å®š å®¹å™¨ å¯åŠ¨ç¨‹åºçš„åŠå‚æ•°(æ‰§è¡Œ ./go-gin-example)","text_tokens":["workdir","æ—¶","ä¸Šä¸‹","æ‰§è¡Œå‘½ä»¤","ä¸",",",":","æä¾›","latest","ä¸”","...","ä½ç½®","4","è€Œ","å¿…é¡»","env"," ","ä¸ä¼š","6","ç¨‹åº","gin","goproxy","src","åŸºç¡€","ä¸€æ¡","ç«¯å£","å®¹å™¨","golang","gopath","2","æ”¹","expose",".","ä¸Šä¸‹æ–‡","$","è‹¥","çš„","build","æ˜¯","ä¸‹æ–‡","å¤åˆ¶","åˆ°","example","æº","å¯åŠ¨","æœåŠ¡","æŒ‡å®š","æŒ‡ä»¤","è·¯å¾„",")","æœ‰","å¾—","ç¬¬ä¸€","å­˜åœ¨","run","ä»…ä»…","5","æ‰§è¡Œ","æ‰€","è¦","]","dockerfile","-","/","å°†","é•œåƒ","go","å¼€å¯","å› ä¸º","æ–‡ä»¶","from","ç¬¬ä¸€æ¡","direct","å‚æ•°","ç›®æ ‡","å£°æ˜","1","è¯¥","entrypoint","ç›®å½•","åˆ›å»º","8000","3","å·¥ä½œ","ä¼š","ä¸€ä¸ª","(","cn","å‘½ä»¤","ä¸º","åŠ","https","copy","\"","è¿è¡Œ","åˆ™","[","è¿™ä¸ª"],"title":"ç¼–å†™Dockerfile","title_tokens":["dockerfile","ç¼–å†™"]},{"location":"Golang/Project/go-gin-example/09 Docker/#_1","text":"docker build - t gin - blog - docker . docker images docker run - p 8000 : 8000 gin - blog - docker 1. åœ¨ . å½“å‰ç¯å¢ƒè¿è¡Œ docker build åˆ›å»º/æ„å»ºé•œåƒ, -t æŒ‡å®šåç§° 2. docker images æŸ¥çœ‹é•œåƒæ˜¯å¦åˆ›å»ºæˆåŠŸ 3. åœ¨æœ¬åœ°8000ç«¯å£è¿è¡Œå®¹å™¨ 4. å‘ç° dial tcp 127.0.0.1:3306: connect: connection refused é”™è¯¯","text_tokens":["2","images","æ„å»º",".","run","1","dial","æŸ¥çœ‹",",","0.1",":","åˆ›å»º","8000","ç¯å¢ƒ","connection","3","4","build","åœ¨","æœ¬åœ°","3306","blog","connect","refused","-","127.0","/","é•œåƒ"," ","t","å½“å‰","docker","p","æŒ‡å®š","åç§°","gin","é”™è¯¯","æˆåŠŸ","è¿è¡Œ","ç«¯å£","æ˜¯å¦","å®¹å™¨","å‘ç°","tcp"],"title":"è¿è¡Œ","title_tokens":["è¿è¡Œ"]},{"location":"Golang/Project/go-gin-example/09 Docker/#mysql-docker","text":"docker pull mysql docker run --name mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=root -d mysql 1. æ‹‰å–mysqlé•œåƒ 2. é…ç½®mysqlç«¯å£","text_tokens":["pull","2","password",".","run","mysql","1","_","name",":","root","3306","-","=","é•œåƒ"," ","docker","p","d","e","æ‹‰å–","ç«¯å£","é…ç½®"],"title":"é…ç½®Mysql Docker","title_tokens":["docker","mysql","é…ç½®"," "]},{"location":"Golang/Project/go-gin-example/09 Docker/#confini","text":"[database] TYPE = mysql USER = root PASSWORD = rootroot HOST = mysql:3306 NAME = blog TABLE_PREFIX = blog_","text_tokens":["password","mysql","type","_","prefix","user",":","name","table","database","root","3306","blog","]","rootroot","="," ","[","host"],"title":"ä¿®æ”¹é…ç½®æ–‡ä»¶conf.ini","title_tokens":["conf","æ–‡ä»¶","ini",".","é…ç½®","é…ç½®æ–‡ä»¶","ä¿®æ”¹"]},{"location":"Golang/Project/go-gin-example/09 Docker/#golangmysql","text":"docker run --link mysql:mysql -p 8000:8000 gin-blog-docker","text_tokens":["-","gin","blog",":","8000","run"," ","mysql","link","docker","p"],"title":"å…³è”Golangå®¹å™¨å’ŒMysqlå®¹å™¨","title_tokens":["golang","å’Œ","å…³è”","mysql","å®¹å™¨"]},{"location":"Golang/Project/go-gin-example/09 Docker/#_2","text":"","text_tokens":[],"title":"æ•ˆæœ","title_tokens":["æ•ˆæœ"]},{"location":"Golang/Project/go-gin-example/10 GORM-Callback/","text":"go-gin-example 10ï¼š GORM-Callback å®šåˆ¶GORM Callbacks GORM Callback æ˜¯ä»€ä¹ˆ You could define callback methods to pointer of model struct, it will be called when creating, updating, querying, deleting, if any callback returns an error, gorm will stop future operations and rollback all changes. å¯ä»¥ç»™æ¨¡å‹ç»“æ„ä½“æŒ‡é’ˆå®šä¹‰å›è°ƒå‡½æ•°, å®ƒå°†ä¼šåœ¨è¢«åˆ›å»º/æ›´æ–°/æŸ¥è¯¢/åˆ é™¤çš„æ—¶å€™è°ƒç”¨, å¦‚æœå›è°ƒè¿”å›äº†é”™è¯¯, gormä¼šåœæ­¢æœªæ¥è¡Œä¸ºæ“ä½œå¹¶ä¸”å›é€€æ‰€æœ‰æ”¹å˜. ä¹‹å‰ç¨‹åºæœªå®ç° Callback æ–¹æ³•, éœ€è¦ä¸ºæ‰€æœ‰æ–‡ä»¶å•ç‹¬å†™ä¸€æ¬¡ BeforeCreate ã€ BeforeUpdate æ–¹æ³• ä½¿ç”¨ gormæ”¯æŒçš„callbackæ–¹æ³• åˆ›å»ºï¼šBeforeSaveã€BeforeCreateã€AfterCreateã€AfterSave æ›´æ–°ï¼šBeforeSaveã€BeforeUpdateã€AfterUpdateã€AfterSave åˆ é™¤ï¼šBeforeDeleteã€AfterDelete æŸ¥è¯¢ï¼šAfterFind å®šä¹‰callback åœ¨ model.go æ–‡ä»¶ä¸­å®šä¹‰ // updateTimeStampForCreateCallback will set `CreatedOn`, `ModifiedOn` when creating func updateTimeStampForCreateCallback ( scope * gorm . Scope ) { if ! scope . HasError () { nowTime := time . Now (). Unix () if createTimeField , ok := scope . FieldByName ( \"CreatedOn\" ); ok { if createTimeField . IsBlank { createTimeField . Set ( nowTime ) } } if modifyTimeField , ok := scope . FieldByName ( \"ModifiedOn\" ); ok { if modifyTimeField . IsBlank { modifyTimeField . Set ( nowTime ) } } } } // updateTimeStampForUpdateCallback will set `ModifyTime` when updating func updateTimeStampForUpdateCallback ( scope * gorm . Scope ) { if _ , ok := scope . Get ( \"gorm:update_column\" ); ! ok { scope . SetColumn ( \"ModifiedOn\" , time . Now (). Unix ()) } } é€šè¿‡ scope.FieldByName(name) åˆ¤æ–­æ˜¯å¦å­˜åœ¨ç›¸å…³å­—æ®µ, è¯¥æ–¹æ³•é€šè¿‡ scope.Fields() è·å–æ‰€æœ‰å­—æ®µ é€šè¿‡ .IsBlank åˆ¤æ–­å€¼æ˜¯å¦ä¸ºç©º é€šè¿‡ .Set(interface{}) è®¾ç½®ç›¸å…³å€¼ é€šè¿‡ scope.Get() è·å–å‚æ•°çš„å‚æ•°å€¼, æ¡ˆä¾‹ä¸­å›å»æŸ¥æ‰¾ gorm:update_column è¿™ä¸ªå­—æ®µçš„å±æ€§ é€šè¿‡ scope.SetColumn(Field, value) è®¾å®šå­—æ®µçš„å€¼ è°ƒç”¨callback åœ¨ model.go çš„ ini å‡½æ•°ä¸­æ³¨å†Œcallback db . Callback (). Create (). Replace ( \"gorm:update_time_stamp\" , updateTimeStampForCreateCallback ) db . Callback (). Update (). Replace ( \"gorm:update_time_stamp\" , updateTimeStampForUpdateCallback ) æ•ˆæœ å½“ç¨‹åºå†™äº† Callback æ–¹æ³•çš„æ—¶å€™, å½“GORMæ‰§è¡Œåˆ°ç›¸å…³çš„æ“ä½œä¼šè‡ªåŠ¨è§¦å‘ç›¸åº”çš„ Callback æ–¹æ³• æ‹“å±• è½¯åˆ é™¤, æ·»åŠ åˆ é™¤æ—¶é—´, ä¸º model.go çš„ Model ç»“æ„ä½“æ·»åŠ  DeletedOn å­—æ®µ type Model struct { ID int `gorm:\"primary_key\" json:\"id\"` CreatedOn int `json:\"created_on\"` ModifiedOn int `json:\"modified_on\"` DeletedOn int `json:\"deleted_on\"` } func deleteCallback ( scope * gorm . Scope ) { if ! scope . HasError () { var extraOption string if str , ok := scope . Get ( \"gorm:delete_option\" ); ok { extraOption = fmt . Sprint ( str ) } deletedOnField , hasDeletedOnField := scope . FieldByName ( \"DeletedOn\" ) if ! scope . Search . Unscoped && hasDeletedOnField { scope . Raw ( fmt . Sprintf ( \"UPDATE %v SET %v=%v%v%v\" , scope . QuotedTableName (), scope . Quote ( deletedOnField . DBName ), scope . AddToVars ( time . Now (). Unix ()), addExtraSpaceIfExist ( scope . CombinedConditionSql ()), addExtraSpaceIfExist ( extraOption ), )). Exec () } else { scope . Raw ( fmt . Sprintf ( \"DELETE FROM %v%v%v\" , scope . QuotedTableName (), addExtraSpaceIfExist ( scope . CombinedConditionSql ()), addExtraSpaceIfExist ( extraOption ), )). Exec () } } } func addExtraSpaceIfExist ( str string ) string { if str != \"\" { return \" \" + str } return \"\" } åœ¨ model.go çš„ iniå‡½æ•° ä¸­æ·»åŠ  db.Callback().Delete().Replace(\"gorm:delete\", deleteCallback) 1. scope.QuotedTableName() è¿”å›å¼•ç”¨çš„è¡¨å 2. scope.Raw() æ„å»ºåŸç”Ÿsql 3. fmt.Sprintf() æ ¼å¼åŒ–å¹¶ä¸”è¿”å›æ ¼å¼åŒ–åçš„å­—ç¬¦ä¸²æ•°æ® 4. scope.AddToVars(value) ä¸ºå­—æ®µæ·»åŠ å‚æ•° 5. scope.Quote() è½¬ä¹‰ 6. scope å½“ä½ åœ¨æ•°æ®åº“ä¸­æ–‡å®Œæˆä»»ä½•æ“ä½œ, scopeåŒ…å«äº†å½“å‰æ“ä½œä¿¡æ¯ // Scope contain current operation's information when you perform any operation on the database type Scope struct { Search * search Value interface {} SQL string SQLVars [] interface {} db * DB instanceID string primaryKeyField * Field skipLeft bool fields * [] * Field selectAttrs * [] string } REF: official: callback in gorm","text_tokens":["è§¦å‘","combinedconditionsql","search","returns","updatetimestampforupdatecallback","æ•°æ®","è½¬ä¹‰","æœªæ¥","set","å±æ€§","be","æ‹“å±•","deletedon","ä¿¡æ¯","1","changes","_","callbacks","operation","ä¹‹å‰",",","æ—¶å€™","primary",":","name","åŒ…å«","primarykeyfield","sqlvars","ref","+","afterdelete","4","future","åœ¨","database","è¡Œä¸º","å","è·å–","`","ï¼š","str","ç»™","æ”¹å˜","fieldbyname","æ·»åŠ ","ini","setcolumn","æ–¹æ³•","æ³¨å†Œ"," ","afterfind","6","creating","ç¨‹åº","ç»“æ„","gin","deleting","will","an","é”™è¯¯","deletedonfield","è¡¨å","æ—¶é—´","interface","æ ¼å¼åŒ–","pointer","afterupdate","addextraspaceifexist","æ˜¯å¦","bool","è¿”å›","å®šä¹‰","å­—ç¬¦ä¸²","nowtime","å†™","å®Œæˆ","10","2","åˆ é™¤",".","any","å¼•ç”¨","else","æŸ¥è¯¢","scope","createtimefield","å¯ä»¥","operations","get","extraoption","å›å»","unscoped","replace","çš„","ä¸€æ¬¡","quote","ok","åˆ¤æ–­","field","ç›¸å…³","when","var","official","ä»»ä½•","æ˜¯","æ®µ","å­—ç¬¦","åˆ°","example","to","if","{","addtovars","å½“å‰","create","å€¼","fields","æ®åº“","æ“ä½œ","stop","value","sprint","information","id","beforecreate","hasdeletedonfield","s",")","option","åœæ­¢","raw","return","å®ƒ","ä»€ä¹ˆ","æŒ‡é’ˆ","å­˜åœ¨","å¦‚æœ","instanceid","callback","æ„å»º","fmt","ä¸­æ–‡","string","error","5","v%","could","æ‰§è¡Œ","ã€","&&","created","current","column","sql","å¹¶ä¸”","å›é€€","on","å›è°ƒ","deleted","]","å‚æ•°å€¼","-","db","=","è®¾ç½®","/","modifiedon","å°†","time","exec","you","deletecallback","è°ƒç”¨","it","of","go","methods","updatetimestampforcreatecallback","è½¯","update","å®šåˆ¶","isblank","å‡½æ•°","å­—","æ•ˆæœ","haserror","ä½ ","ä½¿ç”¨","å½“","in","æ–‡ä»¶","from","selectattrs","aftercreate","è‡ªåŠ¨","contain","querying","beforesave","and","å‚æ•°","model","struct","modified","æ¡ˆä¾‹","v","rollback","beforeupdate","*","ä½“","beforedelete","æ•°å€¼","key","json","äº†","!","å­—æ®µ","æœª","é€šè¿‡","è¯¥","type","gorm","unix","sprintf","skipleft","delete",";","modifytimefield","åˆ›å»º","dbname","æ›´æ–°","æ‰€æœ‰","3","int","'","ä¼š","createdon","åŸç”Ÿ","æ ¼å¼","(","aftersave","ä¸ºç©º","è®¾å®š","å®ç°","perform","ä¸º","%","}","now","éœ€è¦","stamp","called","å•ç‹¬","updating","all","ä¸­","æ•°æ®åº“","è¢«","æ”¯æŒ","\"","modifytime","ç›¸åº”","func","the","define","æŸ¥æ‰¾","æ¨¡å‹","[","è¿™ä¸ª","quotedtablename"],"title":"go-gin-example 10ï¼š GORM-Callback","title_tokens":["-","gin","10","gorm","callback","example"," ","go","ï¼š"]},{"location":"Golang/Project/go-gin-example/10 GORM-Callback/#go-gin-example-10-gorm-callback","text":"","text_tokens":[],"title":"go-gin-example 10ï¼š GORM-Callback","title_tokens":["-","gin","10","gorm","callback","example"," ","go","ï¼š"]},{"location":"Golang/Project/go-gin-example/10 GORM-Callback/#gorm-callbacks","text":"","text_tokens":[],"title":"å®šåˆ¶GORM Callbacks","title_tokens":["callbacks","gorm","å®šåˆ¶"," "]},{"location":"Golang/Project/go-gin-example/10 GORM-Callback/#gorm-callback","text":"You could define callback methods to pointer of model struct, it will be called when creating, updating, querying, deleting, if any callback returns an error, gorm will stop future operations and rollback all changes. å¯ä»¥ç»™æ¨¡å‹ç»“æ„ä½“æŒ‡é’ˆå®šä¹‰å›è°ƒå‡½æ•°, å®ƒå°†ä¼šåœ¨è¢«åˆ›å»º/æ›´æ–°/æŸ¥è¯¢/åˆ é™¤çš„æ—¶å€™è°ƒç”¨, å¦‚æœå›è°ƒè¿”å›äº†é”™è¯¯, gormä¼šåœæ­¢æœªæ¥è¡Œä¸ºæ“ä½œå¹¶ä¸”å›é€€æ‰€æœ‰æ”¹å˜. ä¹‹å‰ç¨‹åºæœªå®ç° Callback æ–¹æ³•, éœ€è¦ä¸ºæ‰€æœ‰æ–‡ä»¶å•ç‹¬å†™ä¸€æ¬¡ BeforeCreate ã€ BeforeUpdate æ–¹æ³•","text_tokens":["returns","æœªæ¥","be","changes","ä¹‹å‰",",","æ—¶å€™","future","åœ¨","è¡Œä¸º","ç»™","æ”¹å˜","æ–¹æ³•"," ","creating","ç¨‹åº","ç»“æ„","deleting","will","an","é”™è¯¯","pointer","è¿”å›","å®šä¹‰","å†™","åˆ é™¤",".","any","æŸ¥è¯¢","å¯ä»¥","operations","çš„","ä¸€æ¬¡","when","to","if","æ“ä½œ","stop","beforecreate","åœæ­¢","å®ƒ","æŒ‡é’ˆ","å¦‚æœ","callback","error","could","ã€","å¹¶ä¸”","å›é€€","å›è°ƒ","/","å°†","you","è°ƒç”¨","it","of","methods","å‡½æ•°","æ–‡ä»¶","querying","and","model","struct","rollback","beforeupdate","ä½“","äº†","æœª","gorm","åˆ›å»º","æ›´æ–°","æ‰€æœ‰","ä¼š","å®ç°","ä¸º","éœ€è¦","called","å•ç‹¬","updating","all","è¢«","define","æ¨¡å‹"],"title":"GORM Callback æ˜¯ä»€ä¹ˆ","title_tokens":["æ˜¯","callback"," ","gorm","ä»€ä¹ˆ"]},{"location":"Golang/Project/go-gin-example/10 GORM-Callback/#_1","text":"","text_tokens":[],"title":"ä½¿ç”¨","title_tokens":["ä½¿ç”¨"]},{"location":"Golang/Project/go-gin-example/10 GORM-Callback/#gormcallback","text":"åˆ›å»ºï¼šBeforeSaveã€BeforeCreateã€AfterCreateã€AfterSave æ›´æ–°ï¼šBeforeSaveã€BeforeUpdateã€AfterUpdateã€AfterSave åˆ é™¤ï¼šBeforeDeleteã€AfterDelete æŸ¥è¯¢ï¼šAfterFind","text_tokens":["åˆ›å»º","aftersave","ã€","beforecreate","æ›´æ–°","beforeupdate","åˆ é™¤","afterdelete","aftercreate","beforedelete"," ","afterupdate","æŸ¥è¯¢","afterfind","beforesave","ï¼š"],"title":"gormæ”¯æŒçš„callbackæ–¹æ³•","title_tokens":["çš„","æ”¯æŒ","callback","æ–¹æ³•","gorm"]},{"location":"Golang/Project/go-gin-example/10 GORM-Callback/#callback","text":"åœ¨ model.go æ–‡ä»¶ä¸­å®šä¹‰ // updateTimeStampForCreateCallback will set `CreatedOn`, `ModifiedOn` when creating func updateTimeStampForCreateCallback ( scope * gorm . Scope ) { if ! scope . HasError () { nowTime := time . Now (). Unix () if createTimeField , ok := scope . FieldByName ( \"CreatedOn\" ); ok { if createTimeField . IsBlank { createTimeField . Set ( nowTime ) } } if modifyTimeField , ok := scope . FieldByName ( \"ModifiedOn\" ); ok { if modifyTimeField . IsBlank { modifyTimeField . Set ( nowTime ) } } } } // updateTimeStampForUpdateCallback will set `ModifyTime` when updating func updateTimeStampForUpdateCallback ( scope * gorm . Scope ) { if _ , ok := scope . Get ( \"gorm:update_column\" ); ! ok { scope . SetColumn ( \"ModifiedOn\" , time . Now (). Unix ()) } } é€šè¿‡ scope.FieldByName(name) åˆ¤æ–­æ˜¯å¦å­˜åœ¨ç›¸å…³å­—æ®µ, è¯¥æ–¹æ³•é€šè¿‡ scope.Fields() è·å–æ‰€æœ‰å­—æ®µ é€šè¿‡ .IsBlank åˆ¤æ–­å€¼æ˜¯å¦ä¸ºç©º é€šè¿‡ .Set(interface{}) è®¾ç½®ç›¸å…³å€¼ é€šè¿‡ scope.Get() è·å–å‚æ•°çš„å‚æ•°å€¼, æ¡ˆä¾‹ä¸­å›å»æŸ¥æ‰¾ gorm:update_column è¿™ä¸ªå­—æ®µçš„å±æ€§ é€šè¿‡ scope.SetColumn(Field, value) è®¾å®šå­—æ®µçš„å€¼","text_tokens":["updatetimestampforupdatecallback","set","å±æ€§","_",",",":","name","åœ¨","è·å–","`","fieldbyname","setcolumn","æ–¹æ³•"," ","creating","will","interface","æ˜¯å¦","å®šä¹‰","nowtime",".","scope","createtimefield","get","å›å»","çš„","ok","åˆ¤æ–­","field","ç›¸å…³","when","æ®µ","{","if","å€¼","fields","value",")","å­˜åœ¨","column","å‚æ•°å€¼","=","è®¾ç½®","/","modifiedon","time","go","updatetimestampforcreatecallback","update","isblank","å­—","haserror","æ–‡ä»¶","å‚æ•°","model","æ¡ˆä¾‹","*","æ•°å€¼","!","å­—æ®µ","é€šè¿‡","è¯¥","gorm","unix",";","modifytimefield","æ‰€æœ‰","createdon","(","ä¸ºç©º","è®¾å®š","}","now","updating","ä¸­","\"","modifytime","func","æŸ¥æ‰¾","è¿™ä¸ª"],"title":"å®šä¹‰callback","title_tokens":["å®šä¹‰","callback"]},{"location":"Golang/Project/go-gin-example/10 GORM-Callback/#callback_1","text":"åœ¨ model.go çš„ ini å‡½æ•°ä¸­æ³¨å†Œcallback db . Callback (). Create (). Replace ( \"gorm:update_time_stamp\" , updateTimeStampForCreateCallback ) db . Callback (). Update (). Replace ( \"gorm:update_time_stamp\" , updateTimeStampForUpdateCallback )","text_tokens":["updatetimestampforupdatecallback","callback",".","_","gorm",",",":","replace","çš„","åœ¨","db","(","time","ini","æ³¨å†Œ"," ","go","updatetimestampforcreatecallback","create","stamp","update","å‡½æ•°","ä¸­","\"",")","model"],"title":"è°ƒç”¨callback","title_tokens":["è°ƒç”¨","callback"]},{"location":"Golang/Project/go-gin-example/10 GORM-Callback/#_2","text":"å½“ç¨‹åºå†™äº† Callback æ–¹æ³•çš„æ—¶å€™, å½“GORMæ‰§è¡Œåˆ°ç›¸å…³çš„æ“ä½œä¼šè‡ªåŠ¨è§¦å‘ç›¸åº”çš„ Callback æ–¹æ³•","text_tokens":["è§¦å‘","å†™","callback","äº†","gorm",",","æ—¶å€™","æ‰§è¡Œ","çš„","ç›¸å…³","ä¼š","åˆ°","æ–¹æ³•"," ","ç¨‹åº","æ“ä½œ","å½“","ç›¸åº”","è‡ªåŠ¨"],"title":"æ•ˆæœ","title_tokens":["æ•ˆæœ"]},{"location":"Golang/Project/go-gin-example/10 GORM-Callback/#_3","text":"è½¯åˆ é™¤, æ·»åŠ åˆ é™¤æ—¶é—´, ä¸º model.go çš„ Model ç»“æ„ä½“æ·»åŠ  DeletedOn å­—æ®µ type Model struct { ID int `gorm:\"primary_key\" json:\"id\"` CreatedOn int `json:\"created_on\"` ModifiedOn int `json:\"modified_on\"` DeletedOn int `json:\"deleted_on\"` } func deleteCallback ( scope * gorm . Scope ) { if ! scope . HasError () { var extraOption string if str , ok := scope . Get ( \"gorm:delete_option\" ); ok { extraOption = fmt . Sprint ( str ) } deletedOnField , hasDeletedOnField := scope . FieldByName ( \"DeletedOn\" ) if ! scope . Search . Unscoped && hasDeletedOnField { scope . Raw ( fmt . Sprintf ( \"UPDATE %v SET %v=%v%v%v\" , scope . QuotedTableName (), scope . Quote ( deletedOnField . DBName ), scope . AddToVars ( time . Now (). Unix ()), addExtraSpaceIfExist ( scope . CombinedConditionSql ()), addExtraSpaceIfExist ( extraOption ), )). Exec () } else { scope . Raw ( fmt . Sprintf ( \"DELETE FROM %v%v%v\" , scope . QuotedTableName (), addExtraSpaceIfExist ( scope . CombinedConditionSql ()), addExtraSpaceIfExist ( extraOption ), )). Exec () } } } func addExtraSpaceIfExist ( str string ) string { if str != \"\" { return \" \" + str } return \"\" } åœ¨ model.go çš„ iniå‡½æ•° ä¸­æ·»åŠ  db.Callback().Delete().Replace(\"gorm:delete\", deleteCallback) 1. scope.QuotedTableName() è¿”å›å¼•ç”¨çš„è¡¨å 2. scope.Raw() æ„å»ºåŸç”Ÿsql 3. fmt.Sprintf() æ ¼å¼åŒ–å¹¶ä¸”è¿”å›æ ¼å¼åŒ–åçš„å­—ç¬¦ä¸²æ•°æ® 4. scope.AddToVars(value) ä¸ºå­—æ®µæ·»åŠ å‚æ•° 5. scope.Quote() è½¬ä¹‰ 6. scope å½“ä½ åœ¨æ•°æ®åº“ä¸­æ–‡å®Œæˆä»»ä½•æ“ä½œ, scopeåŒ…å«äº†å½“å‰æ“ä½œä¿¡æ¯ // Scope contain current operation's information when you perform any operation on the database type Scope struct { Search * search Value interface {} SQL string SQLVars [] interface {} db * DB instanceID string primaryKeyField * Field skipLeft bool fields * [] * Field selectAttrs * [] string }","text_tokens":["è½¬ä¹‰","combinedconditionsql","search","æ•°æ®","set","deletedon","ä¿¡æ¯","_","operation",",","primary",":","primarykeyfield","åŒ…å«","sqlvars","+","4","åœ¨","database","å","`","str","fieldbyname","æ·»åŠ ","ini"," ","6","ç»“æ„","deletedonfield","è¡¨å","æ—¶é—´","æ ¼å¼åŒ–","interface","bool","addextraspaceifexist","è¿”å›","å­—ç¬¦ä¸²","å®Œæˆ","2","åˆ é™¤",".","å¼•ç”¨","any","else","scope","get","extraoption","unscoped","replace","çš„","quote","ok","field","when","var","ä»»ä½•","æ®µ","å­—ç¬¦","{","if","addtovars","å½“å‰","æ®åº“","fields","æ“ä½œ","value","sprint","information","id","hasdeletedonfield","s",")","option","raw","return","instanceid","callback","æ„å»º","fmt","ä¸­æ–‡","string","5","v%","&&","created","current","sql","å¹¶ä¸”","on","deleted","]","db","=","/","modifiedon","time","exec","deletecallback","you","go","è½¯","update","ä½ ","å­—","å‡½æ•°","haserror","å½“","selectattrs","from","contain","å‚æ•°","model","struct","modified","v","*","ä½“","key","json","!","1","type","äº†","sprintf","gorm","unix","skipleft","delete",";","dbname","3","int","'","åŸç”Ÿ","createdon","æ ¼å¼","(","perform","ä¸º","%","}","now","ä¸­","æ•°æ®åº“","\"","func","the","[","quotedtablename"],"title":"æ‹“å±•","title_tokens":["æ‹“å±•"]},{"location":"Golang/Project/go-gin-example/10 GORM-Callback/#ref","text":"official: callback in gorm","text_tokens":[":","in","callback"," ","gorm","official"],"title":"REF:","title_tokens":["ref",":"]},{"location":"Golang/Project/go-gin-example/FlowChart/","text":"æµç¨‹å›¾ è¯·æ±‚æµç¨‹å›¾ URL è¯·æ±‚æ‰“åˆ° gin ï¼Œç”± gin åˆ†å‘å„ä¸ªè¯·æ±‚åˆ°ç›¸åº”çš„æ¥å£ æ¥å£å¯¹åº” GET ï¼Œ POST ï¼Œ PUT ï¼Œ DELETE ç­‰å¤šç§è¯·æ±‚æ–¹å¼ æ¥å£æ¥æ”¶ URL ä¸­çš„å‚æ•°ï¼Œæ„é€ ç›¸åº”çš„CRUDæŸ¥è¯¢ï¼ŒæŸ¥è¯¢æ•°æ®åº“ å°†æ•°æ®åº“è¿”å›çš„æ•°æ®è¿”å›åˆ°å‰ç«¯è°ƒç”¨è€… JWTäº§ç”Ÿä»¥åŠè®¤è¯ ç”ŸæˆJWT JWTè®¤è¯","text_tokens":["æ•°æ®","æµç¨‹","ç­‰","æŸ¥è¯¢æ•°æ®åº“","æ–¹å¼","crud","è°ƒç”¨è€…","äº§ç”Ÿ","æŸ¥è¯¢","get","åˆ†å‘","delete","å‰ç«¯","çš„","å„ä¸ª","è¯·æ±‚","ç”¨è€…","æµç¨‹å›¾","ä»¥åŠ","æ‰“","å°†","åˆ°","ï¼Œ","è°ƒç”¨","url","æ„é€ ","post"," ","æ¥æ”¶","è¿”å›","jwt","put","æ®åº“","gin","ä¸­","æ•°æ®åº“","ç”±","å¯¹åº”","è®¤è¯","ç›¸åº”","ç”Ÿæˆ","å¤šç§","æ¥å£","å‚æ•°"],"title":"æµç¨‹å›¾","title_tokens":["æµç¨‹","æµç¨‹å›¾"]},{"location":"Golang/Project/go-gin-example/FlowChart/#_1","text":"","text_tokens":[],"title":"æµç¨‹å›¾","title_tokens":["æµç¨‹","æµç¨‹å›¾"]},{"location":"Golang/Project/go-gin-example/FlowChart/#_2","text":"URL è¯·æ±‚æ‰“åˆ° gin ï¼Œç”± gin åˆ†å‘å„ä¸ªè¯·æ±‚åˆ°ç›¸åº”çš„æ¥å£ æ¥å£å¯¹åº” GET ï¼Œ POST ï¼Œ PUT ï¼Œ DELETE ç­‰å¤šç§è¯·æ±‚æ–¹å¼ æ¥å£æ¥æ”¶ URL ä¸­çš„å‚æ•°ï¼Œæ„é€ ç›¸åº”çš„CRUDæŸ¥è¯¢ï¼ŒæŸ¥è¯¢æ•°æ®åº“ å°†æ•°æ®åº“è¿”å›çš„æ•°æ®è¿”å›åˆ°å‰ç«¯è°ƒç”¨è€…","text_tokens":["æ•°æ®","ç­‰","æŸ¥è¯¢æ•°æ®åº“","æ–¹å¼","crud","è°ƒç”¨è€…","æŸ¥è¯¢","get","åˆ†å‘","delete","å‰ç«¯","çš„","å„ä¸ª","è¯·æ±‚","ç”¨è€…","æ‰“","å°†","åˆ°","ï¼Œ","è°ƒç”¨","url","æ„é€ ","post"," ","æ¥æ”¶","è¿”å›","put","æ®åº“","gin","ä¸­","æ•°æ®åº“","ç”±","å¯¹åº”","ç›¸åº”","å¤šç§","æ¥å£","å‚æ•°"],"title":"è¯·æ±‚æµç¨‹å›¾","title_tokens":["æµç¨‹","è¯·æ±‚","æµç¨‹å›¾"]},{"location":"Golang/Project/go-gin-example/FlowChart/#jwt","text":"ç”ŸæˆJWT JWTè®¤è¯","text_tokens":["è®¤è¯","jwt","ç”Ÿæˆ"," "],"title":"JWTäº§ç”Ÿä»¥åŠè®¤è¯","title_tokens":["è®¤è¯","äº§ç”Ÿ","jwt","ä»¥åŠ"]},{"location":"Golang/Project/go-gin-example/InterfaceTestInstance/","text":"æ¥å£æµ‹è¯•å®ä¾‹","text_tokens":["æµ‹è¯•","å®ä¾‹","æ¥å£"],"title":"æ¥å£æµ‹è¯•å®ä¾‹","title_tokens":["æµ‹è¯•","å®ä¾‹","æ¥å£"]},{"location":"Golang/Project/go-gin-example/InterfaceTestInstance/#_1","text":"","text_tokens":[],"title":"æ¥å£æµ‹è¯•å®ä¾‹","title_tokens":["æµ‹è¯•","å®ä¾‹","æ¥å£"]},{"location":"Linux/01 FormattingUdisk/","text":"Linux01: å½»åº•æ ¼å¼åŒ–Uç›˜ åœ¨ cmd ä¸‹è¾“å…¥ diskpart åœ¨å¼¹å‡ºçš„çª—å£è¾“å‡º list disk é€‰æ‹©ç›®æ ‡ç£ç›˜ select disk 1 æ¸…é™¤ clean","text_tokens":["è¾“å…¥","ç›®æ ‡","linux01","ä¸‹","1","uç›˜","å½»åº•",":","çš„","è¾“å‡º","åœ¨","å¼¹å‡º","clean","æ ¼å¼","cmd","disk"," ","çª—å£","select","æ¸…é™¤","list","æ ¼å¼åŒ–","ç£ç›˜","diskpart","é€‰æ‹©"],"title":"Linux01: å½»åº•æ ¼å¼åŒ–Uç›˜","title_tokens":["å½»åº•",":","linux01","æ ¼å¼åŒ–"," ","æ ¼å¼","uç›˜"]},{"location":"Linux/01 FormattingUdisk/#linux01-u","text":"åœ¨ cmd ä¸‹è¾“å…¥ diskpart åœ¨å¼¹å‡ºçš„çª—å£è¾“å‡º list disk é€‰æ‹©ç›®æ ‡ç£ç›˜ select disk 1 æ¸…é™¤ clean","text_tokens":["è¾“å…¥","ç›®æ ‡","ä¸‹","1","çš„","è¾“å‡º","åœ¨","å¼¹å‡º","clean","cmd","disk"," ","çª—å£","æ¸…é™¤","select","list","ç£ç›˜","diskpart","é€‰æ‹©"],"title":"Linux01: å½»åº•æ ¼å¼åŒ–Uç›˜","title_tokens":["å½»åº•",":","linux01","æ ¼å¼åŒ–"," ","æ ¼å¼","uç›˜"]},{"location":"Linux/01 Hello Manjaro/","text":"Hello Manjaro å®‰è£… refus manjaro linux isoæ–‡ä»¶ Uç›˜ åŸºæœ¬é…ç½® ç³»ç»Ÿé…ç½® æ·»åŠ å›½å†…æº sudo pacman-mirrors -c China æ·»åŠ  archlinuxcn ä¸­å›½æº sudo nvim /etc/pacman.conf [ archlinuxcn ] Server = https://mirrors.cloud.tencent.com/archlinuxcn/ $arch æ›´æ–° sudo pacman -Syyu å®‰è£…yayä»¥å®‰è£…AURåŒ… sudo pacman -Sy yay ä¿®æ”¹ç³»ç»Ÿæ—¶é—´ sudo timedatectl set-local-rtc true é…ç½®Github ç”Ÿæˆssh-key, æ·»åŠ  id_rsa.pub åˆ°Github ssh-keygen -t -rsa -C \"your_email@example.com\" è®¾ç½®ç”¨æˆ·åå’Œé‚®ä»¶ git config --global user.name \"your_name\" git config --global user.email \"your_email\" git config -l # æŸ¥çœ‹é…ç½® ä¼˜åŒ–shell sudo pacman -Sy fish # å®‰è£…fish which fish # æŸ¥çœ‹fishä½ç½® chsh -s /usr/bin/fish # ä¿®æ”¹é»˜è®¤shell fish_config # shellç¾åŒ– ä¼˜åŒ–ç»ˆç«¯ åŸç”Ÿç»ˆç«¯: è®¾ç½®é€æ˜èƒŒæ™¯ simple terminal git clone https://github.com/zyeking/st_config.git é…ç½®Nvim yay -Sy neovim # å®‰è£… yay -Sy npm nodejs # å®‰è£…npmå’Œnodejsä»¥å®‰è£…cocæ’ä»¶ npm config set registry https://registry.npm.taobao.org # ä¿®æ”¹npmå›½å†…æº npm config get registry # æµ‹è¯• sudo touch ~/.config/nvim/init.vim # åˆ›å»ºé…ç½®æ–‡ä»¶ cd ~/.config/nvim git clone https://github.com/zyeking/nvim.git é…ç½®Golang è½¯ä»¶ è¾“å…¥æ³• yay -Sy fcitx-sogoupinyin yay -Sy fcitx-im yay -Sy fcitx-configtool yay -Sy fcitx-qt4 # sudo nvim ~/.xprofile export GTK_IM_MODULE = fcitx export QT_IM_MODULE = fcitx export XMODIFIERS = \"@im=fcitx\" yay -Sy compton # è§£å†³è¾“å…¥æ³•é»‘è¾¹é—®é¢˜, æ–°åå­—ä¸ºpicom compton -b # å¯æ·»åŠ åˆ°Autostartä¸­ å…¶ä»–è½¯ä»¶ yay -Sy google-chrome # è°·æ­Œæµè§ˆå™¨ yay -Sy netease-cloud-music # ç½‘æ˜“äº‘éŸ³ä¹ yay -Sy electronic-wechat # å¾®ä¿¡ yay -Sy xmind # XMind yay -Sy calibre # å›¾ä¹¦ç®¡ç†å·¥å…· yay -Sy nutstore # åšæœäº‘ yay -Sy kdenlive # è§†é¢‘å‰ªè¾‘å·¥å…· yay -Sy flameshot # æˆªå›¾è½¯ä»¶, é…ç½®å…¨å±€å¿«æ·é”® yay -Sy typora # Markdownç¼–è¾‘å™¨ yay -Sy latte-dock # dockæ  wpsé…ç½® yay -Sy wps-office # -cnä¸ºä¸­æ–‡ç‰ˆ sudo nvim /usr/bin/wps # æ·»åŠ ä»¥ä¸‹é…ç½®è§£å†³æ— æ³•è¾“å…¥ä¸­æ–‡çš„é—®é¢˜ export GTK_IM_MODULE = fcitx export QT_IM_MODULE = fcitx export XMODIFIERS = \"@im=fcitx\" KDEç¾åŒ– Netspeed Event Calendar Active Window Control å…¶ä»–é—®é¢˜ è§£å†³Manjaroé‡å¯å£çº¸é‡è®¾é—®é¢˜ ifconfigæŒ‡ä»¤æ‰¾ä¸åˆ°","text_tokens":["è¾“å…¥","å¾®ä¿¡","ä»¥ä¸‹","set","shell","touch","æ‰¾","æˆ·å","npm","å…¶ä»–è½¯ä»¶","netspeed","_","qt4",",","cd",":","name","æˆªå›¾","ä½ç½®","keygen","calibre","calendar","wps","é»˜è®¤","electronic","export","local","æ·»åŠ ","cloud"," ","å…¶ä»–","c","control","rtc","æ—¶é—´","å£çº¸","picom","timedatectl","å¿«æ·","chsh","ç®¡ç†","fish","golang","ç¾åŒ–","iso","é€æ˜","ç»Ÿé…","å·¥å…·",".","true","markdown","get","è¾“å…¥æ³•","ä¿®æ”¹","zyeking","åŸºæœ¬","music","dock","$","terminal","çš„","ç³»ç»Ÿé…","nutstore","xmodifiers","ç¼–è¾‘","è½¯ä»¶","å®‰è£…","registry","server","global","æ ","simple","åˆ°","æº","example","xprofile","autostart","æµè§ˆ","kde","t","ä¼˜åŒ–","b","fcitx","rsa","é‡è®¾","syyu","ç”¨æˆ·","config","ç»ˆç«¯","which","éŸ³ä¹","email","arch","è§†é¢‘","æŒ‡ä»¤","@","ç³»ç»Ÿé…ç½®","id","github","s","module","nvim","åå­—","typora","é‡å¯","æµ‹è¯•","#","hello","è°·æ­Œ","ifconfig","git","netease","ç³»ç»Ÿ","l","ç½‘æ˜“","é—®é¢˜","è§†é¢‘å‰ªè¾‘","ä¸­æ–‡","ä¸­æ–‡ç‰ˆ","é…ç½®æ–‡ä»¶","xmind","uç›˜","ç”¨æˆ·å","vim","china","conf","init","qt","å’Œ","å¯","wechat","event","latte","å‰ªè¾‘","office","ä¸­å›½","gtk","å›¾ä¹¦","äº‘","åšæœ","]","im","google","åŒ…","-","=","è®¾ç½®","/","pub","st","å…¥æ³•","active","sogoupinyin","æ–‡ç‰ˆ","usr","å…¨å±€","~","mirrors","sy","coc","sudo","æ–‡ä»¶","ssh","é‚®ä»¶","é…ç½®","com","æ–°","ç®¡ç†å·¥å…·","tencent","èƒŒæ™¯","ä¸åˆ°","æµè§ˆå™¨","kdenlive","å›½å†…","key","nodejs","flameshot","ç¼–è¾‘å™¨","configtool","æŸ¥çœ‹","æ’ä»¶","æ— æ³•","window","bin","taobao","user","etc","neovim","åˆ›å»º","æ›´æ–°","è¾¹","ä»¥","å¿«æ·é”®","pacman","chrome","åŸç”Ÿ","linux","è§£å†³","é»‘","cn","compton","yay","ä¸º","ç†å·¥","https","clone","ä¸­","archlinuxcn","your","aur","manjaro","\"","org","refus","ç”Ÿæˆ","["],"title":"Hello Manjaro","title_tokens":["hello"," ","manjaro"]},{"location":"Linux/01 Hello Manjaro/#hello-manjaro","text":"","text_tokens":[],"title":"Hello Manjaro","title_tokens":["hello"," ","manjaro"]},{"location":"Linux/01 Hello Manjaro/#_1","text":"refus manjaro linux isoæ–‡ä»¶ Uç›˜","text_tokens":["iso","æ–‡ä»¶","manjaro"," ","refus","linux","uç›˜"],"title":"å®‰è£…","title_tokens":["å®‰è£…"]},{"location":"Linux/01 Hello Manjaro/#_2","text":"","text_tokens":[],"title":"åŸºæœ¬é…ç½®","title_tokens":["åŸºæœ¬","é…ç½®"]},{"location":"Linux/01 Hello Manjaro/#_3","text":"æ·»åŠ å›½å†…æº sudo pacman-mirrors -c China æ·»åŠ  archlinuxcn ä¸­å›½æº sudo nvim /etc/pacman.conf [ archlinuxcn ] Server = https://mirrors.cloud.tencent.com/archlinuxcn/ $arch æ›´æ–° sudo pacman -Syyu å®‰è£…yayä»¥å®‰è£…AURåŒ… sudo pacman -Sy yay ä¿®æ”¹ç³»ç»Ÿæ—¶é—´ sudo timedatectl set-local-rtc true","text_tokens":["tencent","ç³»ç»Ÿ","set",".","å›½å†…","true","ä¿®æ”¹","china","conf",":","etc","$","æ›´æ–°","ä»¥","pacman","ä¸­å›½","]","å®‰è£…","åŒ…","-","=","local","æ·»åŠ ","/","server","cloud","yay","æº"," ","mirrors","https","syyu","c","sudo","sy","archlinuxcn","arch","aur","nvim","rtc","æ—¶é—´","timedatectl","com","["],"title":"ç³»ç»Ÿé…ç½®","title_tokens":["ç³»ç»Ÿ","ç³»ç»Ÿé…ç½®","ç»Ÿé…","ç³»ç»Ÿé…","é…ç½®"]},{"location":"Linux/01 Hello Manjaro/#github","text":"ç”Ÿæˆssh-key, æ·»åŠ  id_rsa.pub åˆ°Github ssh-keygen -t -rsa -C \"your_email@example.com\" è®¾ç½®ç”¨æˆ·åå’Œé‚®ä»¶ git config --global user.name \"your_name\" git config --global user.email \"your_email\" git config -l # æŸ¥çœ‹é…ç½®","text_tokens":["git","l",".","key","æˆ·å","_","æŸ¥çœ‹","ç”¨æˆ·å",",","user","name","å’Œ","keygen","-","è®¾ç½®","æ·»åŠ ","pub","global","åˆ°","example"," ","t","rsa","c","ç”¨æˆ·","config","your","email","id","@","\"","github","ssh","é‚®ä»¶","#","com","ç”Ÿæˆ","é…ç½®"],"title":"é…ç½®Github","title_tokens":["github","é…ç½®"]},{"location":"Linux/01 Hello Manjaro/#shell","text":"sudo pacman -Sy fish # å®‰è£…fish which fish # æŸ¥çœ‹fishä½ç½® chsh -s /usr/bin/fish # ä¿®æ”¹é»˜è®¤shell fish_config # shellç¾åŒ–","text_tokens":["ç¾åŒ–","shell","_","æŸ¥çœ‹","ä¿®æ”¹","bin","ä½ç½®","pacman","é»˜è®¤","å®‰è£…","-","/","usr"," ","sy","sudo","config","which","s","#","chsh","fish"],"title":"ä¼˜åŒ–shell","title_tokens":["shell","ä¼˜åŒ–"]},{"location":"Linux/01 Hello Manjaro/#_4","text":"åŸç”Ÿç»ˆç«¯: è®¾ç½®é€æ˜èƒŒæ™¯ simple terminal git clone https://github.com/zyeking/st_config.git","text_tokens":["git","èƒŒæ™¯","é€æ˜",".","_","zyeking",":","terminal","åŸç”Ÿ","è®¾ç½®","/","st","simple"," ","https","clone","ç»ˆç«¯","config","github","com"],"title":"ä¼˜åŒ–ç»ˆç«¯","title_tokens":["ç»ˆç«¯","ä¼˜åŒ–"]},{"location":"Linux/01 Hello Manjaro/#nvim","text":"yay -Sy neovim # å®‰è£… yay -Sy npm nodejs # å®‰è£…npmå’Œnodejsä»¥å®‰è£…cocæ’ä»¶ npm config set registry https://registry.npm.taobao.org # ä¿®æ”¹npmå›½å†…æº npm config get registry # æµ‹è¯• sudo touch ~/.config/nvim/init.vim # åˆ›å»ºé…ç½®æ–‡ä»¶ cd ~/.config/nvim git clone https://github.com/zyeking/nvim.git","text_tokens":["git","set","touch",".","å›½å†…","nodejs","npm","é…ç½®æ–‡ä»¶","get","æ’ä»¶","ä¿®æ”¹","vim","zyeking","taobao","init",":","å’Œ","neovim","åˆ›å»º","cd","ä»¥","å®‰è£…","registry","-","/","yay","æº"," ","~","https","sy","coc","sudo","config","clone","æ–‡ä»¶","org","github","nvim","æµ‹è¯•","#","é…ç½®","com"],"title":"é…ç½®Nvim","title_tokens":["é…ç½®","nvim"]},{"location":"Linux/01 Hello Manjaro/#golang","text":"","text_tokens":[],"title":"é…ç½®Golang","title_tokens":["golang","é…ç½®"]},{"location":"Linux/01 Hello Manjaro/#_5","text":"è¾“å…¥æ³• yay -Sy fcitx-sogoupinyin yay -Sy fcitx-im yay -Sy fcitx-configtool yay -Sy fcitx-qt4 # sudo nvim ~/.xprofile export GTK_IM_MODULE = fcitx export QT_IM_MODULE = fcitx export XMODIFIERS = \"@im=fcitx\" yay -Sy compton # è§£å†³è¾“å…¥æ³•é»‘è¾¹é—®é¢˜, æ–°åå­—ä¸ºpicom compton -b # å¯æ·»åŠ åˆ°Autostartä¸­ å…¶ä»–è½¯ä»¶ yay -Sy google-chrome # è°·æ­Œæµè§ˆå™¨ yay -Sy netease-cloud-music # ç½‘æ˜“äº‘éŸ³ä¹ yay -Sy electronic-wechat # å¾®ä¿¡ yay -Sy xmind # XMind yay -Sy calibre # å›¾ä¹¦ç®¡ç†å·¥å…· yay -Sy nutstore # åšæœäº‘ yay -Sy kdenlive # è§†é¢‘å‰ªè¾‘å·¥å…· yay -Sy flameshot # æˆªå›¾è½¯ä»¶, é…ç½®å…¨å±€å¿«æ·é”® yay -Sy typora # Markdownç¼–è¾‘å™¨ yay -Sy latte-dock # dockæ  wpsé…ç½® yay -Sy wps-office # -cnä¸ºä¸­æ–‡ç‰ˆ sudo nvim /usr/bin/wps # æ·»åŠ ä»¥ä¸‹é…ç½®è§£å†³æ— æ³•è¾“å…¥ä¸­æ–‡çš„é—®é¢˜ export GTK_IM_MODULE = fcitx export QT_IM_MODULE = fcitx export XMODIFIERS = \"@im=fcitx\"","text_tokens":["è¾“å…¥","å¾®ä¿¡","ä»¥ä¸‹","å…¶ä»–è½¯ä»¶","_","qt4",",","æˆªå›¾","calibre","wps","electronic","export","æ·»åŠ ","cloud"," ","å…¶ä»–","picom","å¿«æ·","ç®¡ç†","å·¥å…·",".","markdown","è¾“å…¥æ³•","dock","music","çš„","nutstore","xmodifiers","ç¼–è¾‘","è½¯ä»¶","æ ","xprofile","åˆ°","autostart","æµè§ˆ","b","fcitx","éŸ³ä¹","è§†é¢‘","module","@","nvim","åå­—","typora","#","è°·æ­Œ","netease","ç½‘æ˜“","é—®é¢˜","è§†é¢‘å‰ªè¾‘","ä¸­æ–‡","ä¸­æ–‡ç‰ˆ","xmind","å¯","qt","wechat","latte","å‰ªè¾‘","office","gtk","å›¾ä¹¦","äº‘","åšæœ","im","google","-","=","/","å…¥æ³•","sogoupinyin","æ–‡ç‰ˆ","å…¨å±€","usr","~","sy","sudo","æ–°","é…ç½®","ç®¡ç†å·¥å…·","æµè§ˆå™¨","kdenlive","flameshot","ç¼–è¾‘å™¨","configtool","æ— æ³•","bin","è¾¹","å¿«æ·é”®","chrome","è§£å†³","é»‘","cn","compton","yay","ä¸º","ç†å·¥","ä¸­","\""],"title":"è½¯ä»¶","title_tokens":["è½¯ä»¶"]},{"location":"Linux/01 Hello Manjaro/#kde","text":"Netspeed Event Calendar Active Window Control","text_tokens":["event","control","active"," ","calendar","netspeed","window"],"title":"KDEç¾åŒ–","title_tokens":["ç¾åŒ–","kde"]},{"location":"Linux/01 Hello Manjaro/#_6","text":"è§£å†³Manjaroé‡å¯å£çº¸é‡è®¾é—®é¢˜ ifconfigæŒ‡ä»¤æ‰¾ä¸åˆ°","text_tokens":["ifconfig","ä¸åˆ°","æŒ‡ä»¤","é‡å¯","manjaro","é—®é¢˜","å£çº¸","æ‰¾","é‡è®¾"," ","è§£å†³"],"title":"å…¶ä»–é—®é¢˜","title_tokens":["å…¶ä»–","é—®é¢˜"]},{"location":"Linux/02 ChangeSources/","text":"Linux02: æ›´æ”¹Ubuntuæº å¤‡ä»½æºæ–‡ä»¶ æ·»åŠ æº æ›´æ–° sudo cp /etc/apt/sources.list /etc/apt/sources_init.list sudo gedit /etc/apt/sources.list apt-get update","text_tokens":[".","_","ubuntu","get","linux02","init",":","å¤‡ä»½","etc","æ›´æ–°","apt","gedit","-","æ·»åŠ ","/","sources","cp","æº"," ","update","sudo","æ›´æ”¹","æºæ–‡ä»¶","æ–‡ä»¶","list"],"title":"Linux02: æ›´æ”¹Ubuntuæº","title_tokens":["linux02",":","æº"," ","ubuntu","æ›´æ”¹"]},{"location":"Linux/02 ChangeSources/#linux02-ubuntu","text":"å¤‡ä»½æºæ–‡ä»¶ æ·»åŠ æº æ›´æ–° sudo cp /etc/apt/sources.list /etc/apt/sources_init.list sudo gedit /etc/apt/sources.list apt-get update","text_tokens":[".","_","get","init","å¤‡ä»½","etc","æ›´æ–°","apt","gedit","-","æ·»åŠ ","/","sources","cp","æº"," ","update","sudo","æºæ–‡ä»¶","æ–‡ä»¶","list"],"title":"Linux02: æ›´æ”¹Ubuntuæº","title_tokens":["linux02",":","æº"," ","ubuntu","æ›´æ”¹"]},{"location":"Linux/MyUbuntu/01 Install/","text":"","text_tokens":[],"title":"01 Install","title_tokens":["install","01"," "]},{"location":"Linux/MyUbuntu/toc/","text":"INSTALL CONFIGUE SOURCE IMGAE vim /etc/source.list GOOGLE PINYIN FCITX INDICATOR-MONITOR GITHUB PYTHON3 ln GOLANG VIM NEOVIM VUNDLE/VIM-PLUG VIM-GO AIRLINE NDTREE MARKDOWN ~~RANGER~~ TMUX curl -fLo ~/.config/nvim/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/ plug.vim","text_tokens":["golang","dirs","imgae",".","markdown","airline","ndtree","vim","githubusercontent","pinyin",":","etc","neovim","python3","flo","indicator","tmux","configue","google","-","ln","/"," ","go","curl","fcitx","~","create","https","junegunn","vundle","config","install","ranger","plug","list","github","nvim","master","monitor","autoload","raw","com","source"],"title":"Toc","title_tokens":["toc"]},{"location":"Nginx/01 openstry/","text":"01 openstry NginxåŸºç¡€æŒ‡ä»¤ nginx ï¼šå¯åŠ¨Nginx nginx -s reload ï¼šé‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ nginx -s stop ï¼šåœæ­¢NginxæœåŠ¡ nginx -t ï¼šæµ‹è¯•é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡® åŒ¹é…ç­‰çº§ ç¬¬ä¸€ä¼˜å…ˆçº§ ä¸¥æ ¼åŒ¹é…ï¼Œä»…ä»…åŒ¹é… /a location = /a { echo \"hello /a\" ; } ç¬¬äºŒä¼˜å…ˆçº§ åŒ¹é… /aå¼€å¤´ çš„å­—ç¬¦ä¸² localtion ^~ /a { echo \"hello ~ /a\"; } åŒä¼˜å…ˆçº§ï¼Œçœ‹åŒ¹é…ç¨‹åº¦ã€‚ ç¬¬ä¸‰ä¼˜å…ˆçº§ æ­£åˆ™åŒ¹é… location ~ /[a-zA-Z0-9_-]+ { echo \"~ /\\W\" ; } ç¬¬å››ä¼˜å…ˆçº§ åŒ¹é…æ‰€æœ‰è¯·æ±‚ location / { echo \"hello nginx\" ; } åå‘ä»£ç† å°†è¯·æ±‚é€šè¿‡ process_pass è½¬å‘åˆ°ç›®æ ‡æœåŠ¡å™¨ location { proxy_pass http://192.168.0.12:80 ; } è®¿é—® localhost/a çš„æ—¶å€™ä¼šå‘ç”Ÿ404 NOT FOUNDï¼Œå› ä¸ºç›®æ ‡æœåŠ¡å™¨ä¸­æ²¡æœ‰ http://192.168.0.12:80/a location / { echo â€œhelloâ€ ; } location /a { proxy_pass http://192.168.0.12:80 ; } â€‹ å¦‚æœéœ€è¦å°† /a è¯·æ±‚ä»£ç†åˆ°ç›®æ ‡æœåŠ¡å™¨çš„ / è·¯å¾„ï¼Œåˆ™éœ€è¦åœ¨ä»£ç†æœåŠ¡å™¨ååŠ  / è¡¨ç¤ºç»å¯¹è·¯å¾„ï¼Œè®¿é—® localhot:/a/ location / { echo â€œhelloâ€ ; } location /a/ { proxy_pass http://192.168.0.12:80/ ; } è´Ÿè½½å‡è¡¡ é€šè¿‡ upsteam æ¨¡å—å£°æ˜æœåŠ¡å™¨ç»„å®ç°è´Ÿè½½å‡è¡¡ weight ï¼šé…ç½®æœåŠ¡å™¨æƒé‡ ip_hash ï¼šæŒ‰ç…§è®¿é—®IPçš„hashç»“æœå€¼åˆ†é… fair ï¼šæŒ‰ç…§åç«¯æœåŠ¡å™¨å“åº”æ—¶é—´åˆ†é…ï¼Œæ—¶é—´çŸ­çš„ä¼˜å…ˆçº§é«˜ url_hash ï¼šæŒ‰ç…§è®¿é—®URLçš„hashç»“æœå€¼åˆ†é… upstream group1 { server 192.168.0.12 : 80 weight=10ï¼› server 192.168.0.12 : 81 weight=1ï¼› } location / { echo â€œhelloâ€ ; } location /a { proxy_pass http:/group1/ ; }","text_tokens":["åå‘","z0","ç»“æœ","çŸ­","0.12","_","è½¬å‘","http","localhot","æ—¶å€™",":","é‡æ–°","åŠ è½½","åŠ¡å™¨","é«˜","+","æƒé‡","åœ¨","å","localhost","hash","ï¼š","è´Ÿè½½","â€","ä¼˜å…ˆçº§"," ","za","åŸºç¡€","ä»£ç†","æ—¶é—´","ç¬¬ä¸‰","æ˜¯å¦","å­—ç¬¦ä¸²","ååŠ ","group1","10",".","reload","ç»å¯¹","çš„","è®¿é—®","ç¬¬äºŒ","ç»å¯¹è·¯å¾„","ç¬¬å››","å‘ç”Ÿ","å­—ç¬¦","server","01","åˆ°","å¯åŠ¨","ä¸¥æ ¼","æ­£åˆ™","{","80","t","ip","url","ã€‚","æœåŠ¡","ç­‰çº§","å€¼","åˆ†é…","stop","çœ‹","æŒ‡ä»¤","ä¼˜å…ˆ","å‡è¡¡","s","è·¯å¾„","åœæ­¢","æµ‹è¯•","found","ï¼›","åŒ","hello","upstream","ç¬¬ä¸€","å¦‚æœ","åŒ¹é…","proxy","ç¨‹åº¦","ä»…ä»…","é…ç½®æ–‡ä»¶","è¡¨ç¤º","upsteam","process","openstry","fair","è¯·æ±‚","pass","]","â€œ","-","nginx","=","/","192.168","æŒ‰ç…§","å°†","echo","ï¼Œ","not","æ²¡æœ‰","~","å› ä¸º","æ–‡ä»¶","weight","localtion","81","ç«¯","é…ç½®","9","ç›®æ ‡","æ¨¡å—","å£°æ˜","ä»£ç†æœåŠ¡å™¨","1","â€‹","é€šè¿‡","æ­£ç¡®","w","a",";","æ‰€æœ‰","ä¼š","^","404","ç»„","å“åº”","å®ç°","}","éœ€è¦","ä¸­","æœåŠ¡å™¨","\"","åˆ™","å¼€å¤´","\\","location","["],"title":"01 openstry","title_tokens":["openstry","01"," "]},{"location":"Nginx/01 openstry/#01-openstry","text":"","text_tokens":[],"title":"01 openstry","title_tokens":["openstry","01"," "]},{"location":"Nginx/01 openstry/#nginx","text":"nginx ï¼šå¯åŠ¨Nginx nginx -s reload ï¼šé‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ nginx -s stop ï¼šåœæ­¢NginxæœåŠ¡ nginx -t ï¼šæµ‹è¯•é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®","text_tokens":["é…ç½®æ–‡ä»¶","reload","æ­£ç¡®","é‡æ–°","åŠ è½½","ï¼š","-","nginx","å¯åŠ¨"," ","t","æœåŠ¡","stop","æ–‡ä»¶","s","åœæ­¢","æµ‹è¯•","é…ç½®","æ˜¯å¦"],"title":"NginxåŸºç¡€æŒ‡ä»¤","title_tokens":["åŸºç¡€","nginx","æŒ‡ä»¤"]},{"location":"Nginx/01 openstry/#_1","text":"","text_tokens":[],"title":"åŒ¹é…ç­‰çº§","title_tokens":["ç­‰çº§","åŒ¹é…"]},{"location":"Nginx/01 openstry/#_2","text":"ä¸¥æ ¼åŒ¹é…ï¼Œä»…ä»…åŒ¹é… /a location = /a { echo \"hello /a\" ; }","text_tokens":["a",";","=","/","åŒ¹é…","\"","echo","ï¼Œ","ä¸¥æ ¼","}","{"," ","ä»…ä»…","location","hello"],"title":"ç¬¬ä¸€ä¼˜å…ˆçº§","title_tokens":["ä¼˜å…ˆ","ä¼˜å…ˆçº§","ç¬¬ä¸€"]},{"location":"Nginx/01 openstry/#_3","text":"åŒ¹é… /aå¼€å¤´ çš„å­—ç¬¦ä¸² localtion ^~ /a { echo \"hello ~ /a\"; } åŒä¼˜å…ˆçº§ï¼Œçœ‹åŒ¹é…ç¨‹åº¦ã€‚","text_tokens":["åŒ¹é…","ç¨‹åº¦","a",";","çš„","å­—ç¬¦ä¸²","åŒ","^","/","å­—ç¬¦","echo","ï¼Œ","}","{","ä¼˜å…ˆçº§"," ","ã€‚","~","çœ‹","ä¼˜å…ˆ","\"","localtion","å¼€å¤´","hello"],"title":"ç¬¬äºŒä¼˜å…ˆçº§","title_tokens":["ç¬¬äºŒ","ä¼˜å…ˆ","ä¼˜å…ˆçº§"]},{"location":"Nginx/01 openstry/#_4","text":"æ­£åˆ™åŒ¹é… location ~ /[a-zA-Z0-9_-]+ { echo \"~ /\\W\" ; }","text_tokens":["9","z0","åŒ¹é…","_","w","a",";","+","]","-","/","echo","æ­£åˆ™","{","}"," ","~","za","\"","\\","location","["],"title":"ç¬¬ä¸‰ä¼˜å…ˆçº§","title_tokens":["ä¼˜å…ˆ","ä¼˜å…ˆçº§","ç¬¬ä¸‰"]},{"location":"Nginx/01 openstry/#_5","text":"åŒ¹é…æ‰€æœ‰è¯·æ±‚ location / { echo \"hello nginx\" ; }","text_tokens":[";","nginx","/","åŒ¹é…","æ‰€æœ‰","echo","\"","}","{"," ","è¯·æ±‚","location","hello"],"title":"ç¬¬å››ä¼˜å…ˆçº§","title_tokens":["ä¼˜å…ˆ","ä¼˜å…ˆçº§","ç¬¬å››"]},{"location":"Nginx/01 openstry/#_6","text":"å°†è¯·æ±‚é€šè¿‡ process_pass è½¬å‘åˆ°ç›®æ ‡æœåŠ¡å™¨ location { proxy_pass http://192.168.0.12:80 ; } è®¿é—® localhost/a çš„æ—¶å€™ä¼šå‘ç”Ÿ404 NOT FOUNDï¼Œå› ä¸ºç›®æ ‡æœåŠ¡å™¨ä¸­æ²¡æœ‰ http://192.168.0.12:80/a location / { echo â€œhelloâ€ ; } location /a { proxy_pass http://192.168.0.12:80 ; } â€‹ å¦‚æœéœ€è¦å°† /a è¯·æ±‚ä»£ç†åˆ°ç›®æ ‡æœåŠ¡å™¨çš„ / è·¯å¾„ï¼Œåˆ™éœ€è¦åœ¨ä»£ç†æœåŠ¡å™¨ååŠ  / è¡¨ç¤ºç»å¯¹è·¯å¾„ï¼Œè®¿é—® localhot:/a/ location / { echo â€œhelloâ€ ; } location /a/ { proxy_pass http://192.168.0.12:80/ ; }","text_tokens":["ç›®æ ‡","å¦‚æœ","proxy",".","0.12","ä»£ç†æœåŠ¡å™¨","â€‹","é€šè¿‡","http","_","è½¬å‘","è¡¨ç¤º","localhot","ç»å¯¹",";","a",":","æ—¶å€™","process","åŠ¡å™¨","çš„","è®¿é—®","ç»å¯¹è·¯å¾„","åœ¨","è¯·æ±‚","pass","localhost","ä¼š","404","â€œ","192.168","/","å‘ç”Ÿ","å°†","â€","åˆ°","ï¼Œ","echo","not","80","{","}"," ","æ²¡æœ‰","æœåŠ¡","éœ€è¦","å› ä¸º","ä¸­","æœåŠ¡å™¨","è·¯å¾„","ä»£ç†","åˆ™","found","location","hello","ååŠ "],"title":"åå‘ä»£ç†","title_tokens":["åå‘","ä»£ç†"]},{"location":"Nginx/01 openstry/#_7","text":"é€šè¿‡ upsteam æ¨¡å—å£°æ˜æœåŠ¡å™¨ç»„å®ç°è´Ÿè½½å‡è¡¡ weight ï¼šé…ç½®æœåŠ¡å™¨æƒé‡ ip_hash ï¼šæŒ‰ç…§è®¿é—®IPçš„hashç»“æœå€¼åˆ†é… fair ï¼šæŒ‰ç…§åç«¯æœåŠ¡å™¨å“åº”æ—¶é—´åˆ†é…ï¼Œæ—¶é—´çŸ­çš„ä¼˜å…ˆçº§é«˜ url_hash ï¼šæŒ‰ç…§è®¿é—®URLçš„hashç»“æœå€¼åˆ†é… upstream group1 { server 192.168.0.12 : 80 weight=10ï¼› server 192.168.0.12 : 81 weight=1ï¼› } location / { echo â€œhelloâ€ ; } location /a { proxy_pass http:/group1/ ; }","text_tokens":["group1","10","æ¨¡å—","proxy","ç»“æœ","å£°æ˜","çŸ­",".","0.12","1","é€šè¿‡","_","location","http",";","upsteam","é«˜",":","a","åŠ¡å™¨","çš„","è®¿é—®","fair","æƒé‡","å","hash","pass","ç»„","ï¼š","â€œ","å“åº”","192.168","=","è´Ÿè½½","æŒ‰ç…§","server","/","å®ç°","echo","ï¼Œ","â€","url","ip","ä¼˜å…ˆçº§"," ","{","80","}","æœåŠ¡","å€¼","åˆ†é…","æœåŠ¡å™¨","weight","ä¼˜å…ˆ","å‡è¡¡","81","æ—¶é—´","ç«¯","é…ç½®","ï¼›","hello","upstream"],"title":"è´Ÿè½½å‡è¡¡","title_tokens":["å‡è¡¡","è´Ÿè½½"]},{"location":"Nginx/02 å°†Goåº”ç”¨éƒ¨ç½²åœ¨Nginxä¸Š/","text":"02 å°†Goåº”ç”¨éƒ¨ç½²åœ¨Nginxä¸Š é…ç½®hosts 127.0.0.1 api.blog.com é…ç½®nginx.conf å®ç°åå‘ä»£ç†ï¼Œå°†æœ¬åœ°çš„ api.blog.com:8081 çš„æ‰€æœ‰è¯·æ±‚ä»£ç†ç»™Goåº”ç”¨ç¨‹åºçš„8000ç«¯å£ worker_processes 1 ; events { worker_connections 1024 ; } http { include mime.types ; default_type application/octet-stream ; sendfile on ; keepalive_timeout 65 ; server { # ç›‘å¬æœ¬åœ°8081 # api.blog.com:8081 listen 8081 ; server_name api.blog.com ; # å°†æ‰€æœ‰è¯·æ±‚æ‰“ç»™api.blog.com location / { # URLæœ€åçš„æ–œæ è¡¨ç¤ºç»å¯¹è·¯å¾„ proxy_pass http://127.0.0.1:8000/ ; } } } å¯åŠ¨ åœ¨é¡¹ç›®è·¯å¾„ä¸‹é€šè¿‡ go build . å°†ç¨‹åºæ‰“åŒ…æˆ .exe æ–‡ä»¶ã€‚åœ¨å‘½ä»¤è¡Œä¸­å¯åŠ¨è¯¥ç¨‹åºã€‚ é€šè¿‡postmanéªŒè¯è¯·æ±‚ http://api.blog.com:8081/auth?username=test&password=test123456 è´Ÿè½½å‡è¡¡ ä¿®æ”¹ nginx.conf worker_processes 1 ; events { worker_connections 1024 ; } http { include mime.types ; default_type application/octet-stream ; sendfile on ; keepalive_timeout 65 ; # æ·»åŠ upstreamèŠ‚ç‚¹ upstream api.blog.com { server 127.0.0.1 : 8001 ; server 127.0.0.1 : 8002 ; } server { listen 8081 ; server_name api.blog.com ; location / { proxy_pass http://api.blog.com/ ; } } } ä¿®æ”¹ conf/app.ini é…ç½®ä¸åŒçš„ç«¯å£ï¼Œåˆ†åˆ«é€šè¿‡ go build -o [name] ç¼–è¯‘æˆä¸¤ä¸ªåº”ç”¨ç¨‹åºã€‚é€šè¿‡postmanå¤šæ¬¡è¯·æ±‚å‘ç°ä¸¤ä¸ªç¨‹åºéƒ½èƒ½å¤Ÿæ¥å—åˆ°nginxåˆ†å‘è¿‡æ¥çš„è¯·æ±‚ï¼Œå®ç°äº†è´Ÿè½½å‡è¡¡ã€‚","text_tokens":["åå‘","default","application","ä¸‹","exe","password","keepalive","octet","_","http","postman",":","api","name","o","åœ¨","æœ¬åœ°","test","ç»™","éƒ½","æ·»åŠ ","è´Ÿè½½","è¯‘æˆ","ini","1024","æ¥å—","è¿‡æ¥"," ","ç¨‹åº","ä»£ç†","ç«¯å£","?","auth",".","ä¿®æ”¹","ç»å¯¹","çš„","02","èƒ½å¤Ÿ","ç»å¯¹è·¯å¾„","build","blog","timeout","connections","mime","server","æ‰“","åº”ç”¨","åˆ°","å¯åŠ¨","url","{","åˆ†åˆ«","ã€‚","ç›‘å¬","æˆ","å‡è¡¡","æ‰“åŒ…","è·¯å¾„","app","#","å‘½ä»¤è¡Œ","upstream","sendfile","proxy","username","hosts","è¡¨ç¤º","å¤šæ¬¡","test123456","åˆ†å‘","conf","è¯·æ±‚","on","8081","pass","ä¸åŒ","]","-","127.0","nginx","=","/","å°†","ï¼Œ","events","include","go","æœ€å","ä¸¤ä¸ª","èŠ‚ç‚¹","8001","8002","æ–‡ä»¶","é…ç½®","com","ç¼–è¯‘æˆ","é¡¹ç›®","&","åº”ç”¨ç¨‹åº","processes","listen","stream","1","ç¼–è¯‘","type","é€šè¿‡","types","è¯¥","äº†","0.1",";","worker","ä¸Š","8000","éªŒè¯","æ‰€æœ‰","æ–œæ ","å‘½ä»¤","å®ç°","}","éƒ¨ç½²","65","ä¸­","location","[","å‘ç°"],"title":"02 å°†Goåº”ç”¨éƒ¨ç½²åœ¨Nginxä¸Š","title_tokens":["nginx","ä¸Š","å°†","02","åº”ç”¨","åœ¨"," ","go","éƒ¨ç½²"]},{"location":"Nginx/02 å°†Goåº”ç”¨éƒ¨ç½²åœ¨Nginxä¸Š/#02-gonginx","text":"","text_tokens":[],"title":"02 å°†Goåº”ç”¨éƒ¨ç½²åœ¨Nginxä¸Š","title_tokens":["nginx","ä¸Š","å°†","02","åº”ç”¨","åœ¨"," ","go","éƒ¨ç½²"]},{"location":"Nginx/02 å°†Goåº”ç”¨éƒ¨ç½²åœ¨Nginxä¸Š/#hosts","text":"127.0.0.1 api.blog.com","text_tokens":["127.0","0.1","api","."," ","com","blog"],"title":"é…ç½®hosts","title_tokens":["hosts","é…ç½®"]},{"location":"Nginx/02 å°†Goåº”ç”¨éƒ¨ç½²åœ¨Nginxä¸Š/#nginxconf","text":"å®ç°åå‘ä»£ç†ï¼Œå°†æœ¬åœ°çš„ api.blog.com:8081 çš„æ‰€æœ‰è¯·æ±‚ä»£ç†ç»™Goåº”ç”¨ç¨‹åºçš„8000ç«¯å£ worker_processes 1 ; events { worker_connections 1024 ; } http { include mime.types ; default_type application/octet-stream ; sendfile on ; keepalive_timeout 65 ; server { # ç›‘å¬æœ¬åœ°8081 # api.blog.com:8081 listen 8081 ; server_name api.blog.com ; # å°†æ‰€æœ‰è¯·æ±‚æ‰“ç»™api.blog.com location / { # URLæœ€åçš„æ–œæ è¡¨ç¤ºç»å¯¹è·¯å¾„ proxy_pass http://127.0.0.1:8000/ ; } } }","text_tokens":["åå‘","sendfile","default","åº”ç”¨ç¨‹åº","processes","application","listen","proxy",".","keepalive","stream","1","type","octet","_","http","types","è¡¨ç¤º","ç»å¯¹",";","0.1",":","api","worker","8000","çš„","name","æ‰€æœ‰","æ–œæ ","ç»å¯¹è·¯å¾„","æœ¬åœ°","è¯·æ±‚","8081","on","blog","pass","ç»™","timeout","-","127.0","connections","/","mime","server","å°†","æ‰“","å®ç°","åº”ç”¨","ï¼Œ","events","1024","}","{","include"," ","go","url","æœ€å","ç¨‹åº","ç›‘å¬","65","è·¯å¾„","ä»£ç†","ç«¯å£","#","com","location"],"title":"é…ç½®nginx.conf","title_tokens":[".","conf","nginx","é…ç½®"]},{"location":"Nginx/02 å°†Goåº”ç”¨éƒ¨ç½²åœ¨Nginxä¸Š/#_1","text":"åœ¨é¡¹ç›®è·¯å¾„ä¸‹é€šè¿‡ go build . å°†ç¨‹åºæ‰“åŒ…æˆ .exe æ–‡ä»¶ã€‚åœ¨å‘½ä»¤è¡Œä¸­å¯åŠ¨è¯¥ç¨‹åºã€‚ é€šè¿‡postmanéªŒè¯è¯·æ±‚ http://api.blog.com:8081/auth?username=test&password=test123456","text_tokens":["exe","ä¸‹","auth","password",".","username","é€šè¿‡","http","è¯¥","postman","test123456",":","api","éªŒè¯","åœ¨","build","è¯·æ±‚","test","8081","blog","=","/","å‘½ä»¤","å°†","å¯åŠ¨"," ","go","ã€‚","ç¨‹åº","ä¸­","æˆ","æ–‡ä»¶","æ‰“åŒ…","è·¯å¾„","com","å‘½ä»¤è¡Œ","é¡¹ç›®","&","?"],"title":"å¯åŠ¨","title_tokens":["å¯åŠ¨"]},{"location":"Nginx/02 å°†Goåº”ç”¨éƒ¨ç½²åœ¨Nginxä¸Š/#_2","text":"ä¿®æ”¹ nginx.conf worker_processes 1 ; events { worker_connections 1024 ; } http { include mime.types ; default_type application/octet-stream ; sendfile on ; keepalive_timeout 65 ; # æ·»åŠ upstreamèŠ‚ç‚¹ upstream api.blog.com { server 127.0.0.1 : 8001 ; server 127.0.0.1 : 8002 ; } server { listen 8081 ; server_name api.blog.com ; location / { proxy_pass http://api.blog.com/ ; } } } ä¿®æ”¹ conf/app.ini é…ç½®ä¸åŒçš„ç«¯å£ï¼Œåˆ†åˆ«é€šè¿‡ go build -o [name] ç¼–è¯‘æˆä¸¤ä¸ªåº”ç”¨ç¨‹åºã€‚é€šè¿‡postmanå¤šæ¬¡è¯·æ±‚å‘ç°ä¸¤ä¸ªç¨‹åºéƒ½èƒ½å¤Ÿæ¥å—åˆ°nginxåˆ†å‘è¿‡æ¥çš„è¯·æ±‚ï¼Œå®ç°äº†è´Ÿè½½å‡è¡¡ã€‚","text_tokens":["default","application","keepalive","octet","http","_","postman",":","api","name","o","éƒ½","æ·»åŠ ","è¯‘æˆ","è´Ÿè½½","ini","1024","æ¥å—","è¿‡æ¥"," ","ç¨‹åº","ç«¯å£",".","ä¿®æ”¹","çš„","èƒ½å¤Ÿ","build","blog","timeout","connections","mime","server","åº”ç”¨","åˆ°","åˆ†åˆ«","{","ã€‚","å‡è¡¡","app","#","upstream","sendfile","proxy","å¤šæ¬¡","åˆ†å‘","conf","on","pass","8081","ä¸åŒ","è¯·æ±‚","]","-","127.0","nginx","/","ï¼Œ","events","include","go","ä¸¤ä¸ª","èŠ‚ç‚¹","8001","8002","com","é…ç½®","ç¼–è¯‘æˆ","åº”ç”¨ç¨‹åº","processes","listen","stream","1","ç¼–è¯‘","type","é€šè¿‡","types","äº†",";","0.1","worker","å®ç°","}","65","location","[","å‘ç°"],"title":"è´Ÿè½½å‡è¡¡","title_tokens":["å‡è¡¡","è´Ÿè½½"]},{"location":"Others/01 MySql/","text":"ä½¿ç”¨Mysql å®‰è£… ä¸‹è½½ é…ç½® ç¼–è¾‘ my.ini æ–‡ä»¶ åœ¨Mysqlå®‰è£…æ–‡ä»¶å¤¹ä¸‹æ–°å»º my.ini æ–‡ä»¶ [client] # è®¾ç½®mysqlå®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›† default-character-set = utf8 [mysqld] # è®¾ç½®3306ç«¯å£ port = 3306 # è®¾ç½®mysqlçš„å®‰è£…ç›®å½• basedir = C:/Software/IDE/mysql-8.0.18 # è®¾ç½®æ•°æ®å­˜æ”¾ä½ç½® datadir = C:/Software/IDE/mysql-8.0.18/data # è®¾ç½®åˆå§‹å¯†ç , å¥½åƒæ²¡æœ‰ä»€ä¹ˆç”¨ default_authentication_plugin = mysql_native_password # å…è®¸æœ€å¤§è¿æ¥æ•° max_connections = 20 # æœåŠ¡ç«¯ä½¿ç”¨çš„å­—ç¬¦é›†é»˜è®¤ä¸º8æ¯”ç‰¹ç¼–ç çš„latin1å­—ç¬¦é›† character-set-server = UTF8MB4 # åˆ›å»ºæ–°è¡¨æ—¶å°†ä½¿ç”¨çš„é»˜è®¤å­˜å‚¨å¼•æ“ default-storage-engine = INNODB å…¶ä¸­ datadir ä¸èƒ½æœ‰ä»»ä½•æ–‡ä»¶, å¦åˆ™å¯åŠ¨mysqlæœåŠ¡ä¼šæŠ¥é”™: --initialize specified but the data directory has files in it. Aborting. é…ç½®å®Œæˆåè¿›å…¥å®‰è£…è·¯å¾„çš„ .\\bin ç›®å½•, ç”¨ç®¡ç†å‘˜èº«ä»½æ‰“å¼€ CMD é”®å…¥: mysqld --initialize --console è¿›è¡Œåˆå§‹åŒ–å¾—åˆ°å¯†ç  è¾“å…¥mysqlæŒ‡ä»¤å‘ç° You must reset your password using ALTER USER statement before executing this statement. , éœ€è¦é€šè¿‡ alter user user() identified by \"mypwd\"; ä¿®æ”¹å¯†ç å³å¯. mysqlå¸¸ç”¨æŒ‡ä»¤ [WINDOWS] mysqld install : å®‰è£…mysqlæœåŠ¡ [WINDOWSç®¡ç†å‘˜] net start mysql : å¯åŠ¨mysqlæœåŠ¡ mysql -u root -p : è¿›å…¥mysql alter user user() identified by \"passwrod\"; : ä¿®æ”¹mysqlå¯†ç  mysqlå¯è§†åŒ– heidi sql REF: å®‰è£…mysql è®¾ç½®mysqlå¯†ç ","text_tokens":["è¿æ¥","è¾“å…¥","default","è¿›å…¥","æ•°æ®","passwrod","è¿æ¥æ•°","ä¸‹","set","password","ä»¶å¤¹","_","utf8mb4","å¼•æ“","å³å¯","mypwd","è¿›è¡Œ",",","basedir","datadir",":","ref","ä½ç½®","åœ¨","root","å","client","é»˜è®¤","specified","cmd","20","ini","ç¼–ç ","é”®å…¥"," ","identified","c","max","using","install","utf8","æ–‡ä»¶å¤¹","net","ç«¯å£","character","ç®¡ç†","å®Œæˆ","has","latin1","8","å¦åˆ™","å¯è§†åŒ–",".","æ–°å»º","initialize","ä¿®æ”¹","ide","innodb","çš„","but","ç¼–è¾‘","3306","å®‰è£…","ä»»ä½•","connections","å­˜å‚¨","directory","å­—ç¬¦","plugin","server","this","å¯åŠ¨","reset","å®¢æˆ·","8.0","æœåŠ¡","åˆå§‹åŒ–","data","æŒ‡ä»¤","my","authentication","è·¯å¾„",")","æœ‰","å¥½åƒ","#","ä»€ä¹ˆ","æœ€å¤§","æ‰“å¼€","alter","start","ç®¡ç†å‘˜","mysql","u","èº«ä»½","sql","æœåŠ¡ç«¯","]","-","native","è®¾ç½®","=","/","å°†","engine","by","you","æ²¡æœ‰","it","åˆå§‹","å¯è§†","ä½¿ç”¨","executing","in","storage","æ–‡ä»¶","åˆå§‹å¯†ç ","å­—ç¬¦é›†","before","å…è®¸","é…ç½®","statement","ä¸‹è½½","heidi","windows","é€šè¿‡","å…¶ä¸­","ç›®å½•","bin",";","18","user","åˆ›å»º","console","mysqld","å¸¸ç”¨","ä¼š","software","æ–°è¡¨æ—¶","æ¯”ç‰¹","å¾—åˆ°","ä¸èƒ½","(","å®¢æˆ·ç«¯","ä¸º","éœ€è¦","must","p","aborting","your","port","\"","files","å­˜æ”¾","æŠ¥é”™","the","\\","å¯†ç ","[","å‘ç°","ç”¨"],"title":"ä½¿ç”¨Mysql","title_tokens":["ä½¿ç”¨","mysql"]},{"location":"Others/01 MySql/#mysql","text":"","text_tokens":[],"title":"ä½¿ç”¨Mysql","title_tokens":["ä½¿ç”¨","mysql"]},{"location":"Others/01 MySql/#_1","text":"ä¸‹è½½","text_tokens":["ä¸‹è½½"],"title":"å®‰è£…","title_tokens":["å®‰è£…"]},{"location":"Others/01 MySql/#_2","text":"ç¼–è¾‘ my.ini æ–‡ä»¶ åœ¨Mysqlå®‰è£…æ–‡ä»¶å¤¹ä¸‹æ–°å»º my.ini æ–‡ä»¶ [client] # è®¾ç½®mysqlå®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›† default-character-set = utf8 [mysqld] # è®¾ç½®3306ç«¯å£ port = 3306 # è®¾ç½®mysqlçš„å®‰è£…ç›®å½• basedir = C:/Software/IDE/mysql-8.0.18 # è®¾ç½®æ•°æ®å­˜æ”¾ä½ç½® datadir = C:/Software/IDE/mysql-8.0.18/data # è®¾ç½®åˆå§‹å¯†ç , å¥½åƒæ²¡æœ‰ä»€ä¹ˆç”¨ default_authentication_plugin = mysql_native_password # å…è®¸æœ€å¤§è¿æ¥æ•° max_connections = 20 # æœåŠ¡ç«¯ä½¿ç”¨çš„å­—ç¬¦é›†é»˜è®¤ä¸º8æ¯”ç‰¹ç¼–ç çš„latin1å­—ç¬¦é›† character-set-server = UTF8MB4 # åˆ›å»ºæ–°è¡¨æ—¶å°†ä½¿ç”¨çš„é»˜è®¤å­˜å‚¨å¼•æ“ default-storage-engine = INNODB å…¶ä¸­ datadir ä¸èƒ½æœ‰ä»»ä½•æ–‡ä»¶, å¦åˆ™å¯åŠ¨mysqlæœåŠ¡ä¼šæŠ¥é”™: --initialize specified but the data directory has files in it. Aborting. é…ç½®å®Œæˆåè¿›å…¥å®‰è£…è·¯å¾„çš„ .\\bin ç›®å½•, ç”¨ç®¡ç†å‘˜èº«ä»½æ‰“å¼€ CMD é”®å…¥: mysqld --initialize --console è¿›è¡Œåˆå§‹åŒ–å¾—åˆ°å¯†ç  è¾“å…¥mysqlæŒ‡ä»¤å‘ç° You must reset your password using ALTER USER statement before executing this statement. , éœ€è¦é€šè¿‡ alter user user() identified by \"mypwd\"; ä¿®æ”¹å¯†ç å³å¯.","text_tokens":["è¿æ¥","è¾“å…¥","default","è¿›å…¥","æ•°æ®","è¿æ¥æ•°","ä¸‹","set","password","ä»¶å¤¹","_","utf8mb4","å¼•æ“","å³å¯","mypwd","è¿›è¡Œ",",","basedir","datadir",":","ä½ç½®","åœ¨","å","client","é»˜è®¤","specified","cmd","20","ini","ç¼–ç ","é”®å…¥"," ","identified","c","max","using","utf8","æ–‡ä»¶å¤¹","ç«¯å£","character","ç®¡ç†","å®Œæˆ","has","latin1","8","å¦åˆ™",".","æ–°å»º","initialize","ä¿®æ”¹","ide","innodb","çš„","but","ç¼–è¾‘","3306","å®‰è£…","ä»»ä½•","connections","å­˜å‚¨","directory","å­—ç¬¦","plugin","server","this","å¯åŠ¨","reset","å®¢æˆ·","8.0","æœåŠ¡","åˆå§‹åŒ–","data","æŒ‡ä»¤","my","authentication","è·¯å¾„",")","æœ‰","å¥½åƒ","#","ä»€ä¹ˆ","æœ€å¤§","æ‰“å¼€","alter","ç®¡ç†å‘˜","mysql","èº«ä»½","æœåŠ¡ç«¯","]","-","native","è®¾ç½®","=","/","å°†","engine","by","you","æ²¡æœ‰","it","åˆå§‹","ä½¿ç”¨","executing","in","storage","æ–‡ä»¶","åˆå§‹å¯†ç ","å­—ç¬¦é›†","before","å…è®¸","é…ç½®","statement","é€šè¿‡","å…¶ä¸­","ç›®å½•","bin",";","18","user","åˆ›å»º","console","mysqld","ä¼š","software","æ–°è¡¨æ—¶","æ¯”ç‰¹","å¾—åˆ°","ä¸èƒ½","(","å®¢æˆ·ç«¯","ä¸º","éœ€è¦","must","aborting","your","port","\"","files","å­˜æ”¾","æŠ¥é”™","the","\\","å¯†ç ","[","å‘ç°","ç”¨"],"title":"é…ç½®","title_tokens":["é…ç½®"]},{"location":"Others/01 MySql/#mysql_1","text":"[WINDOWS] mysqld install : å®‰è£…mysqlæœåŠ¡ [WINDOWSç®¡ç†å‘˜] net start mysql : å¯åŠ¨mysqlæœåŠ¡ mysql -u root -p : è¿›å…¥mysql alter user user() identified by \"passwrod\"; : ä¿®æ”¹mysqlå¯†ç ","text_tokens":["è¿›å…¥","start","alter","passwrod","windows","ç®¡ç†å‘˜","mysql","u","ä¿®æ”¹",";","user",":","mysqld","root","]","å®‰è£…","-","(","by","å¯åŠ¨"," ","identified","æœåŠ¡","p","install","\"","net",")","ç®¡ç†","[","å¯†ç "],"title":"mysqlå¸¸ç”¨æŒ‡ä»¤","title_tokens":["å¸¸ç”¨","mysql","æŒ‡ä»¤"]},{"location":"Others/01 MySql/#mysql_2","text":"heidi sql","text_tokens":["sql","heidi"," "],"title":"mysqlå¯è§†åŒ–","title_tokens":["å¯è§†","mysql","å¯è§†åŒ–"]},{"location":"Others/01 MySql/#ref","text":"å®‰è£…mysql è®¾ç½®mysqlå¯†ç ","text_tokens":["è®¾ç½®","mysql"," ","å¯†ç ","å®‰è£…"],"title":"REF:","title_tokens":["ref",":"]},{"location":"Others/Excel/01 AutoCreateTime/","text":"1. è‡ªåŠ¨åˆ›å»ºæ•°æ®æ—¶é—´ï¼Œä¸å—å…¶ä»–ä¿®æ”¹å½±å“çš„ NOW() åœ¨ é€‰é¡¹ ä¸‹çš„ å…¬å¼ å¯ç”¨ è¿­ä»£è®¡ç®— ä½¿å¾—excelä¸ä¼šæŠ¥å¾ªç¯å¼•ç”¨çš„è­¦å‘Šâš  æ­¤å¤„çš„ Cåˆ— ä¼šè‡ªåŠ¨æ ¹æ® Dåˆ— æ•°æ®åˆ›å»ºæ—¶é—´ï¼Œè¯¥æ—¶é—´ä¸ä¼šæ ¹æ®å…¶ä»–çš„åˆ—æ”¹å˜ excel = IF ( D2 = \"\" , \"\" , IF ( C2 = \"\" , NOW () , C2 )) å‚è€ƒURLï¼š å¾ªç¯å¼•ç”¨ è‡ªåŠ¨åˆ›å»ºæ—¶é—´åï¼Œé”å®šæ—¶é—´","text_tokens":["å‚è€ƒ","æ•°æ®","ä¸‹",".","å¼•ç”¨","1","è¯¥","ä¸","c2","ä¿®æ”¹",",","è®¡ç®—","åˆ›å»º","çš„","è¿­ä»£","æ ¹æ®","å—","åœ¨","åˆ—","ä¼š","å","ï¼š","æ”¹å˜","é€‰é¡¹","=","(","æŠ¥","æ­¤å¤„","ï¼Œ","url","if"," ","ä¸ä¼š","å…¶ä»–","now","è­¦å‘Š","c","å…¬å¼","d2","d","âš ","\"",")","æ—¶é—´","å¾ªç¯","è‡ªåŠ¨","å¯ç”¨","ä½¿å¾—","é”å®š","excel","å½±å“"],"title":"\t1. è‡ªåŠ¨åˆ›å»ºæ•°æ®æ—¶é—´ï¼Œä¸å—å…¶ä»–ä¿®æ”¹å½±å“çš„`NOW()`","title_tokens":["æ•°æ®",".","1","ä¸","ä¿®æ”¹","åˆ›å»º","çš„","å—","`","(","ï¼Œ"," ","å…¶ä»–","now",")","æ—¶é—´","è‡ªåŠ¨","\t","å½±å“"]},{"location":"Others/Excel/01 AutoCreateTime/#1-now","text":"åœ¨ é€‰é¡¹ ä¸‹çš„ å…¬å¼ å¯ç”¨ è¿­ä»£è®¡ç®— ä½¿å¾—excelä¸ä¼šæŠ¥å¾ªç¯å¼•ç”¨çš„è­¦å‘Šâš  æ­¤å¤„çš„ Cåˆ— ä¼šè‡ªåŠ¨æ ¹æ® Dåˆ— æ•°æ®åˆ›å»ºæ—¶é—´ï¼Œè¯¥æ—¶é—´ä¸ä¼šæ ¹æ®å…¶ä»–çš„åˆ—æ”¹å˜ excel = IF ( D2 = \"\" , \"\" , IF ( C2 = \"\" , NOW () , C2 )) å‚è€ƒURLï¼š å¾ªç¯å¼•ç”¨ è‡ªåŠ¨åˆ›å»ºæ—¶é—´åï¼Œé”å®šæ—¶é—´","text_tokens":["å‚è€ƒ","æ•°æ®","ä¸‹","å¼•ç”¨","è¯¥","c2",",","è®¡ç®—","åˆ›å»º","çš„","è¿­ä»£","æ ¹æ®","åœ¨","åˆ—","ä¼š","å","ï¼š","æ”¹å˜","é€‰é¡¹","=","(","æŠ¥","æ­¤å¤„","ï¼Œ","url","if"," ","ä¸ä¼š","å…¶ä»–","now","è­¦å‘Š","c","å…¬å¼","d2","d","âš ","\"","å¾ªç¯","æ—¶é—´",")","è‡ªåŠ¨","å¯ç”¨","ä½¿å¾—","é”å®š","excel"],"title":"1. è‡ªåŠ¨åˆ›å»ºæ•°æ®æ—¶é—´ï¼Œä¸å—å…¶ä»–ä¿®æ”¹å½±å“çš„NOW()","title_tokens":["åˆ›å»º","æ•°æ®","(","çš„","ï¼Œ",")",".","æ—¶é—´","å—","è‡ªåŠ¨"," ","1","å…¶ä»–","now","ä¸","å½±å“","ä¿®æ”¹"]},{"location":"Others/Excel/02 AutoCreateTimeByMacro/","text":"2. ç”¨å®è‡ªåŠ¨åˆ›å»ºæ•°æ®æ—¶é—´ Private Sub Worksheet_Change ( ByVal Target As Range ) ' ______è¯´æ˜ â†“ ___________________________________ 'æŸåˆ—å•å…ƒæ ¼å‘ç”Ÿå˜åŒ– 'è‹¥å˜åŒ–å€¼ä¸ä¸ºç©ºï¼Œå¯¹åº”åˆ—æ·»åŠ å˜åŒ–æ—¶é—´ç‚¹æ—¥æœŸæ—¶é—´ 'è‹¥å˜åŒ–å€¼ä¸ºç©ºï¼Œåˆ é™¤å¯¹åº”å•å…ƒæ ¼æ•°æ® 'ç¤ºä¾‹ä¸º Aåˆ—ç¬¬2è¡Œå‘ç”Ÿå˜åŒ– ï¼Œå¯¹åº”çš„ Båˆ—æ·»åŠ æˆ–åˆ é™¤æ—¥æœŸ ' ______è¯´æ˜ â†‘ ___________________________________ Application . ScreenUpdating = False 'å…³é—­å±å¹•åˆ·æ–° Dim cA , cB , startRG As String Dim offsetc As Long Dim rg As Range ' ______è®¾ç½®å‚æ•° â†“ _________________ cA = \"A\" 'å˜åŒ–åŒºåŸŸæ‰€åœ¨åˆ— cB = \"B\" 'æ—¥æœŸç”Ÿæˆåˆ— startRG = \"A1\" 'å˜åŒ–åŒºåŸŸé¦–å•å…ƒæ ¼ ( é˜²æ­¢æ”¹åŠ¨è¡¨å¤´è§¦å‘äº‹ä»¶ ) ' ______è®¾ç½®å‚æ•° â†‘ _________________ offsetc = Columns ( cB ). Column - Columns ( cA ). Column If Not Application . Intersect ( Target , Columns ( cA ), Range ( startRG , ActiveCell . SpecialCells ( xlLastCell ))) Is Nothing Then For Each rg In Intersect ( Target , Columns ( cA ), Range ( startRG , ActiveCell . SpecialCells ( xlLastCell ))) If rg <> \"\" Then With rg . Offset ( 0 , offsetc ) . Value = Now . NumberFormatLocal = \"yyyy/m/d h:mm:ss ; @\" End With Else rg . Offset ( 0 , offsetc ). Clear End If Next rg End If Application . ScreenUpdating = True 'æ¢å¤å±å¹•åˆ·æ–° End Sub","text_tokens":["è§¦å‘","æ•°æ®","application","å˜åŒ–","ç”¨å®","_",",",":","æ—¥æœŸ","åˆ—","xllastcell","æ·»åŠ ","ä¸ä¸º"," ","offsetc",">","d","å¯¹åº”","clear","åˆ·æ–°","æ—¶é—´","each","next","change","rg","åŒºåŸŸ","2","è¡¨å¤´","åˆ é™¤","ç¬¬",".","true","else","with","specialcells","is","è‹¥","çš„","ca","startrg","é˜²æ­¢","private","æ”¹åŠ¨","false","å‘ç”Ÿ","ss","dim","if","b","worksheet","å•å…ƒæ ¼","value","@","0","nothing",")","mm","string","target","for","activecell","äº‹ä»¶","column","yyyy","h","æ¢å¤","å€¼ä¸ä¸º","è¡Œ","-","=","è®¾ç½®","/","ï¼Œ","not","screenupdating","m","ç‚¹","æ‰€åœ¨","in","å‘ç”Ÿå˜åŒ–","è‡ªåŠ¨","å‚æ•°","å±å¹•","range","æŸåˆ—","<","byval","â†‘","sub","offset","___________________________________","ç¤ºä¾‹","cb","è¯´æ˜","then","a",";","åˆ›å»º","æˆ–","end","_________________","é¦–","ç”Ÿå˜","numberformatlocal","a1","'","______","(","ä¸º","å…³é—­","å€¼ä¸º","intersect","now","ç©º","å•å…ƒ","\"","â†“","ç”Ÿæˆ","as","long","columns"],"title":"2. ç”¨å®è‡ªåŠ¨åˆ›å»ºæ•°æ®æ—¶é—´","title_tokens":["åˆ›å»º","æ•°æ®","2",".","æ—¶é—´","è‡ªåŠ¨"," ","ç”¨å®"]},{"location":"Others/Excel/02 AutoCreateTimeByMacro/#2","text":"Private Sub Worksheet_Change ( ByVal Target As Range ) ' ______è¯´æ˜ â†“ ___________________________________ 'æŸåˆ—å•å…ƒæ ¼å‘ç”Ÿå˜åŒ– 'è‹¥å˜åŒ–å€¼ä¸ä¸ºç©ºï¼Œå¯¹åº”åˆ—æ·»åŠ å˜åŒ–æ—¶é—´ç‚¹æ—¥æœŸæ—¶é—´ 'è‹¥å˜åŒ–å€¼ä¸ºç©ºï¼Œåˆ é™¤å¯¹åº”å•å…ƒæ ¼æ•°æ® 'ç¤ºä¾‹ä¸º Aåˆ—ç¬¬2è¡Œå‘ç”Ÿå˜åŒ– ï¼Œå¯¹åº”çš„ Båˆ—æ·»åŠ æˆ–åˆ é™¤æ—¥æœŸ ' ______è¯´æ˜ â†‘ ___________________________________ Application . ScreenUpdating = False 'å…³é—­å±å¹•åˆ·æ–° Dim cA , cB , startRG As String Dim offsetc As Long Dim rg As Range ' ______è®¾ç½®å‚æ•° â†“ _________________ cA = \"A\" 'å˜åŒ–åŒºåŸŸæ‰€åœ¨åˆ— cB = \"B\" 'æ—¥æœŸç”Ÿæˆåˆ— startRG = \"A1\" 'å˜åŒ–åŒºåŸŸé¦–å•å…ƒæ ¼ ( é˜²æ­¢æ”¹åŠ¨è¡¨å¤´è§¦å‘äº‹ä»¶ ) ' ______è®¾ç½®å‚æ•° â†‘ _________________ offsetc = Columns ( cB ). Column - Columns ( cA ). Column If Not Application . Intersect ( Target , Columns ( cA ), Range ( startRG , ActiveCell . SpecialCells ( xlLastCell ))) Is Nothing Then For Each rg In Intersect ( Target , Columns ( cA ), Range ( startRG , ActiveCell . SpecialCells ( xlLastCell ))) If rg <> \"\" Then With rg . Offset ( 0 , offsetc ) . Value = Now . NumberFormatLocal = \"yyyy/m/d h:mm:ss ; @\" End With Else rg . Offset ( 0 , offsetc ). Clear End If Next rg End If Application . ScreenUpdating = True 'æ¢å¤å±å¹•åˆ·æ–° End Sub","text_tokens":["è§¦å‘","æ•°æ®","application","å˜åŒ–","_",",",":","æ—¥æœŸ","åˆ—","xllastcell","æ·»åŠ ","ä¸ä¸º"," ","offsetc",">","d","å¯¹åº”","clear","åˆ·æ–°","æ—¶é—´","each","next","change","rg","åŒºåŸŸ","2","è¡¨å¤´","åˆ é™¤","ç¬¬",".","true","else","with","specialcells","is","è‹¥","çš„","ca","startrg","é˜²æ­¢","private","æ”¹åŠ¨","false","å‘ç”Ÿ","ss","dim","if","b","worksheet","å•å…ƒæ ¼","value","@","0","nothing",")","mm","string","target","for","activecell","äº‹ä»¶","column","yyyy","h","æ¢å¤","å€¼ä¸ä¸º","è¡Œ","-","=","è®¾ç½®","/","ï¼Œ","not","screenupdating","m","ç‚¹","æ‰€åœ¨","in","å‘ç”Ÿå˜åŒ–","å‚æ•°","å±å¹•","range","æŸåˆ—","<","byval","â†‘","sub","offset","___________________________________","ç¤ºä¾‹","cb","è¯´æ˜","then","a",";","æˆ–","end","_________________","é¦–","ç”Ÿå˜","numberformatlocal","a1","'","______","(","ä¸º","å…³é—­","å€¼ä¸º","intersect","now","ç©º","å•å…ƒ","\"","â†“","ç”Ÿæˆ","as","long","columns"],"title":"2. ç”¨å®è‡ªåŠ¨åˆ›å»ºæ•°æ®æ—¶é—´","title_tokens":["åˆ›å»º","æ•°æ®","2",".","æ—¶é—´","è‡ªåŠ¨"," ","ç”¨å®"]},{"location":"Others/Excel/03 FormatUnit/","text":"3. ä¸ºå•å…ƒæ ¼æ·»åŠ æ ¼å¼ é€‰ä¸­éœ€è¦æ“ä½œåˆ—, å³é”®é€‰æ‹© è®¾ç½®å•å…ƒæ ¼å¼ ,é€‰æ‹© è‡ªå®šä¹‰ , è¾“å…¥ :G/[æ ¼å¼]","text_tokens":["è¾“å…¥",".","è‡ªå®š","è‡ªå®šä¹‰",",",":","3","åˆ—","[","]","æ ¼å¼","è®¾ç½®","æ·»åŠ ","/","ä¸º"," ","é€‰ä¸­","éœ€è¦","g","å•å…ƒæ ¼","æ“ä½œ","å•å…ƒ","å®šä¹‰","é€‰æ‹©","å³é”®"],"title":"3. ä¸ºå•å…ƒæ ¼æ·»åŠ æ ¼å¼","title_tokens":["æ·»åŠ ","å•å…ƒ","ä¸º","3","."," ","æ ¼å¼","å•å…ƒæ ¼"]},{"location":"Others/Excel/03 FormatUnit/#3","text":"é€‰ä¸­éœ€è¦æ“ä½œåˆ—, å³é”®é€‰æ‹© è®¾ç½®å•å…ƒæ ¼å¼ ,é€‰æ‹© è‡ªå®šä¹‰ , è¾“å…¥ :G/[æ ¼å¼]","text_tokens":["è¾“å…¥","è‡ªå®š","è‡ªå®šä¹‰",",",":","é€‰æ‹©","åˆ—","]","æ ¼å¼","è®¾ç½®","/"," ","é€‰ä¸­","g","éœ€è¦","æ“ä½œ","å•å…ƒ","å®šä¹‰","[","å³é”®"],"title":"3. ä¸ºå•å…ƒæ ¼æ·»åŠ æ ¼å¼","title_tokens":["æ·»åŠ ","å•å…ƒ","ä¸º","3","."," ","æ ¼å¼","å•å…ƒæ ¼"]},{"location":"Others/Excel/04 RepairArrowKey/","text":"4. æ–¹å‘é”®æ— æ³•æ§åˆ¶excelè¡¨æ ¼ä¸Šä¸‹ã€å·¦å³ç§»åŠ¨ è§£å†³ï¼š å¯èƒ½æ˜¯ SCROLL LOCK é”®è¢«æ‰“å¼€ï¼Œåœ¨ç¬”è®°æœ¬ç”µè„‘ä¸Šå¯ä»¥é€šè¿‡ FN+C æˆ–è€… FN+NUMB LK è§£é”","text_tokens":["numb","æ‰“å¼€","ç¬”è®°æœ¬","ä¸Šä¸‹",".","æˆ–è€…","é€šè¿‡","å¯ä»¥","æ–¹å‘","æ— æ³•","ä¸Š","ã€","lock","+","æ–¹å‘é”®","4","è¡¨æ ¼","ç§»åŠ¨","åœ¨","æ— æ³•æ§åˆ¶","å·¦å³","å¯èƒ½","ï¼š","è§£å†³","æ˜¯","lk","æ§åˆ¶","ï¼Œ","fn","ç¬”è®°"," ","c","scroll","é”®","è¢«","è§£é”","ç¬”è®°æœ¬ç”µè„‘","excel","ç”µè„‘"],"title":"4. æ–¹å‘é”®æ— æ³•æ§åˆ¶excelè¡¨æ ¼ä¸Šä¸‹ã€å·¦å³ç§»åŠ¨","title_tokens":["ã€","æ§åˆ¶","æ–¹å‘é”®","ä¸Šä¸‹","4",".","è¡¨æ ¼","ç§»åŠ¨"," ","æ— æ³•æ§åˆ¶","excel","å·¦å³","æ–¹å‘","æ— æ³•"]},{"location":"Others/Excel/04 RepairArrowKey/#4-excel","text":"è§£å†³ï¼š å¯èƒ½æ˜¯ SCROLL LOCK é”®è¢«æ‰“å¼€ï¼Œåœ¨ç¬”è®°æœ¬ç”µè„‘ä¸Šå¯ä»¥é€šè¿‡ FN+C æˆ–è€… FN+NUMB LK è§£é”","text_tokens":["numb","æ‰“å¼€","ç¬”è®°æœ¬","æˆ–è€…","é€šè¿‡","å¯ä»¥","ä¸Š","lock","+","åœ¨","å¯èƒ½","ï¼š","è§£å†³","æ˜¯","lk","ï¼Œ","fn","ç¬”è®°"," ","c","scroll","é”®","è¢«","è§£é”","ç¬”è®°æœ¬ç”µè„‘","ç”µè„‘"],"title":"4. æ–¹å‘é”®æ— æ³•æ§åˆ¶excelè¡¨æ ¼ä¸Šä¸‹ã€å·¦å³ç§»åŠ¨","title_tokens":["ã€","æ§åˆ¶","æ–¹å‘é”®","ä¸Šä¸‹","4",".","è¡¨æ ¼","ç§»åŠ¨"," ","æ— æ³•æ§åˆ¶","excel","å·¦å³","æ–¹å‘","æ— æ³•"]},{"location":"Others/Excel/05 MultipleInsertValue/","text":"5. å°†å•å…ƒæ ¼çš„ç©ºå€¼æ¢æˆç›®æ ‡å€¼ é€‰ä¸­ç›®æ ‡å•å…ƒæ ¼ ctrl + G é€‰æ‹© å®šä½æ¡ä»¶ ä¸‹çš„ ç©ºå€¼ ï¼ˆæˆ–å…¶ä»–ï¼‰ åœ¨è¾“å…¥æ ä¸­è¾“å…¥ç›®æ ‡å€¼ï¼ŒæŒ‰ crtl + Enter","text_tokens":["è¾“å…¥","ç›®æ ‡","ä¸‹","æŒ‰","ctrl","æ¡ä»¶",".","5","æˆ–","çš„","+","æ ä¸­","åœ¨","å®šä½","æ¢æˆ","ï¼‰","ç›®æ ‡å€¼","å°†","crtl","ï¼Œ"," ","é€‰ä¸­","å…¶ä»–","g","å•å…ƒæ ¼","ç©ºå€¼","æ ‡å€¼","å•å…ƒ","ï¼ˆ","é€‰æ‹©","enter"],"title":"5. å°†å•å…ƒæ ¼çš„ç©ºå€¼æ¢æˆç›®æ ‡å€¼","title_tokens":["ç›®æ ‡å€¼","ç›®æ ‡","æ ‡å€¼","çš„","å°†","å•å…ƒ","ç©ºå€¼","."," ","æ¢æˆ","å•å…ƒæ ¼","5"]},{"location":"Others/Excel/05 MultipleInsertValue/#5","text":"é€‰ä¸­ç›®æ ‡å•å…ƒæ ¼ ctrl + G é€‰æ‹© å®šä½æ¡ä»¶ ä¸‹çš„ ç©ºå€¼ ï¼ˆæˆ–å…¶ä»–ï¼‰ åœ¨è¾“å…¥æ ä¸­è¾“å…¥ç›®æ ‡å€¼ï¼ŒæŒ‰ crtl + Enter","text_tokens":["è¾“å…¥","ç›®æ ‡","ä¸‹","æŒ‰","ctrl","æ¡ä»¶","æˆ–","çš„","+","æ ä¸­","åœ¨","å®šä½","ï¼‰","ç›®æ ‡å€¼","crtl","ï¼Œ"," ","é€‰ä¸­","å…¶ä»–","g","å•å…ƒæ ¼","ç©ºå€¼","æ ‡å€¼","å•å…ƒ","ï¼ˆ","é€‰æ‹©","enter"],"title":"5. å°†å•å…ƒæ ¼çš„ç©ºå€¼æ¢æˆç›®æ ‡å€¼","title_tokens":["ç›®æ ‡å€¼","ç›®æ ‡","æ ‡å€¼","çš„","å°†","å•å…ƒ","ç©ºå€¼","."," ","æ¢æˆ","å•å…ƒæ ¼","5"]},{"location":"Python/01 UsingTesseract/","text":"Tesseract ä¸‹è½½åœ°å€ å®‰è£… è®¾ç½®ç¯å¢ƒå˜é‡ ç³»ç»Ÿå˜é‡Path Tesseract-OCRè·¯å¾„ æ–°å»º TESSDATA_PREFIX ç³»ç»Ÿå˜é‡ï¼Œå˜é‡å€¼ä¸º ...\\Tesseract-OCR\\tessdata æµ‹è¯• pythonå®‰è£…pytesseract pip install pytesseract ä¿®æ”¹Python37\\site-packageså†…çš„ pytesseract\\pytesseract.py å†…çš„æ–‡ä»¶ï¼ŒæŒ‡å®šå®‰è£…è·¯å¾„ tesseract_cmd = '.../Tesseract-OCR/tesseract.exe') import pytesseract from PIL import Image // pytesseract . pytesseract . tesseract_cmd = 'C://Program Files (x86)/Tesseract-OCR/tesseract.exe' text = pytesseract . image_to_string ( Image . open ( './demo.jpg' )) print ( text ) REF: å®‰è£… æµ‹è¯•","text_tokens":["tessdata","å†…","text","ç³»ç»Ÿ","python","ä¸‹è½½","exe","open","æ–°å»º",".","demo","ç¯å¢ƒå˜é‡","string","_","program","ä¿®æ”¹","prefix",":","ref","ç¯å¢ƒ","çš„","py","é‡å€¼","...","'","pil","jpg","print","packages","ocr","åœ°å€","å®‰è£…","-","import","è®¾ç½®","cmd","=","/","(","python37","ï¼Œ","ä¸º","to"," ","tesseract","image","c","æŒ‡å®š","install","æ–‡ä»¶","from","path","pip","å˜é‡","è·¯å¾„","pytesseract",")","files","æµ‹è¯•","å˜é‡å€¼","\\","site","ç¯å¢ƒå˜","x86"],"title":"Tesseract","title_tokens":["tesseract"]},{"location":"Python/01 UsingTesseract/#tesseract","text":"ä¸‹è½½åœ°å€ å®‰è£… è®¾ç½®ç¯å¢ƒå˜é‡ ç³»ç»Ÿå˜é‡Path Tesseract-OCRè·¯å¾„ æ–°å»º TESSDATA_PREFIX ç³»ç»Ÿå˜é‡ï¼Œå˜é‡å€¼ä¸º ...\\Tesseract-OCR\\tessdata æµ‹è¯• pythonå®‰è£…pytesseract pip install pytesseract ä¿®æ”¹Python37\\site-packageså†…çš„ pytesseract\\pytesseract.py å†…çš„æ–‡ä»¶ï¼ŒæŒ‡å®šå®‰è£…è·¯å¾„ tesseract_cmd = '.../Tesseract-OCR/tesseract.exe') import pytesseract from PIL import Image // pytesseract . pytesseract . tesseract_cmd = 'C://Program Files (x86)/Tesseract-OCR/tesseract.exe' text = pytesseract . image_to_string ( Image . open ( './demo.jpg' )) print ( text )","text_tokens":["tessdata","å†…","text","ç³»ç»Ÿ","python","ä¸‹è½½","exe","open","æ–°å»º",".","demo","ç¯å¢ƒå˜é‡","string","_","program","ä¿®æ”¹","prefix",":","ç¯å¢ƒ","çš„","py","é‡å€¼","...","'","pil","jpg","print","packages","ocr","åœ°å€","å®‰è£…","-","import","è®¾ç½®","cmd","=","/","(","python37","ï¼Œ","ä¸º","to"," ","tesseract","image","c","æŒ‡å®š","install","æ–‡ä»¶","from","path","pip","å˜é‡","è·¯å¾„","pytesseract",")","files","æµ‹è¯•","å˜é‡å€¼","\\","site","ç¯å¢ƒå˜","x86"],"title":"Tesseract","title_tokens":["tesseract"]},{"location":"Python/01 UsingTesseract/#ref","text":"å®‰è£… æµ‹è¯•","text_tokens":["æµ‹è¯•"," ","å®‰è£…"],"title":"REF:","title_tokens":["ref",":"]},{"location":"Python/02 dzdianpingSpider/","text":"å¤§ä¼—ç‚¹è¯„è¯„ä»·çˆ¬å–é€»è¾‘ åˆ†æ å¦‚å›¾ï¼Œè¯„ä»·ä¸­çš„ å­© å­—åœ¨æºç ä¸­æ—¶è¢« <svgmtsi class=\"cfd1i\"></svgmtsi> æ ‡ç­¾åŠ å¯†äº†ã€‚ åœ¨cssä¸­å¯ä»¥çœ‹åˆ°è¯¥svgå›¾ç‰‡åœ°å€ä¸º background-image: url(//s3plus.meituan.net/v1/mss_0a06a471f9514fc79c981b5466f56b91/svgtextcss/2ec02e25ea201ca1b6b415747003614e.svg); è¿›å…¥è¯¥åœ°å€å‘ç°æ˜¯å­—ä½“æ–‡ä»¶ åŠ å¯†å­—ä½“çš„cssä¸­æœ‰ background: -0.0px -1808.0px; ï¼Œé€šè¿‡æœç´¢å¯çŸ¥ x / font-sizeï¼ˆsvgæ–‡ä»¶ä¸­â‘ ï¼‰ + 1 å¯ä»¥å¾—åˆ°è¯¥å­—ä½“åœ¨svgä¸­çš„ç¬¬å‡ ä¸ªï¼›æ¯”è¾ƒyåæ ‡å’Œâ‘¡çš„æ¯”è¾ƒï¼Œå…¶ä¸­ï¼Œå– y<N ä¸­çš„Nå€¼ å­© å­— background: -0.0px -1808.0px; å¯¹ç…§å¯çŸ¥ï¼šx=1ï¼Œy<1831çš„path id=47 REFï¼š å¤§ä¼—ç‚¹è¯„è¯„è®ºæŠ“å–-åŠ å¯†è¯„è®ºä¿¡æ¯å®Œæ•´æŠ“å–","text_tokens":["mss","è¿›å…¥","æ ‡ç­¾","ä¿¡æ¯","_",":","ref","+","svgtextcss","åœ¨","ï¼š","ï¼‰","2ec02e25ea201ca1b6b415747003614e","æŠ“å–","å®Œæ•´"," ","image","çˆ¬å–",">","px","net","è¯„ä»·","â‘¡","è¯„è®º","â‘ ",".","å­—ä½“","å¯ä»¥","ç¬¬å‡ ","åæ ‡","çš„","é€»è¾‘","y","svgmtsi","å–","å¦‚å›¾","æ˜¯","å›¾ç‰‡","url","class","ã€‚","å€¼","id","æ¯”è¾ƒ","size",")","å¯çŸ¥","å¯¹ç…§","ï¼›","47","s3plus","å­©","ä¸­æ—¶","ä¸­æœ‰","å’Œ","v1","ç¬¬å‡ ä¸ª","åœ°å€","-","=","/","ï¼Œ","å¤§ä¼—","åˆ†æ","å‡ ä¸ª","å­—","æ–‡ä»¶","ï¼ˆ","<","æœç´¢","äº†","1","é€šè¿‡","1831","è¯¥","å…¶ä¸­",";","æºç ","0a06a471f9514fc79c981b5466f56b91","n","x","å¾—åˆ°","font","(","åŠ å¯†","ç‚¹è¯„","ä¸º","1808.0","css","meituan","background","cfd1i","ä¸­","svg","è¢«","\"","path","0.0","çœ‹åˆ°","å‘ç°"],"title":"å¤§ä¼—ç‚¹è¯„è¯„ä»·çˆ¬å–é€»è¾‘","title_tokens":["ç‚¹è¯„","é€»è¾‘","è¯„ä»·","å¤§ä¼—","çˆ¬å–"]},{"location":"Python/02 dzdianpingSpider/#_1","text":"","text_tokens":[],"title":"å¤§ä¼—ç‚¹è¯„è¯„ä»·çˆ¬å–é€»è¾‘","title_tokens":["ç‚¹è¯„","é€»è¾‘","è¯„ä»·","å¤§ä¼—","çˆ¬å–"]},{"location":"Python/02 dzdianpingSpider/#_2","text":"å¦‚å›¾ï¼Œè¯„ä»·ä¸­çš„ å­© å­—åœ¨æºç ä¸­æ—¶è¢« <svgmtsi class=\"cfd1i\"></svgmtsi> æ ‡ç­¾åŠ å¯†äº†ã€‚ åœ¨cssä¸­å¯ä»¥çœ‹åˆ°è¯¥svgå›¾ç‰‡åœ°å€ä¸º background-image: url(//s3plus.meituan.net/v1/mss_0a06a471f9514fc79c981b5466f56b91/svgtextcss/2ec02e25ea201ca1b6b415747003614e.svg); è¿›å…¥è¯¥åœ°å€å‘ç°æ˜¯å­—ä½“æ–‡ä»¶ åŠ å¯†å­—ä½“çš„cssä¸­æœ‰ background: -0.0px -1808.0px; ï¼Œé€šè¿‡æœç´¢å¯çŸ¥ x / font-sizeï¼ˆsvgæ–‡ä»¶ä¸­â‘ ï¼‰ + 1 å¯ä»¥å¾—åˆ°è¯¥å­—ä½“åœ¨svgä¸­çš„ç¬¬å‡ ä¸ªï¼›æ¯”è¾ƒyåæ ‡å’Œâ‘¡çš„æ¯”è¾ƒï¼Œå…¶ä¸­ï¼Œå– y<N ä¸­çš„Nå€¼ å­© å­— background: -0.0px -1808.0px; å¯¹ç…§å¯çŸ¥ï¼šx=1ï¼Œy<1831çš„path id=47","text_tokens":["mss","è¿›å…¥","æ ‡ç­¾","_",":","+","svgtextcss","åœ¨","ï¼š","ï¼‰","2ec02e25ea201ca1b6b415747003614e"," ","image",">","px","net","è¯„ä»·","â‘¡","â‘ ",".","å­—ä½“","å¯ä»¥","ç¬¬å‡ ","åæ ‡","çš„","y","svgmtsi","å–","å¦‚å›¾","æ˜¯","å›¾ç‰‡","url","class","ã€‚","å€¼","id","æ¯”è¾ƒ","size",")","å¯çŸ¥","å¯¹ç…§","ï¼›","47","s3plus","å­©","ä¸­æ—¶","ä¸­æœ‰","å’Œ","v1","ç¬¬å‡ ä¸ª","åœ°å€","-","=","/","ï¼Œ","å‡ ä¸ª","å­—","æ–‡ä»¶","ï¼ˆ","<","æœç´¢","äº†","1","é€šè¿‡","1831","è¯¥","å…¶ä¸­",";","æºç ","0a06a471f9514fc79c981b5466f56b91","n","x","å¾—åˆ°","font","(","åŠ å¯†","ä¸º","1808.0","css","meituan","background","cfd1i","ä¸­","svg","è¢«","\"","path","0.0","çœ‹åˆ°","å‘ç°"],"title":"åˆ†æ","title_tokens":["åˆ†æ"]},{"location":"Python/02 dzdianpingSpider/#ref","text":"å¤§ä¼—ç‚¹è¯„è¯„è®ºæŠ“å–-åŠ å¯†è¯„è®ºä¿¡æ¯å®Œæ•´æŠ“å–","text_tokens":["-","åŠ å¯†","ç‚¹è¯„","å¤§ä¼—","æŠ“å–","ä¿¡æ¯","å®Œæ•´","è¯„è®º"],"title":"REFï¼š","title_tokens":["ref","ï¼š"]}]}